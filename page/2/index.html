<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-code-format" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/27/code-format/" class="article-date">
  <time class="dt-published" datetime="2023-05-27T14:54:01.000Z" itemprop="datePublished">2023-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/articture/">articture</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/27/code-format/">架构设计-代码规范</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="后端开发规范"><a href="#后端开发规范" class="headerlink" title="后端开发规范"></a>后端开发规范</h2><h4 id="3-1-Java代码规范"><a href="#3-1-Java代码规范" class="headerlink" title="3.1 Java代码规范"></a>3.1 Java代码规范</h4><p>1,原则上，基于阿里巴巴代码规范，可安装idea或者eclipse插件，进行代码扫描。</p>
<p>2,基于checkstyle和findbugs，进行maven指令扫描。</p>
<h4 id="3-2-数据库规范"><a href="#3-2-数据库规范" class="headerlink" title="3.2 数据库规范"></a>3.2 数据库规范</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">2.1 数据库设计</span><br><span class="line">以下所有规范会按照【高危】、【强制】、【建议】三个级别进行标注，遵守优先级从高到低。</span><br><span class="line"></span><br><span class="line">对于不满足【高危】和【强制】两个级别的设计，DBA会强制打回要求修改。</span><br><span class="line"></span><br><span class="line">2.1.1 库名</span><br><span class="line">【强制】库的名称必须控制在32个字符以内，相关模块的表名与表名之间尽量提现join的关系，如user表和user_login表。</span><br><span class="line">【强制】库的名称格式：业务系统名称_子系统名，同一模块使用的表名尽量使用统一前缀。</span><br><span class="line">【强制】一般分库名称命名格式是库通配名_编号，编号从0开始递增，比如wenda_001以时间进行分库的名称格式是“库通配名_时间”</span><br><span class="line">【强制】创建数据库时必须显式指定字符集，并且字符集只能是utf8或者utf8mb4。创建数据库SQL举例：create database db1 default character set utf8;。</span><br><span class="line">2.1.2 表结构</span><br><span class="line">【强制】表和列的名称必须控制在32个字符以内，表名只能使用字母、数字和下划线，一律小写。</span><br><span class="line">【强制】表名要求模块名强相关，如师资系统采用”sz”作为前缀，渠道系统采用”qd”作为前缀等。</span><br><span class="line">【强制】创建表时必须显式指定字符集为utf8或utf8mb4。</span><br><span class="line">【强制】创建表时必须显式指定表存储引擎类型，如无特殊需求，一律为InnoDB。当需要使用除InnoDB/MyISAM/Memory以外的存储引擎时，必须通过DBA审核才能在生产环境中使用。因为Innodb表支持事务、行锁、宕机恢复、MVCC等关系型数据库重要特性，为业界使用最多的MySQL存储引擎。而这是其他大多数存储引擎不具备的，因此首推InnoDB。</span><br><span class="line">【强制】建表必须有comment</span><br><span class="line">【建议】建表时关于主键：(1)强制要求主键为id，类型为int或bigint，且为auto_increment(2)标识表里每一行主体的字段不要设为主键，建议设为其他字段如user_id，order_id等，并建立unique key索引（可参考cdb.teacher表设计）。因为如果设为主键且主键值为随机插入，则会导致innodb内部page分裂和大量随机I/O，性能下降。</span><br><span class="line">【建议】核心表（如用户表，金钱相关的表）必须有行数据的创建时间字段create_time和最后更新时间字段update_time，便于查问题。</span><br><span class="line">【建议】表中所有字段必须都是NOT NULL属性，业务可以根据需要定义DEFAULT值。因为使用NULL值会存在每一行都会占用额外存储空间、数据迁移容易出错、聚合函数计算结果偏差等问题。</span><br><span class="line">【建议】建议对表里的blob、text等大字段，垂直拆分到其他表里，仅在需要读这些对象的时候才去select。</span><br><span class="line">【建议】反范式设计：把经常需要join查询的字段，在其他表里冗余一份。如user_name属性在user_account，user_login_log等表里冗余一份，减少join查询。</span><br><span class="line">【强制】中间表用于保留中间结果集，名称必须以tmp_开头。备份表用于备份或抓取源表快照，名称必须以bak_开头。中间表和备份表定期清理。</span><br><span class="line">【强制】对于超过100W行的大表进行alter table，必须经过DBA审核，并在业务低峰期执行。因为alter table会产生表锁，期间阻塞对于该表的所有写入，对于业务可能会产生极大影响。</span><br><span class="line">2.1.3 列数据类型优化</span><br><span class="line">【建议】表中的自增列（auto_increment属性），推荐使用bigint类型。因为无符号int存储范围为-2147483648~2147483647（大约21亿左右），溢出后会导致报错。</span><br><span class="line">【建议】业务中选择性很少的状态status、类型type等字段推荐使用tinytint或者smallint类型节省存储空间。</span><br><span class="line">【建议】业务中IP地址字段推荐使用int类型，不推荐用char(15)。因为int只占4字节，可以用如下函数相互转换，而char(15)占用至少15字节。一旦表数据行数到了1亿，那么要多用1.1G存储空间。 SQL：select inet_aton(&#x27;192.168.2.12&#x27;); select inet_ntoa(3232236044); PHP: ip2long(‘192.168.2.12’); long2ip(3530427185);</span><br><span class="line">【建议】不推荐使用enum，set。 因为它们浪费空间，且枚举值写死了，变更不方便。推荐使用tinyint或smallint。</span><br><span class="line">【建议】不推荐使用blob，text等类型。它们都比较浪费硬盘和内存空间。在加载表数据时，会读取大字段到内存里从而浪费内存空间，影响系统性能。建议和PM、RD沟通，是否真的需要这么大字段。Innodb中当一行记录超过8098字节时，会将该记录中选取最长的一个字段将其768字节放在原始page里，该字段余下内容放在overflow-page里。不幸的是在compact行格式下，原始page和overflow-page都会加载。</span><br><span class="line">【建议】存储金钱的字段，建议用int，程序端乘以100和除以100进行存取。因为int占用4字节，而double占用8字节，空间浪费。</span><br><span class="line">【建议】文本数据尽量用varchar存储。因为varchar是变长存储，比char更省空间。MySQL server层规定一行所有文本最多存65535字节，因此在utf8字符集下最多存21844个字符，超过会自动转换为mediumtext字段。而text在utf8字符集下最多存21844个字符，mediumtext最多存2^24/3个字符，longtext最多存2^32个字符。一般建议用varchar类型，字符数不要超过2700。</span><br><span class="line">【建议】时间类型尽量选取timestamp。因为datetime占用8字节，timestamp仅占用4字节，但是范围为1970-01-01 00:00:01到2038-01-01 00:00:00。更为高阶的方法，选用int来存储时间，使用SQL函数unix_timestamp()和from_unixtime()来进行转换。</span><br><span class="line">详细存储大小参加下图：</span><br><span class="line"></span><br><span class="line">MySQL数据类型存储大小</span><br><span class="line"></span><br><span class="line">2.1.4 索引设计</span><br><span class="line">【强制】InnoDB表必须主键为id int/bigint auto_increment,且主键值禁止被更新。</span><br><span class="line">【建议】主键的名称以“pk_”开头，唯一键以“uk_”或“uq_”开头，普通索引以“idx_”开头，一律使用小写格式，以表名/字段的名称或缩写作为后缀。</span><br><span class="line">【强制】InnoDB和MyISAM存储引擎表，索引类型必须为BTREE；MEMORY表可以根据需要选择HASH或者BTREE类型索引。</span><br><span class="line">【强制】单个索引中每个索引记录的长度不能超过64KB。</span><br><span class="line">【建议】单个表上的索引个数不能超过7个。</span><br><span class="line">【建议】在建立索引时，多考虑建立联合索引，并把区分度最高的字段放在最前面。如列userid的区分度可由select count(distinct userid)计算出来。</span><br><span class="line">【建议】在多表join的SQL里，保证被驱动表的连接列上有索引，这样join执行效率最高。</span><br><span class="line">【建议】建表或加索引时，保证表里互相不存在冗余索引。对于MySQL来说，如果表里已经存在key(a,b)，则key(a)为冗余索引，需要删除。</span><br><span class="line">2.1.5 分库分表、分区表</span><br><span class="line">【强制】分区表的分区字段（partition-key）必须有索引，或者是组合索引的首列。</span><br><span class="line">【强制】单个分区表中的分区（包括子分区）个数不能超过1024。</span><br><span class="line">【强制】上线前RD或者DBA必须指定分区表的创建、清理策略。</span><br><span class="line">【强制】访问分区表的SQL必须包含分区键。</span><br><span class="line">【建议】单个分区文件不超过2G，总大小不超过50G。建议总分区数不超过20个。</span><br><span class="line">【强制】对于分区表执行alter table操作，必须在业务低峰期执行。</span><br><span class="line">【强制】采用分库策略的，库的数量不能超过1024</span><br><span class="line">【强制】采用分表策略的，表的数量不能超过4096</span><br><span class="line">【建议】单个分表不超过500W行，ibd文件大小不超过2G，这样才能让数据分布式变得性能更佳。</span><br><span class="line">【建议】水平分表尽量用取模方式，日志、报表类数据建议采用日期进行分表。</span><br><span class="line">2.1.6 字符集</span><br><span class="line">【强制】数据库本身库、表、列所有字符集必须保持一致，为utf8或utf8mb4。</span><br><span class="line">【强制】前端程序字符集或者环境变量中的字符集，与数据库、表的字符集必须一致，统一为utf8。</span><br><span class="line">2.1.7 程序层DAO设计建议</span><br><span class="line">【建议】新的代码不要用model，推荐使用手动拼SQL+绑定变量传入参数的方式。因为model虽然可以使用面向对象的方式操作db，但是其使用不当很容易造成生成的SQL非常复杂，且model层自己做的强制类型转换性能较差，最终导致数据库性能下降。</span><br><span class="line">【建议】前端程序连接MySQL或者redis，必须要有连接超时和失败重连机制，且失败重试必须有间隔时间。</span><br><span class="line">【建议】前端程序报错里尽量能够提示MySQL或redis原生态的报错信息，便于排查错误。</span><br><span class="line">【建议】对于有连接池的前端程序，必须根据业务需要配置初始、最小、最大连接数，超时时间以及连接回收机制，否则会耗尽数据库连接资源，造成线上事故。</span><br><span class="line">【建议】对于log或history类型的表，随时间增长容易越来越大，因此上线前RD或者DBA必须建立表数据清理或归档方案。</span><br><span class="line">【建议】在应用程序设计阶段，RD必须考虑并规避数据库中主从延迟对于业务的影响。尽量避免从库短时延迟（20秒以内）对业务造成影响，建议强制一致性的读开启事务走主库，或更新后过一段时间再去读从库。</span><br><span class="line">【建议】多个并发业务逻辑访问同一块数据（innodb表）时，会在数据库端产生行锁甚至表锁导致并发下降，因此建议更新类SQL尽量基于主键去更新。</span><br><span class="line">【建议】业务逻辑之间加锁顺序尽量保持一致，否则会导致死锁。</span><br><span class="line">【建议】对于单表读写比大于10:1的数据行或单个列，可以将热点数据放在缓存里（如mecache或redis），加快访问速度，降低MySQL压力。</span><br><span class="line">2.1.8 一个规范的建表语句示例</span><br><span class="line">一个较为规范的建表语句为：</span><br><span class="line"></span><br><span class="line">CREATE TABLE user (</span><br><span class="line">  `id` bigint(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `user_id` bigint(11) NOT NULL COMMENT ‘用户id’</span><br><span class="line">  `username` varchar(45) NOT NULL COMMENT &#x27;真实姓名&#x27;,</span><br><span class="line">  `email` varchar(30) NOT NULL COMMENT ‘用户邮箱’,</span><br><span class="line">  `nickname` varchar(45) NOT NULL COMMENT &#x27;昵称&#x27;,</span><br><span class="line">  `avatar` int(11) NOT NULL COMMENT &#x27;头像&#x27;,</span><br><span class="line">  `birthday` date NOT NULL COMMENT &#x27;生日&#x27;,</span><br><span class="line">  `sex` tinyint(4) DEFAULT &#x27;0&#x27; COMMENT &#x27;性别&#x27;,</span><br><span class="line">  `short_introduce` varchar(150) DEFAULT NULL COMMENT &#x27;一句话介绍自己，最多50个汉字&#x27;,</span><br><span class="line">  `user_resume` varchar(300) NOT NULL COMMENT &#x27;用户提交的简历存放地址&#x27;,</span><br><span class="line">  `user_register_ip` int NOT NULL COMMENT ‘用户注册时的源ip’,</span><br><span class="line">  `create_time` timestamp NOT NULL COMMENT ‘用户记录创建的时间’,</span><br><span class="line">  `update_time` timestamp NOT NULL COMMENT ‘用户资料修改的时间’,</span><br><span class="line">  `user_review_status` tinyint NOT NULL COMMENT ‘用户资料审核状态，1为通过，2为审核中，3为未通过，4为还未提交审核’,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  UNIQUE KEY `idx_user_id` (`user_id`),</span><br><span class="line">  KEY `idx_username`(`username`),</span><br><span class="line">  KEY `idx_create_time`(`create_time`,`user_review_status`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#x27;网站用户基本信息&#x27;;</span><br><span class="line">2.2 SQL编写</span><br><span class="line">2.2.1 DML语句</span><br><span class="line">【强制】SELECT语句必须指定具体字段名称，禁止写成*。因为select *会将不该读的数据也从MySQL里读出来，造成网卡压力。且表字段一旦更新，但model层没有来得及更新的话，系统会报错。</span><br><span class="line">【强制】insert语句指定具体字段名称，不要写成insert into t1 values(…)，道理同上。</span><br><span class="line">【建议】insert into…values(XX),(XX),(XX)…。这里XX的值不要超过5000个。值过多虽然上线很很快，但会引起主从同步延迟。</span><br><span class="line">【建议】SELECT语句不要使用UNION，推荐使用UNION ALL，并且UNION子句个数限制在5个以内。因为union all不需要去重，节省数据库资源，提高性能。</span><br><span class="line">【建议】in值列表限制在500以内。例如select… where userid in(….500个以内…)，这么做是为了减少底层扫描，减轻数据库压力从而加速查询。</span><br><span class="line">【建议】事务里批量更新数据需要控制数量，进行必要的sleep，做到少量多次。</span><br><span class="line">【强制】事务涉及的表必须全部是innodb表。否则一旦失败不会全部回滚，且易造成主从库同步终端。</span><br><span class="line">【强制】写入和事务发往主库，只读SQL发往从库。</span><br><span class="line">【强制】除静态表或小表（100行以内），DML语句必须有where条件，且使用索引查找。</span><br><span class="line">【强制】生产环境禁止使用hint，如sql_no_cache，force index，ignore key，straight join等。因为hint是用来强制SQL按照某个执行计划来执行，但随着数据量变化我们无法保证自己当初的预判是正确的，因此我们要相信MySQL优化器！</span><br><span class="line">【强制】where条件里等号左右字段类型必须一致，否则无法利用索引。</span><br><span class="line">【建议】SELECT|UPDATE|DELETE|REPLACE要有WHERE子句，且WHERE子句的条件必需使用索引查找。</span><br><span class="line">【强制】生产数据库中强烈不推荐大表上发生全表扫描，但对于100行以下的静态表可以全表扫描。查询数据量不要超过表行数的25%，否则不会利用索引。</span><br><span class="line">【强制】WHERE 子句中禁止只使用全模糊的LIKE条件进行查找，必须有其他等值或范围查询条件，否则无法利用索引。</span><br><span class="line">【建议】索引列不要使用函数或表达式，否则无法利用索引。如where length(name)=&#x27;Admin&#x27;或where user_id+2=10023。</span><br><span class="line">【建议】减少使用or语句，可将or语句优化为union，然后在各个where条件上建立索引。如where a=1 or b=2优化为where a=1… union …where b=2, key(a),key(b)。</span><br><span class="line">【建议】分页查询，当limit起点较高时，可先用过滤条件进行过滤。如select a,b,c from t1 limit 10000,20;优化为: select a,b,c from t1 where id&gt;10000 limit 20;。</span><br><span class="line">2.2.2 多表连接</span><br><span class="line">【强制】禁止跨db的join语句。因为这样可以减少模块间耦合，为数据库拆分奠定坚实基础。</span><br><span class="line">【强制】禁止在业务的更新类SQL语句中使用join，比如update t1 join t2…。</span><br><span class="line">【建议】不建议使用子查询，建议将子查询SQL拆开结合程序多次查询，或使用join来代替子查询。</span><br><span class="line">【建议】线上环境，多表join不要超过3个表。</span><br><span class="line">【建议】多表连接查询推荐使用别名，且SELECT列表中要用别名引用字段，数据库.表格式，如select a from db1.table1 alias1 where …。</span><br><span class="line">【建议】在多表join中，尽量选取结果集较小的表作为驱动表，来join其他表。</span><br><span class="line">2.2.3 事务</span><br><span class="line">【建议】事务中INSERT|UPDATE|DELETE|REPLACE语句操作的行数控制在2000以内，以及WHERE子句中IN列表的传参个数控制在500以内。</span><br><span class="line">【建议】批量操作数据时，需要控制事务处理间隔时间，进行必要的sleep，一般建议值5-10秒。</span><br><span class="line">【建议】对于有auto_increment属性字段的表的插入操作，并发需要控制在200以内。</span><br><span class="line">【强制】程序设计必须考虑“数据库事务隔离级别”带来的影响，包括脏读、不可重复读和幻读。线上建议事务隔离级别为repeatable-read。</span><br><span class="line">【建议】事务里包含SQL不超过5个（支付业务除外）。因为过长的事务会导致锁数据较久，MySQL内部缓存、连接消耗过多等雪崩问题。</span><br><span class="line">【建议】事务里更新语句尽量基于主键或unique key，如update … where id=XX; 否则会产生间隙锁，内部扩大锁定范围，导致系统性能下降，产生死锁。</span><br><span class="line">【建议】尽量把一些典型外部调用移出事务，如调用webservice，访问文件存储等，从而避免事务过长。</span><br><span class="line">【建议】对于MySQL主从延迟严格敏感的select语句，请开启事务强制访问主库。</span><br><span class="line">2.2.4 排序和分组</span><br><span class="line">【建议】减少使用order by，和业务沟通能不排序就不排序，或将排序放到程序端去做。order by、group by、distinct这些语句较为耗费CPU，数据库的CPU资源是极其宝贵的。</span><br><span class="line">【建议】order by、group by、distinct这些SQL尽量利用索引直接检索出排序好的数据。如where a=1 order by可以利用key(a,b)。</span><br><span class="line">【建议】包含了order by、group by、distinct这些查询的语句，where条件过滤出来的结果集请保持在1000行以内，否则SQL会很慢。</span><br><span class="line">2.2.5 线上禁止使用的SQL语句</span><br><span class="line">【高危】禁用update|delete t1 … where a=XX limit XX; 这种带limit的更新语句。因为会导致主从不一致，导致数据错乱。建议加上order by PK。</span><br><span class="line">【高危】禁止使用关联子查询，如update t1 set … where name in(select name from user where…);效率极其低下。</span><br><span class="line">【强制】禁用procedure、function、trigger、views、event、外键约束。因为他们消耗数据库资源，降低数据库实例可扩展性。推荐都在程序端实现。</span><br><span class="line">【强制】禁用insert into …on duplicate key update…在高并发环境下，会造成主从不一致。</span><br><span class="line">【强制】禁止联表更新语句，如update t1,t2 where t1.id=t2.id…。</span><br></pre></td></tr></table></figure>

<h4 id="3-3-单元测试规范"><a href="#3-3-单元测试规范" class="headerlink" title="3.3 单元测试规范"></a>3.3 单元测试规范</h4><p>1，单元测试范围包括 service层和mapper层。</p>
<p>2，单元测试不可直连开发或者测试环境数据库，需基于内存数据库H2进行单元测试。</p>
<p>3，单元测试数据需提前自己准备好，基于@Before或者@BeforeClass注解，测试结束需删除相关数据，基于</p>
<p>@After或者@AfterClass注解。</p>
<p>4，单元测试需涵盖业务逻辑测试，分支覆盖率测试，边界测试和性能测试等。</p>
<h4 id="3-4-CI规范"><a href="#3-4-CI规范" class="headerlink" title="3.4 CI规范"></a>3.4 CI规范</h4><p>CI规范主要包括：</p>
<p>1，不可跳过单元测试。</p>
<p>2，代码质量测试，比如checksstyle，findbugs和基于Sonar的定义的规范。</p>
<p>具体使用需要在pom文件做配置。</p>
<p>maven打包指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clean compile -Dmaven.test.skip=true  findbugs:findbugs site</span><br></pre></td></tr></table></figure>

<p>findbugs pom配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.&lt;build&gt;    </span><br><span class="line">2.  &lt;plugins&gt;  </span><br><span class="line">3.      &lt;plugin&gt;  </span><br><span class="line">4.               &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;  </span><br><span class="line">5.               &lt;artifactId&gt;findbugs-maven-plugin&lt;/artifactId&gt;  </span><br><span class="line">6.               &lt;version&gt;3.0.1&lt;/version&gt;  </span><br><span class="line">7.               &lt;configuration&gt;  </span><br><span class="line">8.                    &lt;threshold&gt;High&lt;/threshold&gt;  </span><br><span class="line">9.                    &lt;effort&gt;Default&lt;/effort&gt;  </span><br><span class="line">10.                    &lt;findbugsXmlOutput&gt;true&lt;/findbugsXmlOutput&gt;  </span><br><span class="line">11.                    &lt;findbugsXmlWithMessages&gt;true&lt;/findbugsXmlWithMessages&gt;  </span><br><span class="line">12.                    &lt;xmlOutput&gt;true&lt;/xmlOutput&gt;  </span><br><span class="line">13.                    &lt;formats&gt;&lt;format&gt;html&lt;/format&gt;&lt;/formats&gt;  </span><br><span class="line">14.                    &lt;findbugsXmlOutputDirectory&gt;target/site&lt;/findbugsXmlOutputDirectory&gt;  </span><br><span class="line">15.               &lt;/configuration&gt;  </span><br><span class="line">16.            &lt;/plugin&gt;  </span><br><span class="line">17.  &lt;/plugins&gt;  </span><br><span class="line">18.lt;/build&gt; </span><br></pre></td></tr></table></figure>



<p>checkstyle 插件配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE module PUBLIC</span><br><span class="line">        &quot;-//Puppy Crawl//DTD Check Configuration 1.3//EN&quot;</span><br><span class="line">        &quot;http://www.puppycrawl.com/dtds/configuration_1_3.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">    Checkstyle configuration that checks the Google coding conventions from Google Java Style</span><br><span class="line">    that can be found at https://google.github.io/styleguide/javaguide.html.</span><br><span class="line">    Checkstyle is very configurable. Be sure to read the documentation at</span><br><span class="line">    http://checkstyle.sf.net (or in your downloaded distribution).</span><br><span class="line">    To completely disable a check, just comment it out or delete it from the file.</span><br><span class="line">    Authors: Max Vetrenko, Ruslan Diachenko, Roman Ivanov.</span><br><span class="line"> --&gt;</span><br><span class="line"></span><br><span class="line">&lt;module name=&quot;Checker&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;charset&quot; value=&quot;UTF-8&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--&lt;property name=&quot;severity&quot; value=&quot;warning&quot;/&gt;--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property name=&quot;fileExtensions&quot; value=&quot;java, properties, xml&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Checks for whitespace                               --&gt;</span><br><span class="line">    &lt;!-- See http://checkstyle.sf.net/config_whitespace.html --&gt;</span><br><span class="line">    &lt;module name=&quot;FileTabCharacter&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;eachLine&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;/module&gt;</span><br><span class="line"></span><br><span class="line">    &lt;module name=&quot;SuppressWarningsFilter&quot;/&gt;</span><br><span class="line">    &lt;module name=&quot;TreeWalker&quot;&gt;</span><br><span class="line">        &lt;module name=&quot;SuppressWarningsHolder&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;OuterTypeFilename&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;IllegalTokenText&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot; value=&quot;STRING_LITERAL, CHAR_LITERAL&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot;</span><br><span class="line">                      value=&quot;\\u00(08|09|0(a|A)|0(c|C)|0(d|D)|22|27|5(C|c))|\\(0(10|11|12|14|15|42|47)|134)&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;message&quot; value=&quot;Avoid using corresponding octal or Unicode escape.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;AvoidEscapedUnicodeCharacters&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;allowEscapesForControlCharacters&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowByTailComment&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowNonPrintableEscapes&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;LineLength&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;max&quot; value=&quot;500&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;ignorePattern&quot;</span><br><span class="line">                      value=&quot;^package.*|^import.*|a href|href|http://|https://|ftp://&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;AvoidStarImport&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;OneTopLevelClass&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;NoLineWrap&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;EmptyBlock&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;option&quot; value=&quot;TEXT&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot;</span><br><span class="line">                      value=&quot;LITERAL_TRY, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE, LITERAL_SWITCH&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;NeedBraces&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;LeftCurly&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;maxLineLength&quot; value=&quot;100&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;RightCurly&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;RightCurly&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;option&quot; value=&quot;alone&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot;</span><br><span class="line">                      value=&quot;CLASS_DEF, METHOD_DEF, CTOR_DEF, LITERAL_FOR, LITERAL_WHILE, LITERAL_DO, STATIC_INIT, INSTANCE_INIT&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;WhitespaceAround&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;allowEmptyConstructors&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowEmptyMethods&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowEmptyTypes&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowEmptyLoops&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;ws.notFollowed&quot;</span><br><span class="line">                     value=&quot;WhitespaceAround: &#x27;&#x27;&#123;0&#125;&#x27;&#x27; is not followed by whitespace. Empty blocks may only be represented as &#x27;&#123;&#125;&#x27; when not part of a multi-block statement (4.1.3)&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;ws.notPreceded&quot;</span><br><span class="line">                     value=&quot;WhitespaceAround: &#x27;&#x27;&#123;0&#125;&#x27;&#x27; is not preceded with whitespace.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;OneStatementPerLine&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;MultipleVariableDeclarations&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;ArrayTypeStyle&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;MissingSwitchDefault&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;FallThrough&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;UpperEll&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;ModifierOrder&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;EmptyLineSeparator&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;allowNoEmptyLineBetweenFields&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;SeparatorWrap&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot; value=&quot;DOT&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;option&quot; value=&quot;nl&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;SeparatorWrap&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot; value=&quot;COMMA&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;option&quot; value=&quot;EOL&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;PackageName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;^[a-z]+(\.[a-z][a-z0-9]*)*$&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Package name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;TypeName&quot;&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Type name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;MemberName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;^[a-z][_a-zA-Z0-9]*$&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Member name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;ParameterName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;^[a-z][_a-zA-Z0-9]*$&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Parameter name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;CatchParameterName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;^[a-z][a-zA-Z0-9]*$&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Catch parameter name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;LocalVariableName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot; value=&quot;VARIABLE_DEF&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;^[a-z][a-zA-Z0-9]*$&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowOneCharVarInForLoop&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Local variable name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;ClassTypeParameterName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Class type name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;MethodTypeParameterName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Method type name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;InterfaceTypeParameterName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Interface type name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;NoFinalizer&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;GenericWhitespace&quot;&gt;</span><br><span class="line">            &lt;message key=&quot;ws.followed&quot;</span><br><span class="line">                     value=&quot;GenericWhitespace &#x27;&#x27;&#123;0&#125;&#x27;&#x27; is followed by whitespace.&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;ws.preceded&quot;</span><br><span class="line">                     value=&quot;GenericWhitespace &#x27;&#x27;&#123;0&#125;&#x27;&#x27; is preceded with whitespace.&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;ws.illegalFollow&quot;</span><br><span class="line">                     value=&quot;GenericWhitespace &#x27;&#x27;&#123;0&#125;&#x27;&#x27; should followed by whitespace.&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;ws.notPreceded&quot;</span><br><span class="line">                     value=&quot;GenericWhitespace &#x27;&#x27;&#123;0&#125;&#x27;&#x27; is not preceded with whitespace.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;Indentation&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;basicOffset&quot; value=&quot;4&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;braceAdjustment&quot; value=&quot;0&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;caseIndent&quot; value=&quot;4&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;throwsIndent&quot; value=&quot;8&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;lineWrappingIndentation&quot; value=&quot;8&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;arrayInitIndent&quot; value=&quot;4&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;AbbreviationAsWordInName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;ignoreFinal&quot; value=&quot;false&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowedAbbreviations&quot; value=&quot;XML,URL,URI,TTL,DB,AWS,JWT,IP,SSO,ST&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowedAbbreviationLength&quot; value=&quot;1&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;OverloadMethodsDeclarationOrder&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;VariableDeclarationUsageDistance&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;MethodParamPad&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;OperatorWrap&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;option&quot; value=&quot;NL&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot;</span><br><span class="line">                      value=&quot;BAND, BOR, BSR, BXOR, DIV, EQUAL, GE, GT, LAND, LE, LITERAL_INSTANCEOF, LOR, LT, MINUS, MOD, NOT_EQUAL, PLUS, QUESTION, SL, SR, STAR &quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;AnnotationLocation&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot;</span><br><span class="line">                      value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;AnnotationLocation&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;tokens&quot; value=&quot;VARIABLE_DEF&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowSamelineMultipleAnnotations&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;NonEmptyAtclauseDescription&quot;/&gt;</span><br><span class="line">        &lt;module name=&quot;JavadocTagContinuationIndentation&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;severity&quot; value=&quot;ignore&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;SummaryJavadoc&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;severity&quot; value=&quot;ignore&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;forbiddenSummaryFragments&quot;</span><br><span class="line">                      value=&quot;^@return the *|^This method returns |^A [&#123;]@code [a-zA-Z0-9]+[&#125;]( is a )&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;JavadocParagraph&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;severity&quot; value=&quot;ignore&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;AtclauseOrder&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;tagOrder&quot; value=&quot;@param, @return, @throws, @deprecated&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;target&quot;</span><br><span class="line">                      value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF, VARIABLE_DEF&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;JavadocMethod&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;severity&quot; value=&quot;ignore&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;scope&quot; value=&quot;public&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowMissingParamTags&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowMissingThrowsTags&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowMissingReturnTag&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;minLineCount&quot; value=&quot;2&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowedAnnotations&quot; value=&quot;Override, Test&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;allowThrowsTagsForSubclasses&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;MethodName&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;format&quot; value=&quot;^[a-z][a-z0-9][a-zA-Z0-9_]*$&quot;/&gt;</span><br><span class="line">            &lt;message key=&quot;name.invalidPattern&quot;</span><br><span class="line">                     value=&quot;Method name &#x27;&#x27;&#123;0&#125;&#x27;&#x27; must match pattern &#x27;&#x27;&#123;1&#125;&#x27;&#x27;.&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;SingleLineJavadoc&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;severity&quot; value=&quot;ignore&quot;/&gt;</span><br><span class="line">            &lt;property name=&quot;ignoreInlineTags&quot; value=&quot;false&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;EmptyCatchBlock&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;exceptionVariableName&quot; value=&quot;expected&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;CommentsIndentation&quot;/&gt;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        &lt;!-- No need for Javadoc --&gt;</span><br><span class="line">        &lt;module name=&quot;JavadocType&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;severity&quot; value=&quot;ignore&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">        &lt;module name=&quot;JavadocVariable&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;severity&quot; value=&quot;ignore&quot;/&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;/module&gt;</span><br><span class="line">&lt;/module&gt;</span><br></pre></td></tr></table></figure>

<p>findbugs 插件配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;FindBugsFilter&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_LOCAL_SELF_COMPARISON&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UG_SYNC_SET_UNSYNC_GET&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IC_SUPERCLASS_USES_SUBCLASS_DURING_INITIALIZATION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_FIELD_NAMING_CONVENTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_IMPOSSIBLE_DOWNCAST&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_NEGATING_RESULT_OF_COMPARETO&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_FIELD_SELF_COMPUTATION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_CHECK_FOR_OPERAND_NOT_COMPATIBLE_WITH_THIS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TQ_MAYBE_SOURCE_VALUE_REACHES_NEVER_SINK&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NO_NOTIFY_NOT_NOTIFYALL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BX_UNBOXING_IMMEDIATELY_REBOXED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_BAD_ARGUMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SF_DEAD_STORE_DUE_TO_SWITCH_FALLTHROUGH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;LI_LAZY_INIT_UPDATE_STATIC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_THREAD_PASSED_WHERE_RUNNABLE_EXPECTED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_NONLONG_SERIALVERSIONID&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_UNCONFIRMED_CAST_OF_RETURN_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ODR_OPEN_DATABASE_RESOURCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RC_REF_COMPARISON_BAD_PRACTICE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VO_VOLATILE_REFERENCE_TO_ARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ITA_INEFFICIENT_TO_ARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_NUMBER_CTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;XSS_REQUEST_PARAMETER_TO_JSP_WRITER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SIC_INNER_SHOULD_BE_STATIC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IJU_TEARDOWN_NO_SUPER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_BAD_EQUAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_BOXED_PRIMITIVE_TOSTRING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IJU_SUITE_NOT_STATIC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IM_MULTIPLYING_RESULT_OF_IREM&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IL_CONTAINER_ADDED_TO_ITSELF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ES_COMPARING_PARAMETER_STRING_WITH_EQ&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_BAD_CONVERSION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SR_NOT_CHECKED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DB_DUPLICATE_SWITCH_CLAUSES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_PARAM_DEREF_NONVIRTUAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IP_PARAMETER_IS_DEAD_BUT_OVERWRITTEN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_RETURN_VALUE_IGNORED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_EXCEPTION_NOT_THROWN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DP_CREATE_CLASSLOADER_INSIDE_DO_PRIVILEGED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_SHOULD_BE_REFACTORED_TO_BE_FINAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;CO_SELF_NO_OBJECT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_MUTABLE_ARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_CONVERT_CASE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;INT_VACUOUS_COMPARISON&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UW_UNCOND_WAIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_FINAL_PKGPROTECT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VO_VOLATILE_INCREMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;PZ_DONT_REUSE_ENTRY_OBJECTS_IN_ITERATORS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DLS_DEAD_LOCAL_STORE_SHADOWS_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;CO_COMPARETO_RESULTS_MIN_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_BOOLEAN_RETURN_NULL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DL_SYNCHRONIZATION_ON_UNSHARED_BOXED_PRIMITIVE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TQ_MAYBE_SOURCE_VALUE_REACHES_ALWAYS_SINK&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_RANDOM_USED_ONLY_ONCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BX_BOXING_IMMEDIATELY_UNBOXED_TO_PERFORM_COERCION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BIT_SIGNED_CHECK_HIGH_BIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DE_MIGHT_DROP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DL_SYNCHRONIZATION_ON_BOXED_PRIMITIVE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_DONT_JUST_NULL_CHECK_READLINE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_CHECK_FOR_POSITIVE_INDEXOF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_USELESS_SUBSTRING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;URF_UNREAD_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_INSTANCEOF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_MONITOR_WAIT_ON_CONDITION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TQ_EXPLICIT_UNKNOWN_SOURCE_VALUE_REACHES_NEVER_SINK&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_PKGPROTECT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_CHECK_COMPARETO_FOR_SPECIFIC_RETURN_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ICAST_INT_2_LONG_AS_INSTANT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_LOAD_OF_KNOWN_NULL_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_OVERRIDING_EQUALS_NOT_SYMMETRIC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SWL_SLEEP_WITH_LOCK_HELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EC_UNRELATED_INTERFACES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_FP_NUMBER_CTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FI_PUBLIC_SHOULD_BE_PROTECTED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;STI_INTERRUPTED_ON_CURRENTTHREAD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_COMPARATOR_SHOULD_BE_SERIALIZABLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_BAD_MONTH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BIT_SIGNED_CHECK&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DE_MIGHT_IGNORE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IJU_SETUP_NO_SUPER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FI_MISSING_SUPER_CALL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SQL_BAD_PREPARED_STATEMENT_ACCESS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NONNULL_PARAM_VIOLATION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_UNUSUAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FI_EMPTY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_CLOSING_NULL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NN_NAKED_NOTIFY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_TRANSIENT_FIELD_OF_NONSERIALIZABLE_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UWF_NULL_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;OS_OPEN_STREAM&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;HE_USE_OF_UNHASHABLE_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_SAME_SIMPLE_NAME_AS_SUPERCLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;J2EE_STORE_OF_NON_SERIALIZABLE_OBJECT_INTO_SESSION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TQ_EXPLICIT_UNKNOWN_SOURCE_VALUE_REACHES_ALWAYS_SINK&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RCN_REDUNDANT_COMPARISON_TWO_NULL_VALUES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;INT_BAD_COMPARISON_WITH_INT_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SIC_INNER_SHOULD_BE_STATIC_ANON&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;JCIP_FIELD_ISNT_FINAL_IN_IMMUTABLE_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_CLASS_NOT_EXCEPTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_METHOD_MUST_BE_PRIVATE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;QBA_QUESTIONABLE_BOOLEAN_ASSIGNMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EC_ARRAY_AND_NONARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_IMPOSSIBLE_INSTANCEOF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SS_SHOULD_BE_STATIC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BIT_IOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_NONFINAL_SERIALVERSIONID&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_TRANSIENT_FIELD_NOT_RESTORED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_EXTRA_ARGUMENTS_PASSED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_ALWAYS_FALSE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EI_EXPOSE_REP2&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_REM_OF_RANDOM_INT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;INT_VACUOUS_BIT_OPERATION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_BOXED_PRIMITIVE_FOR_PARSING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IL_INFINITE_LOOP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_PARAM_DEREF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;AM_CREATES_EMPTY_JAR_FILE_ENTRY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_COMPARING_CLASS_NAMES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_RETURN_VALUE_IGNORED_INFERRED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_ALWAYS_NULL_EXCEPTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DB_DUPLICATE_BRANCHES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IMSE_DONT_CATCH_IMSE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;XSS_REQUEST_PARAMETER_TO_SERVLET_WRITER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_STRING_CTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_NO_SERIALVERSIONID&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_BAD_FIELD_STORE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EC_UNRELATED_TYPES_USING_POINTER_EQUALITY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_NO_SUITABLE_CONSTRUCTOR_FOR_EXTERNALIZATION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_HARDCODED_ABSOLUTE_FILENAME&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UUF_UNUSED_PUBLIC_OR_PROTECTED_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SQL_BAD_RESULTSET_ACCESS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IJU_ASSERT_METHOD_INVOKED_FROM_RUN_METHOD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BX_BOXING_IMMEDIATELY_UNBOXED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_BAD_CONVERSION_FROM_ARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SI_INSTANCE_BEFORE_FINALS_ASSIGNED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UI_INHERITANCE_UNSAFE_GETRESOURCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_SYNC_AND_NULL_CHECK_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RpC_REPEATED_CONDITIONAL_TEST&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DLS_DEAD_LOCAL_STORE_IN_RETURN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EC_UNRELATED_CLASS_AND_INTERFACE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RE_CANT_USE_FILE_SEPARATOR_AS_REGULAR_EXPRESSION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;HE_INHERITS_EQUALS_USE_HASHCODE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_DEREFERENCE_OF_READLINE_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;WA_NOT_IN_LOOP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_IMPOSSIBLE_CAST&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;OS_OPEN_STREAM_EXCEPTION_PATH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ICAST_QUESTIONABLE_UNSIGNED_RIGHT_SHIFT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_ON_SOME_PATH_EXCEPTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_ANNOTATION_IS_NOT_VISIBLE_TO_REFLECTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IC_INIT_CIRCULARITY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UM_UNNECESSARY_MATH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;STCAL_STATIC_CALENDAR_INSTANCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_ALWAYS_NULL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_GUARANTEED_DEREF_ON_EXCEPTION_PATH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UUF_UNUSED_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_DOESNT_OVERRIDE_EQUALS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;INT_BAD_COMPARISON_WITH_SIGNED_BYTE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_CLONE_COULD_RETURN_NULL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IS_FIELD_NOT_GUARDED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_LCASE_TOSTRING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_WRONG_PACKAGE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UCF_USELESS_CONTROL_FLOW&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_USELESS_THREAD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;JML_JSR166_CALLING_WAIT_RATHER_THAN_AWAIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_USING_REMOVEALL_TO_CLEAR_COLLECTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SQL_PREPARED_STATEMENT_GENERATED_FROM_NONCONSTANT_STRING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_EQUALS_SHOULD_HANDLE_NULL_ARGUMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ICAST_BAD_SHIFT_AMOUNT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ICAST_IDIV_CAST_TO_DOUBLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FI_NULLIFY_SUPER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_MUTABLE_HASHTABLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_READ_RESOLVE_MUST_RETURN_OBJECT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SIO_SUPERFLUOUS_INSTANCEOF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BOA_BADLY_OVERRIDDEN_ADAPTER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IM_AVERAGE_COMPUTATION_COULD_OVERFLOW&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_NEW_FOR_GETCLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_CONFUSING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;WMI_WRONG_MAP_ITERATOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_UNWRITTEN_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_BAD_FIELD_INNER_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_RETURN_VALUE_IGNORED_BAD_PRACTICE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UCF_USELESS_CONTROL_FLOW_NEXT_LINE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_GUARANTEED_DEREF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EI_EXPOSE_STATIC_REP2&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_FUTURE_KEYWORD_USED_AS_MEMBER_IDENTIFIER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;WA_AWAIT_NOT_IN_LOOP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TQ_COMPARING_VALUES_WITH_INCOMPATIBLE_TYPE_QUALIFIERS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RC_REF_COMPARISON&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SC_START_IN_CTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MF_CLASS_MASKS_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;PS_PUBLIC_SEMAPHORES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_INVOKING_HASHCODE_ON_ARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SKIPPED_CLASS_TOO_BIG&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UR_UNINIT_READ_CALLED_FROM_SUPER_CONSTRUCTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;HSC_HUGE_SHARED_STRING_CONSTANT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_LOCAL_SELF_COMPUTATION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_ILLEGAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_NO_SUITABLE_CONSTRUCTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MWN_MISMATCHED_NOTIFY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_PARAM_DEREF_ALL_TARGETS_DANGEROUS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;STCAL_INVOKE_ON_STATIC_DATE_FORMAT_INSTANCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_READ_RESOLVE_IS_STATIC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_LOCAL_DOUBLE_ASSIGNMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DP_DO_INSIDE_DO_PRIVILEGED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_RETURN_VALUE_IGNORED2&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RI_REDUNDANT_INTERFACES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MTIA_SUSPECT_SERVLET_INSTANCE_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FI_FINALIZER_ONLY_NULLS_FIELDS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IO_APPENDING_TO_OBJECT_OUTPUT_STREAM&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_NO_PREVIOUS_ARGUMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_VERY_CONFUSING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_RUN_FINALIZERS_ON_EXIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;STCAL_STATIC_SIMPLE_DATE_FORMAT_INSTANCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FE_TEST_IF_EQUAL_TO_NOT_A_NUMBER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FI_FINALIZER_NULLS_FIELDS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_UNSUPPORTED_METHOD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_CONSTANT_DB_PASSWORD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TLW_TWO_LOCK_WAIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_ARGUMENTS_WRONG_ORDER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_01_TO_INT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IA_AMBIGUOUS_INVOCATION_OF_INHERITED_OR_OUTER_METHOD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_COLLECTION_OF_URLS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BIT_AND_ZZ&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_STRING_VOID_CTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UL_UNRELEASED_LOCK&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;HRS_REQUEST_PARAMETER_TO_HTTP_HEADER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;CN_IMPLEMENTS_CLONE_BUT_NOT_CLONEABLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SIC_THREADLOCAL_DEADLY_EMBRACE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MF_METHOD_MASKS_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DL_SYNCHRONIZATION_ON_SHARED_CONSTANT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;INT_BAD_REM_BY_1&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_WRONG_PACKAGE_INTENTIONAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ES_COMPARING_STRINGS_WITH_EQ&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_FIELD_SELF_COMPARISON&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_BAD_CONVERSION_TO_BOOLEAN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;QF_QUESTIONABLE_FOR_LOOP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;XFB_XML_FACTORY_BYPASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;CI_CONFUSED_INHERITANCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_INNER_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UWF_UNWRITTEN_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_EQUALS_METHOD_SHOULD_WORK_FOR_ALL_OBJECTS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DLS_DEAD_STORE_OF_CLASS_LITERAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;WS_WRITEOBJECT_SYNC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FI_USELESS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ML_SYNC_ON_FIELD_TO_GUARD_CHANGING_THAT_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_METHOD_CONSTRUCTOR_CONFUSION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MWN_MISMATCHED_WAIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_NEXTINT_VIA_NEXTDOUBLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FL_MATH_USING_FLOAT_PRECISION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ML_SYNC_ON_UPDATED_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_EXPECTED_MESSAGE_FORMAT_SUPPLIED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;AT_OPERATION_SEQUENCE_ON_CONCURRENT_ABSTRACTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_NONSERIALIZABLE_OBJECT_WRITTEN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MTIA_SUSPECT_STRUTS_INSTANCE_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_OTHER_USE_OBJECT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RCN_REDUNDANT_COMPARISON_OF_NULL_AND_NONNULL_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_USES_NEWLINE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DLS_DEAD_LOCAL_STORE_OF_NULL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_BLOCKING_METHODS_ON_URL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_ON_SOME_PATH_MIGHT_BE_INFEASIBLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_CANNOT_BE_FINAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IM_BAD_CHECK_FOR_ODD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_INVOKING_TOSTRING_ON_ANONYMOUS_ARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_STORE_INTO_NONNULL_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;PT_ABSOLUTE_PATH_TRAVERSAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SP_SPIN_ON_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_VERY_CONFUSING_INTENTIONAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ICAST_INT_CAST_TO_DOUBLE_PASSED_TO_CEIL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IS2_INCONSISTENT_SYNC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ODR_OPEN_DATABASE_RESOURCE_EXCEPTION_PATH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;XSS_REQUEST_PARAMETER_TO_SEND_ERROR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_SCHEDULED_THREAD_POOL_EXECUTOR_WITH_ZERO_CORE_THREADS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;CN_IDIOM&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;GC_UNCHECKED_TYPE_IN_GENERIC_CALL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_PRIVATE_READ_RESOLVE_NOT_INHERITED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_INVOKING_TOSTRING_ON_ARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SW_SWING_METHODS_INVOKED_IN_SWING_THREAD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DL_SYNCHRONIZATION_ON_BOOLEAN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SF_DEAD_STORE_DUE_TO_SWITCH_FALLTHROUGH_TO_THROW&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_ARGUMENT_MIGHT_BE_NULL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_DEFAULT_ENCODING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;CO_ABSTRACT_SELF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_RETURN_VALUE_OF_PUTIFABSENT_IGNORED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DC_DOUBLECHECK&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UL_UNRELEASED_LOCK_EXCEPTION_PATH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_BAD_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_LOCAL_SELF_ASSIGNMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;REC_CATCH_EXCEPTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TQ_NEVER_VALUE_USED_WHERE_ALWAYS_REQUIRED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_VACUOUS_SELF_COLLECTION_CALL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UR_UNINIT_READ&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_FUTILE_ATTEMPT_TO_CHANGE_MAXPOOL_SIZE_OF_SCHEDULED_THREAD_POOL_EXECUTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BIT_AND&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RR_NOT_CHECKED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_COLLECTIONS_SHOULD_NOT_CONTAIN_THEMSELVES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_TOSTRING_COULD_RETURN_NULL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;GC_UNRELATED_TYPES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;OBL_UNSATISFIED_OBLIGATION_EXCEPTION_EDGE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EC_NULL_ARG&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;HE_SIGNATURE_DECLARES_HASHING_OF_UNHASHABLE_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NONNULL_RETURN_VIOLATION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IL_INFINITE_RECURSIVE_LOOP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_STRING_TOSTRING&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_PRIMITIVE_ARRAY_PASSED_TO_OBJECT_VARARG&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;AM_CREATES_EMPTY_ZIP_FILE_ENTRY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NS_NON_SHORT_CIRCUIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DLS_DEAD_LOCAL_STORE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DM_BOOLEAN_CTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_BAD_CAST_TO_CONCRETE_COLLECTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SIC_INNER_SHOULD_BE_STATIC_NEEDS_THIS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;LI_LAZY_INIT_STATIC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_ABSOLUTE_VALUE_OF_RANDOM_INT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;FE_FLOATING_POINT_EQUALITY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_FUTURE_KEYWORD_USED_AS_IDENTIFIER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ICAST_INTEGER_MULTIPLY_CAST_TO_LONG&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;STI_INTERRUPTED_ON_UNKNOWNTHREAD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NM_SAME_SIMPLE_NAME_AS_INTERFACE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_DOH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_FIELD_SELF_ASSIGNMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_EMPTY_DB_PASSWORD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IJU_BAD_SUITE_METHOD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_MISSING_ARGUMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;WL_USING_GETCLASS_RATHER_THAN_CLASS_LITERAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BIT_ADD_OF_SIGNED_BYTE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;TQ_ALWAYS_VALUE_USED_WHERE_NEVER_REQUIRED&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RE_BAD_SYNTAX_FOR_REGULAR_EXPRESSION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_PARAMETER_MUST_BE_NONNULL_BUT_MARKED_AS_NULLABLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_ALWAYS_TRUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;STCAL_INVOKE_ON_STATIC_CALENDAR_INSTANCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_BAD_CAST_TO_ABSTRACT_COLLECTION&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ISC_INSTANTIATE_STATIC_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IT_NO_SUCH_ELEMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_BIGDECIMAL_CONSTRUCTED_FROM_DOUBLE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;INT_BAD_COMPARISON_WITH_NONNEGATIVE_VALUE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EI_EXPOSE_REP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;JLM_JSR166_LOCK_MONITORENTER&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BIT_IOR_OF_SIGNED_BYTE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MSF_MUTABLE_SERVLET_FIELD&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IS_INCONSISTENT_SYNC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_REM_OF_HASHCODE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;LG_LOST_LOGGER_DUE_TO_WEAK_REFERENCE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_ENTRY_SETS_MAY_REUSE_ENTRY_OBJECTS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ICAST_INT_CAST_TO_FLOAT_PASSED_TO_ROUND&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SE_NONSTATIC_SERIALVERSIONID&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_VACUOUS_INSTANCEOF&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RV_ABSOLUTE_VALUE_OF_HASHCODE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RC_REF_COMPARISON_BAD_PRACTICE_BOOLEAN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_CALLING_NEXT_FROM_HASNEXT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_NULL_ON_SOME_PATH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RS_READOBJECT_SYNC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_IMPOSSIBLE_DOWNCAST_OF_TOARRAY&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NS_DANGEROUS_NON_SHORT_CIRCUIT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BC_UNCONFIRMED_CAST&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;SA_FIELD_DOUBLE_ASSIGNMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EQ_GETCLASS_AND_CLASS_CONSTANT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;VA_FORMAT_STRING_ARG_MISMATCH&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_OOI_PKGPROTECT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;EC_UNRELATED_TYPES&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;MS_EXPOSE_REP&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;BX_UNBOXED_AND_COERCED_FOR_TERNARY_OPERATOR&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DMI_LONG_BITS_TO_DOUBLE_INVOKED_ON_INT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;HRS_REQUEST_PARAMETER_TO_COOKIE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;ESync_EMPTY_SYNC&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;NP_IMMEDIATE_DEREFERENCE_OF_READLINE&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;IJU_NO_TESTS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;UMAC_UNCALLABLE_METHOD_OF_ANONYMOUS_CLASS&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;RE_POSSIBLE_UNINTENDED_PATTERN&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;DLS_OVERWRITTEN_INCREMENT&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">    &lt;Match&gt;</span><br><span class="line">        &lt;Bug pattern=&quot;PT_RELATIVE_PATH_TRAVERSAL&quot;/&gt;</span><br><span class="line">    &lt;/Match&gt;</span><br><span class="line">&lt;/FindBugsFilter&gt;</span><br></pre></td></tr></table></figure>

<p>codestype规范</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br></pre></td><td class="code"><pre><span class="line">&lt;code_scheme name=&quot;xxx Style&quot;&gt;</span><br><span class="line">  &lt;option name=&quot;CLASS_COUNT_TO_USE_IMPORT_ON_DEMAND&quot; value=&quot;99&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;NAMES_COUNT_TO_USE_IMPORT_ON_DEMAND&quot; value=&quot;99&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;IMPORT_LAYOUT_TABLE&quot;&gt;</span><br><span class="line">    &lt;value&gt;</span><br><span class="line">      &lt;package name=&quot;com.xxx.notification&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;android&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;antenna&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;antlr&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ar&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;asposewobfuscated&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;asquare&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;atg&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;au&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;beaver&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;bibtex&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;bmsi&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;bsh&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ccl&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;cern&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ChartDirector&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;checkers&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;com&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;COM&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;common&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;contribs&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;corejava&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;cryptix&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;cybervillains&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;dalvik&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;danbikel&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;de&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;EDU&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;edu&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;eg&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;eu&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;examples&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;fat&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;fit&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;fitlibrary&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;fmpp&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;freemarker&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;gnu&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;groovy&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;groovyjarjarantlr&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;groovyjarjarasm&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;hak&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;hep&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ie&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;imageinfo&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;info&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;io&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;it&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jal&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;Jama&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;japa&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;japacheckers&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jas&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jasmin&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;javancss&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;javanet&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;javassist&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;javazoom&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;java_cup&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jcifs&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jetty&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;JFlex&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jj2000&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jline&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jp&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;JSci&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jsr166y&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;junit&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jxl&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;jxxload_help&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;kawa&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;kea&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;libcore&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;libsvm&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;lti&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ma&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;memetic&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;mt&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;mx4j&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;net&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;netscape&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;nl&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;nu&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;oauth&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ognl&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;opennlp&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;oracle&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;org&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;penn2dg&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;pennconverter&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;pl&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;prefuse&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;proguard&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;repackage&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;scm&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;se&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;serp&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;simple&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;soot&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;sqlj&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;src&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ssa&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;sun&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;sunlabs&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;tcl&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;testdata&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;testshell&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;testsuite&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;twitter4j&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;uk&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;ViolinStrings&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;weka&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;wet&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;winstone&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;woolfel&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;wowza&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;java&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;javax&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;&quot; withSubpackages=&quot;true&quot; static=&quot;false&quot; /&gt;</span><br><span class="line">      &lt;emptyLine /&gt;</span><br><span class="line">      &lt;package name=&quot;&quot; withSubpackages=&quot;true&quot; static=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/value&gt;</span><br><span class="line">  &lt;/option&gt;</span><br><span class="line">  &lt;option name=&quot;RIGHT_MARGIN&quot; value=&quot;100&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;KEEP_CONTROL_STATEMENT_IN_ONE_LINE&quot; value=&quot;false&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;KEEP_BLANK_LINES_IN_CODE&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;BLANK_LINES_AFTER_CLASS_HEADER&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_PARAMETERS_IN_CALLS&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_BINARY_OPERATION&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_ASSIGNMENT&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_TERNARY_OPERATION&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_THROWS_LIST&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_EXTENDS_LIST&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_PARENTHESIZED_EXPRESSION&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ALIGN_MULTILINE_ARRAY_INITIALIZER_EXPRESSION&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;CALL_PARAMETERS_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;METHOD_PARAMETERS_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;EXTENDS_LIST_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;THROWS_LIST_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;EXTENDS_KEYWORD_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;THROWS_KEYWORD_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;METHOD_CALL_CHAIN_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;BINARY_OPERATION_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;BINARY_OPERATION_SIGN_ON_NEXT_LINE&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;TERNARY_OPERATION_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;TERNARY_OPERATION_SIGNS_ON_NEXT_LINE&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;FOR_STATEMENT_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ARRAY_INITIALIZER_WRAP&quot; value=&quot;1&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;ASSIGNMENT_WRAP&quot; value=&quot;5&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;IF_BRACE_FORCE&quot; value=&quot;3&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;DOWHILE_BRACE_FORCE&quot; value=&quot;3&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;WHILE_BRACE_FORCE&quot; value=&quot;3&quot; /&gt;</span><br><span class="line">  &lt;option name=&quot;FOR_BRACE_FORCE&quot; value=&quot;3&quot; /&gt;</span><br><span class="line">  &lt;XML&gt;</span><br><span class="line">    &lt;option name=&quot;XML_LEGACY_SETTINGS_IMPORTED&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">  &lt;/XML&gt;</span><br><span class="line">  &lt;ADDITIONAL_INDENT_OPTIONS fileType=&quot;haml&quot;&gt;</span><br><span class="line">    &lt;option name=&quot;INDENT_SIZE&quot; value=&quot;2&quot; /&gt;</span><br><span class="line">  &lt;/ADDITIONAL_INDENT_OPTIONS&gt;</span><br><span class="line">  &lt;ADDITIONAL_INDENT_OPTIONS fileType=&quot;java&quot;&gt;</span><br><span class="line">    &lt;option name=&quot;INDENT_SIZE&quot; value=&quot;2&quot; /&gt;</span><br><span class="line">    &lt;option name=&quot;CONTINUATION_INDENT_SIZE&quot; value=&quot;4&quot; /&gt;</span><br><span class="line">    &lt;option name=&quot;TAB_SIZE&quot; value=&quot;8&quot; /&gt;</span><br><span class="line">  &lt;/ADDITIONAL_INDENT_OPTIONS&gt;</span><br><span class="line">  &lt;ADDITIONAL_INDENT_OPTIONS fileType=&quot;js&quot;&gt;</span><br><span class="line">    &lt;option name=&quot;CONTINUATION_INDENT_SIZE&quot; value=&quot;4&quot; /&gt;</span><br><span class="line">  &lt;/ADDITIONAL_INDENT_OPTIONS&gt;</span><br><span class="line">  &lt;ADDITIONAL_INDENT_OPTIONS fileType=&quot;sass&quot;&gt;</span><br><span class="line">    &lt;option name=&quot;INDENT_SIZE&quot; value=&quot;2&quot; /&gt;</span><br><span class="line">  &lt;/ADDITIONAL_INDENT_OPTIONS&gt;</span><br><span class="line">  &lt;ADDITIONAL_INDENT_OPTIONS fileType=&quot;yml&quot;&gt;</span><br><span class="line">    &lt;option name=&quot;INDENT_SIZE&quot; value=&quot;2&quot; /&gt;</span><br><span class="line">  &lt;/ADDITIONAL_INDENT_OPTIONS&gt;</span><br><span class="line">&lt;/code_scheme&gt;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/27/code-format/" data-id="cluj9jc9x000f3j1mejmtats1" data-title="架构设计-代码规范" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-build-high-available-k8s" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/27/build-high-available-k8s/" class="article-date">
  <time class="dt-published" datetime="2023-05-27T14:41:17.000Z" itemprop="datePublished">2023-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/articture/">articture</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/27/build-high-available-k8s/">搭建高可用k8s集群</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="一-机器规划"><a href="#一-机器规划" class="headerlink" title="一,机器规划"></a>一,机器规划</h3><table>
<thead>
<tr>
<th>角色</th>
<th>ip</th>
<th>组件</th>
</tr>
</thead>
<tbody><tr>
<td>k8s-master</td>
<td>192.168.254.3</td>
<td>kube-apiserver，kube-controller-manager，kube-scheduler，etcd</td>
</tr>
<tr>
<td>k8s-node1</td>
<td>192.168.254.4</td>
<td>kubelet，kube-proxy，docker  etcd</td>
</tr>
<tr>
<td>k8s-node2</td>
<td>192.168.254.5</td>
<td>kubelet，kube-proxy，docker，etcd</td>
</tr>
</tbody></table>
<h3 id="二-操作系统初始化"><a href="#二-操作系统初始化" class="headerlink" title="二,操作系统初始化"></a>二,操作系统初始化</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关闭 防火墙</span></span><br><span class="line">systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关闭 swap</span></span><br><span class="line">sed -i &#x27;s/.*swap.*/#&amp;/&#x27; /etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭  SELINUX</span></span><br><span class="line">sed -i &quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/sysconfig/selinux</span><br><span class="line">sed -i &quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config</span><br><span class="line">sed -i &quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot; /etc/sysconfig/selinux</span><br><span class="line">sed -i &quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot; /etc/selinux/config</span><br><span class="line"></span><br><span class="line">timedatectl set-timezone Asia/Shanghai &amp;&amp; timedatectl set-local-rtc 0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">时间同步</span></span><br><span class="line">yum install ntpdate -y &amp;&amp; ntpdate time.windows.com</span><br><span class="line"></span><br><span class="line">echo &quot;* soft nofile 65536&quot; &gt;&gt; /etc/security/limits.conf</span><br><span class="line">echo &quot;* hard nofile 65536&quot; &gt;&gt; /etc/security/limits.conf</span><br><span class="line">echo &quot;* soft nproc 65536&quot; &gt;&gt; /etc/security/limits.conf</span><br><span class="line">echo &quot;* hard nproc 65536&quot; &gt;&gt; /etc/security/limits.conf</span><br><span class="line">echo &quot;* soft memlock unlimited&quot; &gt;&gt; /etc/security/limits.conf</span><br><span class="line">echo &quot;* hard memlock unlimited&quot; &gt;&gt; /etc/security/limits.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置 ipvs</span></span><br><span class="line">modprobe -- ip_vs &amp;&amp; modprobe -- ip_vs_rr &amp;&amp; modprobe -- ip_vs_wrr &amp;&amp; modprobe -- ip_vs_sh &amp;&amp; modprobe -- nf_conntrack_ipv4</span><br><span class="line">yum install -y ipvsadm</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>hostnamectl set-hostname  192.168.254.3</p>
<p>hostnamectl set-hostname  192.168.254.4</p>
<p>hostnamectl set-hostname  192.168.254.5</p>
<h2 id="二，生成https证书"><a href="#二，生成https证书" class="headerlink" title="二，生成https证书"></a>二，生成https证书</h2><p>cfssl是一个开源的证书管理工具，使用json文件生成证书，相比openssl更方便使用。</p>
<p>找任意一台服务器操作，这里用Master节点。</p>
<p>cp cfssl_linux-amd64 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;cfssl &amp;&amp; cp cfssljson_linux-amd64 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;cfssljson &amp;&amp; cp cfssl-certinfo_linux-amd64 &#x2F;usr&#x2F;bin&#x2F;cfssl-certinfo</p>
<p>如下是生成的详细过程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"> cat &gt; ca-config.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;signing&quot;: &#123;</span><br><span class="line">    &quot;default&quot;: &#123;</span><br><span class="line">      &quot;expiry&quot;: &quot;87600h&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;profiles&quot;: &#123;</span><br><span class="line">      &quot;kubernetes&quot;: &#123;</span><br><span class="line">         &quot;expiry&quot;: &quot;87600h&quot;,</span><br><span class="line">         &quot;usages&quot;: [</span><br><span class="line">            &quot;signing&quot;,</span><br><span class="line">            &quot;key encipherment&quot;,</span><br><span class="line">            &quot;server auth&quot;,</span><br><span class="line">            &quot;client auth&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &gt; ca-csr.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;kubernetes&quot;,</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;Beijing&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;Beijing&quot;,</span><br><span class="line">              &quot;O&quot;: &quot;k8s&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cfssl gencert -initca ca-csr.json | cfssljson -bare ca -</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat &gt; server-csr.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;kubernetes&quot;,</span><br><span class="line">    &quot;hosts&quot;: [</span><br><span class="line">      &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;192.168.254.3&quot;,</span><br><span class="line">      &quot;192.168.254.4&quot;,</span><br><span class="line">      &quot;192.168.254.5&quot;,</span><br><span class="line">      &quot;10.10.0.1&quot;,</span><br><span class="line">      &quot;kubernetes&quot;,</span><br><span class="line">      &quot;kubernetes.default&quot;,</span><br><span class="line">      &quot;kubernetes.default.svc&quot;,</span><br><span class="line">      &quot;kubernetes.default.svc.cluster&quot;,</span><br><span class="line">      &quot;kubernetes.default.svc.cluster.local&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;k8s&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes server-csr.json | cfssljson -bare server</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat &gt; admin-csr.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;CN&quot;: &quot;admin&quot;,</span><br><span class="line">  &quot;hosts&quot;: [],</span><br><span class="line">  &quot;key&quot;: &#123;</span><br><span class="line">    &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">    &quot;size&quot;: 2048</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;names&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">      &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;O&quot;: &quot;system:masters&quot;,</span><br><span class="line">      &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="三、部署Etcd集群"><a href="#三、部署Etcd集群" class="headerlink" title="三、部署Etcd集群"></a>三、部署Etcd集群</h3><p>创建 hosts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; /etc/hosts &lt;&lt; EOF</span><br><span class="line">192.168.254.3 etcd01 etcd01.k8s.com</span><br><span class="line">192.168.254.4 etcd02 etcd02.k8s.com</span><br><span class="line">192.168.254.5 etcd03 etcd03.k8s.com</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h4 id="创建etcd配置文件"><a href="#创建etcd配置文件" class="headerlink" title="创建etcd配置文件"></a>创建etcd配置文件</h4><p>192.168.254.3</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /opt/kubernetes/cfg/etcd.conf &lt;&lt; EOF</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">[Member]</span></span><br><span class="line">ETCD_NAME=&quot;etcd-1&quot;</span><br><span class="line">ETCD_DATA_DIR=&quot;/var/lib/etcd/default.etcd&quot;</span><br><span class="line">ETCD_LISTEN_PEER_URLS=&quot;https://192.168.254.3:2380&quot;</span><br><span class="line">ETCD_LISTEN_CLIENT_URLS=&quot;https://192.168.254.3:2379&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">[Clustering]</span></span><br><span class="line">ETCD_INITIAL_ADVERTISE_PEER_URLS=&quot;https://192.168.254.3:2380&quot;</span><br><span class="line">ETCD_ADVERTISE_CLIENT_URLS=&quot;https://192.168.254.3:2379&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER=&quot;etcd-1=https://192.168.254.3:2380,etcd-2=https://192.168.254.4:2380,etcd-3=https://192.168.254.5:2380&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_TOKEN=&quot;etcd-cluster&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_STATE=&quot;new&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>



<p>192.168.254.4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /opt/kubernetes/cfg/etcd.conf &lt;&lt; EOF</span><br><span class="line">#[Member]</span><br><span class="line">ETCD_NAME=&quot;etcd-2&quot;</span><br><span class="line">ETCD_DATA_DIR=&quot;/var/lib/etcd/default.etcd&quot;</span><br><span class="line">ETCD_LISTEN_PEER_URLS=&quot;https://192.168.254.4:2380&quot;</span><br><span class="line">ETCD_LISTEN_CLIENT_URLS=&quot;https://192.168.254.4:2379&quot;</span><br><span class="line">#[Clustering]</span><br><span class="line">ETCD_INITIAL_ADVERTISE_PEER_URLS=&quot;https://192.168.254.4:2380&quot;</span><br><span class="line">ETCD_ADVERTISE_CLIENT_URLS=&quot;https://192.168.254.4:2379&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER=&quot;etcd-1=https://192.168.254.3:2380,etcd-2=https://192.168.254.4:2380,etcd-3=https://192.168.254.5:2380&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_TOKEN=&quot;etcd-cluster&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_STATE=&quot;new&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>192.168.254.5</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /opt/kubernetes/cfg/etcd.conf &lt;&lt; EOF</span><br><span class="line">#[Member]</span><br><span class="line">ETCD_NAME=&quot;etcd-3&quot;</span><br><span class="line">ETCD_DATA_DIR=&quot;/var/lib/etcd/default.etcd&quot;</span><br><span class="line">ETCD_LISTEN_PEER_URLS=&quot;https://192.168.254.5:2380&quot;</span><br><span class="line">ETCD_LISTEN_CLIENT_URLS=&quot;https://192.168.254.5:2379&quot;</span><br><span class="line">#[Clustering]</span><br><span class="line">ETCD_INITIAL_ADVERTISE_PEER_URLS=&quot;https://192.168.254.5:2380&quot;</span><br><span class="line">ETCD_ADVERTISE_CLIENT_URLS=&quot;https://192.168.254.5:2379&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER=&quot;etcd-1=https://192.168.254.3:2380,etcd-2=https://192.168.254.4:2380,etcd-3=https://192.168.254.5:2380&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_TOKEN=&quot;etcd-cluster&quot;</span><br><span class="line">ETCD_INITIAL_CLUSTER_STATE=&quot;new&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>



<ul>
<li>ETCD_NAME：节点名称，集群中唯一</li>
<li>ETCD_DATA_DIR：数据目录</li>
<li>ETCD_LISTEN_PEER_URLS：集群通信监听地址</li>
<li>ETCD_LISTEN_CLIENT_URLS：客户端访问监听地址</li>
<li>ETCD_INITIAL_ADVERTISE_PEER_URLS：集群通告地址</li>
<li>ETCD_ADVERTISE_CLIENT_URLS：客户端通告地址</li>
<li>ETCD_INITIAL_CLUSTER：集群节点地址</li>
<li>ETCD_INITIAL_CLUSTER_TOKEN：集群Token</li>
<li>ETCD_INITIAL_CLUSTER_STATE：加入集群的当前状态，new是新集群，existing表示加入已有集群</li>
</ul>
<p>将master文件全部拷贝到node节点…</p>
<p>ssh-keygen -t rsa -P “”</p>
<p> scp <del>&#x2F;.ssh&#x2F;id_rsa.pub <a href="mailto:&#x72;&#x6f;&#111;&#116;&#x40;&#49;&#x39;&#50;&#46;&#49;&#x36;&#x38;&#x2e;&#50;&#x35;&#x34;&#x2e;&#x34;">&#x72;&#x6f;&#111;&#116;&#x40;&#49;&#x39;&#50;&#46;&#49;&#x36;&#x38;&#x2e;&#50;&#x35;&#x34;&#x2e;&#x34;</a>:</del>&#x2F;.ssh&#x2F;</p>
<p> scp &#x2F;opt&#x2F;kubernetes&#x2F; <a href="mailto:&#114;&#111;&#x6f;&#116;&#64;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#46;&#x32;&#53;&#52;&#46;&#52;">&#114;&#111;&#x6f;&#116;&#64;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#46;&#x32;&#53;&#52;&#46;&#52;</a>:&#x2F;opt&#x2F;kubernetes&#x2F;</p>
<p> scp &#x2F;opt&#x2F;kubernetes&#x2F; <a href="mailto:&#x72;&#111;&#x6f;&#x74;&#64;&#x31;&#57;&#50;&#46;&#49;&#54;&#x38;&#46;&#50;&#53;&#x34;&#46;&#53;">&#x72;&#111;&#x6f;&#x74;&#64;&#x31;&#57;&#50;&#46;&#49;&#54;&#x38;&#46;&#50;&#53;&#x34;&#46;&#53;</a>:&#x2F;opt&#x2F;kubernetes&#x2F;</p>
<h4 id="systemd管理etcd"><a href="#systemd管理etcd" class="headerlink" title="systemd管理etcd"></a>systemd管理etcd</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /usr/lib/systemd/system/etcd.service &lt;&lt; EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=Etcd Server</span><br><span class="line">After=network.target</span><br><span class="line">After=network-online.target</span><br><span class="line">Wants=network-online.target</span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line">EnvironmentFile=/opt/kubernetes/cfg/etcd.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下面这句必须添加</span></span><br><span class="line">ExecStart=</span><br><span class="line">ExecStart=/opt/kubernetes/bin/etcd \</span><br><span class="line">--cert-file=/opt/kubernetes/ssl/server.pem \</span><br><span class="line">--key-file=/opt/kubernetes/ssl/server-key.pem \</span><br><span class="line">--peer-cert-file=/opt/kubernetes/ssl/server.pem \</span><br><span class="line">--peer-key-file=/opt/kubernetes/ssl/server-key.pem \</span><br><span class="line">--trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--peer-trusted-ca-file=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">--logger=zap</span><br><span class="line">Restart=on-failure</span><br><span class="line">LimitNOFILE=65536</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h4 id="启动并设置开机启动"><a href="#启动并设置开机启动" class="headerlink" title="启动并设置开机启动"></a>启动并设置开机启动</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable etcd &amp;&amp; systemctl daemon-reload &amp;&amp; systemctl start etcd</span><br></pre></td></tr></table></figure>



<h4 id="校验集群是否成功。"><a href="#校验集群是否成功。" class="headerlink" title="校验集群是否成功。"></a>校验集群是否成功。</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/opt/kubernetes/bin/etcdctl --cacert=/opt/kubernetes/ssl/ca.pem --cert=/opt/kubernetes/ssl/server.pem --key=/opt/kubernetes/ssl/server-key.pem --endpoints=&quot;https://192.168.254.3:2379,https://192.168.254.4:2379,https://192.168.254.5:2379&quot; endpoint health</span><br><span class="line"></span><br><span class="line">https://192.168.254.5:2379 is healthy: successfully committed proposal: took = 38.745283ms</span><br><span class="line">https://192.168.254.4:2379 is healthy: successfully committed proposal: took = 38.257777ms</span><br><span class="line">https://192.168.254.3:2379 is healthy: successfully committed proposal: took = 39.501895ms</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="四、安装Docker"><a href="#四、安装Docker" class="headerlink" title="四、安装Docker"></a>四、安装Docker</h3><h4 id="4-1-解压二进制包"><a href="#4-1-解压二进制包" class="headerlink" title="4.1 解压二进制包"></a>4.1 解压二进制包</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf docker-19.03.9.tgz</span><br><span class="line">mv docker/* /usr/bin</span><br></pre></td></tr></table></figure>

<h4 id="4-2-systemd管理docker"><a href="#4-2-systemd管理docker" class="headerlink" title="4.2 systemd管理docker"></a>4.2 systemd管理docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /usr/lib/systemd/system/docker.service &lt;&lt; EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=Docker Application Container Engine</span><br><span class="line">Documentation=https://docs.docker.com</span><br><span class="line">After=network-online.target firewalld.service</span><br><span class="line">Wants=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line">ExecStart=/usr/bin/dockerd</span><br><span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span><br><span class="line">LimitNOFILE=infinity</span><br><span class="line">LimitNPROC=infinity</span><br><span class="line">LimitCORE=infinity</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line">Delegate=yes</span><br><span class="line">KillMode=process</span><br><span class="line">Restart=on-failure</span><br><span class="line">StartLimitBurst=3</span><br><span class="line">StartLimitInterval=60s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h4 id="4-3-创建配置文件"><a href="#4-3-创建配置文件" class="headerlink" title="4.3 创建配置文件"></a>4.3 创建配置文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/docker</span><br><span class="line">cat /etc/docker/daemon.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;exec-opts&quot;: [&quot;native.cgroupdriver=cgroupfs&quot;],</span><br><span class="line">    &quot;registry-mirrors&quot;: [</span><br><span class="line">        &quot;https://1nj0zren.mirror.aliyuncs.com&quot;,</span><br><span class="line">        &quot;https://kfwkfulq.mirror.aliyuncs.com&quot;,</span><br><span class="line">        &quot;https://2lqq34jg.mirror.aliyuncs.com&quot;,</span><br><span class="line">        &quot;https://pee6w651.mirror.aliyuncs.com&quot;,</span><br><span class="line">        &quot;http://hub-mirror.c.163.com&quot;,</span><br><span class="line">        &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">        &quot;http://f1361db2.m.daocloud.io&quot;,</span><br><span class="line">        &quot;https://registry.docker-cn.com&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h4 id="4-4-启动并设置开机启动"><a href="#4-4-启动并设置开机启动" class="headerlink" title="4.4 启动并设置开机启动"></a>4.4 启动并设置开机启动</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable docker &amp;&amp; systemctl daemon-reload &amp;&amp; systemctl restart docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看是不是cgroup</span></span><br><span class="line"></span><br><span class="line">docker info | grep &quot;Cgroup Driver&quot;</span><br></pre></td></tr></table></figure>



<h3 id="五，设置metric-server"><a href="#五，设置metric-server" class="headerlink" title="五，设置metric-server"></a>五，设置metric-server</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; metrics-server-csr.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;CN&quot;: &quot;system:metrics-server&quot;,</span><br><span class="line">  &quot;hosts&quot;: [],</span><br><span class="line">  &quot;key&quot;: &#123;</span><br><span class="line">    &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">    &quot;size&quot;: 2048</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;names&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">      &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;O&quot;: &quot;k8s&quot;,</span><br><span class="line">      &quot;OU&quot;: &quot;system&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cfssl gencert -ca=/opt/kubernetes/ssl/ca.pem -ca-key=/opt/kubernetes/ssl/ca-key.pem -config=ca-config.json -profile=kubernetes metrics-server-csr.json | cfssljson -bare metrics-server</span><br></pre></td></tr></table></figure>



<p>复制到node节点</p>
<p> scp metrics*  <a href="mailto:&#x72;&#111;&#x6f;&#116;&#x40;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#x32;&#x35;&#x34;&#x2e;&#x34;">&#x72;&#111;&#x6f;&#116;&#x40;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#x32;&#x35;&#x34;&#x2e;&#x34;</a>:&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;</p>
<p> scp metrics*  <a href="mailto:&#114;&#x6f;&#111;&#x74;&#x40;&#49;&#57;&#50;&#46;&#49;&#54;&#56;&#x2e;&#x32;&#53;&#52;&#x2e;&#53;">&#114;&#x6f;&#111;&#x74;&#x40;&#49;&#57;&#50;&#46;&#49;&#54;&#56;&#x2e;&#x32;&#53;&#52;&#x2e;&#53;</a>:&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;</p>
<h3 id="六，设置-kubectl-参数"><a href="#六，设置-kubectl-参数" class="headerlink" title="六，设置 kubectl 参数"></a>六，设置 kubectl 参数</h3><p>获取token值</p>
<p>head -c 16 &#x2F;dev&#x2F;urandom | od -An -t x | tr -d ‘ ‘</p>
<p>646f992b6f607b2dfbb1c6d4c8ee3ee9</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; token.csv &lt;&lt;EOF</span><br><span class="line">646f992b6f607b2dfbb1c6d4c8ee3ee9,kubelet-bootstrap,10001,&quot;system:kubelet-bootstrap&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 创建kubelet bootstrapping kubeconfig</span><br><span class="line">export KUBE_APISERVER=&quot;https://192.168.254.3:6443&quot;</span><br><span class="line"></span><br><span class="line"># 设置集群参数</span><br><span class="line">kubectl config set-cluster kubernetes  --certificate-authority=/opt/kubernetes/ssl/ca.pem --embed-certs=true --server=https://192.168.254.3:6443 --kubeconfig=bootstrap.kubeconfig</span><br><span class="line"></span><br><span class="line"># 设置客户端认证参数</span><br><span class="line">kubectl config set-credentials kubelet-bootstrap --token=646f992b6f607b2dfbb1c6d4c8ee3ee9 --kubeconfig=bootstrap.kubeconfig</span><br><span class="line"></span><br><span class="line"># 设置上下文参数</span><br><span class="line">kubectl config set-context default --cluster=kubernetes --user=kubelet-bootstrap --kubeconfig=bootstrap.kubeconfig</span><br><span class="line"></span><br><span class="line"># 设置默认上下文</span><br><span class="line">kubectl config use-context default --kubeconfig=bootstrap.kubeconfig</span><br><span class="line"></span><br><span class="line">#----------------------</span><br><span class="line"></span><br><span class="line"># 创建kubelet kubelet.kubeconfig </span><br><span class="line">export KUBE_APISERVER=&quot;https://192.168.254.3:6443&quot;</span><br><span class="line"></span><br><span class="line"># 设置集群参数</span><br><span class="line">kubectl config set-cluster kubernetes  --certificate-authority=/opt/kubernetes/ssl/ca.pem --embed-certs=true --server=https://192.168.254.3:6443 --kubeconfig=kubelet.kubeconfig</span><br><span class="line"></span><br><span class="line"># 设置客户端认证参数</span><br><span class="line">kubectl config set-credentials kubelet-kubeconfig --token=646f992b6f607b2dfbb1c6d4c8ee3ee9 --kubeconfig=kubelet.kubeconfig</span><br><span class="line"></span><br><span class="line"># 设置上下文参数</span><br><span class="line">kubectl config set-context default --cluster=kubernetes --user=kubelet-kubeconfig --kubeconfig=kubelet.kubeconfig</span><br><span class="line"></span><br><span class="line"># 设置默认上下文</span><br><span class="line">kubectl config use-context default --kubeconfig=kubelet.kubeconfig</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#----------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat &gt; kube-proxy-csr.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;CN&quot;: &quot;system:kube-proxy&quot;,</span><br><span class="line">  &quot;hosts&quot;: [],</span><br><span class="line">  &quot;key&quot;: &#123;</span><br><span class="line">    &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">    &quot;size&quot;: 2048</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;names&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">      &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;O&quot;: &quot;k8s&quot;,</span><br><span class="line">      &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cfssl gencert -ca=/opt/kubernetes/ssl/ca.pem -ca-key=/opt/kubernetes/ssl/ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 创建kube-proxy kubeconfig文件</span><br><span class="line">kubectl config set-cluster kubernetes \</span><br><span class="line">  --certificate-authority=/opt/kubernetes/ssl/ca.pem \</span><br><span class="line">  --embed-certs=true \</span><br><span class="line">  --server=https://192.168.254.3:6443 \</span><br><span class="line">  --kubeconfig=kube-proxy.kubeconfig</span><br><span class="line"></span><br><span class="line">kubectl config set-credentials kube-proxy \</span><br><span class="line">  --client-certificate=/opt/kubernetes/ssl/kube-proxy.pem \</span><br><span class="line">  --client-key=/opt/kubernetes/ssl/kube-proxy-key.pem \</span><br><span class="line">  --embed-certs=true \</span><br><span class="line">  --kubeconfig=kube-proxy.kubeconfig</span><br><span class="line"></span><br><span class="line">kubectl config set-context default \</span><br><span class="line">  --cluster=kubernetes \</span><br><span class="line">  --user=kube-proxy \</span><br><span class="line">  --kubeconfig=kube-proxy.kubeconfig</span><br><span class="line"></span><br><span class="line">./kubectl config use-context default --kubeconfig=kube-proxy.kubeconfig</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cp *kubeconfig /opt/kubernetes/ssl/</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="七，安装master节点"><a href="#七，安装master节点" class="headerlink" title="七，安装master节点"></a>七，安装master节点</h3><p>此master节点也会当做node节点，上面会部署pod，</p>
<p>安装组件如下：</p>
<p>kube-apiserver</p>
<p>kube-controllermanager</p>
<p>kube-scheduler</p>
<p>kube-proxy</p>
<p>kubelete</p>
<h4 id="7-1-部署kube-apiserver"><a href="#7-1-部署kube-apiserver" class="headerlink" title="7.1 部署kube-apiserver"></a>7.1 部署kube-apiserver</h4><h5 id="1-创建配置文件"><a href="#1-创建配置文件" class="headerlink" title="1. 创建配置文件"></a>1. 创建配置文件</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /opt/kubernetes/cfg/kube-apiserver.conf &lt;&lt; EOF</span><br><span class="line">KUBE_APISERVER_OPTS=&quot;--logtostderr=true \\</span><br><span class="line">--v=2 \\</span><br><span class="line">--log-dir=/opt/kubernetes/logs \\</span><br><span class="line">--etcd-servers=https://192.168.254.3:2379,https://192.168.254.4:2379,https://192.168.254.5:2379 \\</span><br><span class="line">--bind-address=192.168.254.3 \\</span><br><span class="line">--secure-port=6443 \\</span><br><span class="line">--advertise-address=192.168.254.3 \\</span><br><span class="line">--allow-privileged=true \\</span><br><span class="line">--service-cluster-ip-range=10.0.0.0/24 \\</span><br><span class="line">--enable-admission-plugins=NamespaceLifecycle,LimitRanger,ServiceAccount,ResourceQuota,NodeRestriction \\</span><br><span class="line">--authorization-mode=RBAC,Node \\</span><br><span class="line">--enable-bootstrap-token-auth=true \\</span><br><span class="line">--token-auth-file=/opt/kubernetes/cfg/token.csv \\</span><br><span class="line">--service-node-port-range=30000-32767 \\</span><br><span class="line">--kubelet-client-certificate=/opt/kubernetes/ssl/server.pem \\</span><br><span class="line">--kubelet-client-key=/opt/kubernetes/ssl/server-key.pem \\</span><br><span class="line">--tls-cert-file=/opt/kubernetes/ssl/server.pem  \\</span><br><span class="line">--tls-private-key-file=/opt/kubernetes/ssl/server-key.pem \\</span><br><span class="line">--client-ca-file=/opt/kubernetes/ssl/ca.pem \\</span><br><span class="line">--service-account-key-file=/opt/kubernetes/ssl/ca-key.pem \\</span><br><span class="line">--etcd-cafile=/opt/etcd/ssl/ca.pem \\</span><br><span class="line">--etcd-certfile=/opt/etcd/ssl/server.pem \\</span><br><span class="line">--etcd-keyfile=/opt/etcd/ssl/server-key.pem \\</span><br><span class="line">--audit-log-maxage=30 \\</span><br><span class="line">--audit-log-maxbackup=3 \\</span><br><span class="line">--audit-log-maxsize=100 \\</span><br><span class="line">--audit-log-path=/opt/kubernetes/logs/k8s-audit.log&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：上面两个\ \ 第一个是转义符，第二个是换行符，使用转义符是为了使用EOF保留换行符。</p>
</blockquote>
<ul>
<li>–logtostderr：启用日志</li>
<li>—v：日志等级</li>
<li>–log-dir：日志目录</li>
<li>–etcd-servers：etcd集群地址</li>
<li>–bind-address：监听地址</li>
<li>–secure-port：https安全端口</li>
<li>–advertise-address：集群通告地址</li>
<li>–allow-privileged：启用授权</li>
<li>–service-cluster-ip-range：Service虚拟IP地址段</li>
<li>–enable-admission-plugins：准入控制模块</li>
<li>–authorization-mode：认证授权，启用RBAC授权和节点自管理</li>
<li>–enable-bootstrap-token-auth：启用TLS bootstrap机制</li>
<li>–token-auth-file：bootstrap token文件</li>
<li>–service-node-port-range：Service nodeport类型默认分配端口范围</li>
<li>–kubelet-client-xxx：apiserver访问kubelet客户端证书</li>
<li>–tls-xxx-file：apiserver https证书</li>
<li>–etcd-xxxfile：连接Etcd集群证书</li>
<li>–audit-log-xxx：审计日志</li>
</ul>
<h5 id="4-systemd管理apiserver"><a href="#4-systemd管理apiserver" class="headerlink" title="4. systemd管理apiserver"></a>4. systemd管理apiserver</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /usr/lib/systemd/system/kube-apiserver.service &lt;&lt; EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=Kubernetes API Server</span><br><span class="line">Documentation=https://github.com/kubernetes/kubernetes</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile=-/opt/kubernetes/cfg/kube-apiserver.conf</span><br><span class="line">ExecStart=/opt/kubernetes/bin/kube-apiserver \$KUBE_APISERVER_OPTS</span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h5 id="5-启动并设置开机启动"><a href="#5-启动并设置开机启动" class="headerlink" title="5,启动并设置开机启动"></a>5,启动并设置开机启动</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable kube-apiserver &amp;&amp; systemctl daemon-reload &amp;&amp; systemctl restart kube-apiserver</span><br></pre></td></tr></table></figure>

<h5 id="6-授权kubelet-bootstrap用户允许请求证书"><a href="#6-授权kubelet-bootstrap用户允许请求证书" class="headerlink" title="6. 授权kubelet-bootstrap用户允许请求证书"></a>6. 授权kubelet-bootstrap用户允许请求证书</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding kubelet-bootstrap \</span><br><span class="line">--clusterrole=system:node-bootstrapper \</span><br><span class="line">--user=kubelet-bootstrap</span><br></pre></td></tr></table></figure>



<p>注意：</p>
<p>如果 kube-apiserver启动失败，使用如下指令</p>
<p>!&#x2F;bin&#x2F;sh</p>
<p> nohup  kube-apiserver –logtostderr&#x3D;false  –v&#x3D;2  –log-dir&#x3D;&#x2F;var&#x2F;log&#x2F;kubernetes  –etcd-servers&#x3D;<a href="https://192.168.254.3:2379,https://192.168.254.4:2379,https://192.168.254.5:2379">https://192.168.254.3:2379,https://192.168.254.4:2379,https://192.168.254.5:2379</a>  –bind-address&#x3D;0.0.0.0  –secure-port&#x3D;6443  –advertise-address&#x3D;192.168.254.3  –allow-privileged&#x3D;true  –service-cluster-ip-range&#x3D;10.10.0.0&#x2F;16  –enable-admission-plugins&#x3D;NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota,NodeRestriction  –authorization-mode&#x3D;RBAC,Node  –kubelet-https&#x3D;true  –enable-bootstrap-token-auth&#x3D;true  –token-auth-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;token.csv  –service-node-port-range&#x3D;30000-50000  –kubelet-client-certificate&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;server.pem  –kubelet-client-key&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;server-key.pem  –tls-cert-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;server.pem   –tls-private-key-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;server-key.pem  –client-ca-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;ca.pem  –service-account-key-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;ca-key.pem  –etcd-cafile&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;ca.pem  –etcd-certfile&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;server.pem  –etcd-keyfile&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;server-key.pem  –requestheader-client-ca-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;ca.pem  –requestheader-extra-headers-prefix&#x3D;X-Remote-Extra-  –requestheader-group-headers&#x3D;X-Remote-Group  –requestheader-username-headers&#x3D;X-Remote-User  –proxy-client-cert-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;metrics-server.pem  –proxy-client-key-file&#x3D;&#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;metrics-server-key.pem  –runtime-config&#x3D;api&#x2F;all&#x3D;true  –audit-log-maxage&#x3D;30  –audit-log-maxbackup&#x3D;3  –audit-log-maxsize&#x3D;100  –audit-log-truncate-enabled&#x3D;true  –audit-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;kubernetes&#x2F;k8s-audit.log  &amp; </p>
<p>查看 kube-apiserver是否启动起来</p>
<p>ps -ef | grep kube</p>
<p>或者</p>
<p>netstat -ntpl | grep kube-</p>
<h4 id="7-2-部署kube-controller-manager"><a href="#7-2-部署kube-controller-manager" class="headerlink" title="7.2 部署kube-controller-manager"></a>7.2 部署kube-controller-manager</h4><h5 id="1-创建配置文件-1"><a href="#1-创建配置文件-1" class="headerlink" title="1. 创建配置文件"></a>1. 创建配置文件</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /opt/kubernetes/cfg/kube-controller-manager.conf &lt;&lt; EOF</span><br><span class="line">KUBE_CONTROLLER_MANAGER_OPTS=&quot;--logtostderr=false \\</span><br><span class="line">--v=2 \\</span><br><span class="line">--log-dir=/opt/kubernetes/logs \\</span><br><span class="line">--leader-elect=true \\</span><br><span class="line">--master=127.0.0.1:8080 \\</span><br><span class="line">--bind-address=127.0.0.1 \\</span><br><span class="line">--allocate-node-cidrs=true \\</span><br><span class="line">--cluster-cidr=10.244.0.0/16 \\</span><br><span class="line">--service-cluster-ip-range=10.0.0.0/24 \\</span><br><span class="line">--cluster-signing-cert-file=/opt/kubernetes/ssl/ca.pem \\</span><br><span class="line">--cluster-signing-key-file=/opt/kubernetes/ssl/ca-key.pem  \\</span><br><span class="line">--root-ca-file=/opt/kubernetes/ssl/ca.pem \\</span><br><span class="line">--service-account-private-key-file=/opt/kubernetes/ssl/ca-key.pem \\</span><br><span class="line">--experimental-cluster-signing-duration=87600h0m0s&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>-master：通过本地非安全本地端口8080连接apiserver。</p>
<p>–leader-elect：当该组件启动多个时，自动选举（HA）</p>
<p>–cluster-signing-cert-file&#x2F;–cluster-signing-key-file：自动为kubelet颁发证书的CA，与apiserver保持一致</p>
<h5 id="2-systemd管理controller-manager"><a href="#2-systemd管理controller-manager" class="headerlink" title="2. systemd管理controller-manager"></a>2. systemd管理controller-manager</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /usr/lib/systemd/system/kube-controller-manager.service &lt;&lt; EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=Kubernetes Controller Manager</span><br><span class="line">Documentation=https://github.com/kubernetes/kubernetes</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile=/opt/kubernetes/cfg/kube-controller-manager.conf</span><br><span class="line">ExecStart=/opt/kubernetes/bin/kube-controller-manager \$KUBE_CONTROLLER_MANAGER_OPTS</span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h5 id="3-启动并设置开机启动"><a href="#3-启动并设置开机启动" class="headerlink" title="3. 启动并设置开机启动"></a>3. 启动并设置开机启动</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload &amp;&amp; systemctl start kube-controller-manager</span><br><span class="line">&amp;&amp; systemctl enable kube-controller-manager</span><br></pre></td></tr></table></figure>

<h4 id="7-3-部署kube-scheduler"><a href="#7-3-部署kube-scheduler" class="headerlink" title="7.3 部署kube-scheduler"></a>7.3 部署kube-scheduler</h4><h5 id="1-创建配置文件-2"><a href="#1-创建配置文件-2" class="headerlink" title="1. 创建配置文件"></a>1. 创建配置文件</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /opt/kubernetes/cfg/kube-scheduler.conf &lt;&lt; EOF</span><br><span class="line">KUBE_SCHEDULER_OPTS=&quot;--logtostderr=false \</span><br><span class="line">--v=2 \</span><br><span class="line">--log-dir=/opt/kubernetes/logs \</span><br><span class="line">--leader-elect \</span><br><span class="line">--master=127.0.0.1:8080 \</span><br><span class="line">--bind-address=127.0.0.1&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<ul>
<li>–master：通过本地非安全本地端口8080连接apiserver。</li>
<li>–leader-elect：当该组件启动多个时，自动选举（HA）</li>
</ul>
<h5 id="2-systemd管理scheduler"><a href="#2-systemd管理scheduler" class="headerlink" title="2. systemd管理scheduler"></a>2. systemd管理scheduler</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /usr/lib/systemd/system/kube-scheduler.service &lt;&lt; EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=Kubernetes Scheduler</span><br><span class="line">Documentation=https://github.com/kubernetes/kubernetes</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile=/opt/kubernetes/cfg/kube-scheduler.conf</span><br><span class="line">ExecStart=/opt/kubernetes/bin/kube-scheduler \$KUBE_SCHEDULER_OPTS</span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h5 id="3-启动并设置开机启动-1"><a href="#3-启动并设置开机启动-1" class="headerlink" title="3. 启动并设置开机启动"></a>3. 启动并设置开机启动</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload &amp;&amp; systemctl start kube-scheduler</span><br><span class="line">systemctl enable kube-scheduler</span><br></pre></td></tr></table></figure>

<h5 id="4-查看集群状态"><a href="#4-查看集群状态" class="headerlink" title="4. 查看集群状态"></a>4. 查看集群状态</h5><p>所有组件都已经启动成功，通过kubectl工具查看当前集群组件状态：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kubectl get cs</span><br><span class="line">NAME                 STATUS    MESSAGE             ERROR</span><br><span class="line">scheduler            Healthy   ok                  </span><br><span class="line">controller-manager   Healthy   ok                  </span><br><span class="line">etcd-2               Healthy   &#123;&quot;health&quot;:&quot;true&quot;&#125;   </span><br><span class="line">etcd-1               Healthy   &#123;&quot;health&quot;:&quot;true&quot;&#125;   </span><br><span class="line">etcd-0               Healthy   &#123;&quot;health&quot;:&quot;true&quot;&#125;  </span><br></pre></td></tr></table></figure>

<p>如上输出说明Master节点组件运行正常。</p>
<p>查看整个组件的情况</p>
<p>netstat -ntpl | grep kube-</p>
<p>如下情况：</p>
<p>tcp        0      0 127.0.0.1:8080          0.0.0.0:*               LISTEN      60387&#x2F;kube-apiserve<br>tcp        0      0 127.0.0.1:10257         0.0.0.0:*               LISTEN      3711&#x2F;kube-controlle<br>tcp        0      0 127.0.0.1:10259         0.0.0.0:*               LISTEN      3821&#x2F;kube-scheduler<br>tcp6       0      0 :::10251                :::*                    LISTEN      3821&#x2F;kube-scheduler<br>tcp6       0      0 :::6443                 :::*                    LISTEN      60387&#x2F;kube-apiserve<br>tcp6       0      0 :::10252                :::*                    LISTEN      3711&#x2F;kube-controlle</p>
<p>执行下面指令，生成config文件。<br>mkdir ~&#x2F;.kube &amp;&amp; 、cp  &#x2F;opt&#x2F;kubernetes&#x2F;ssl&#x2F;admin.kubeconfig    ~&#x2F;.kube&#x2F;config</p>
<h3 id="六，配置kubelet证书自动续期和创建Node授权用户"><a href="#六，配置kubelet证书自动续期和创建Node授权用户" class="headerlink" title="六，配置kubelet证书自动续期和创建Node授权用户"></a>六，配置kubelet证书自动续期和创建Node授权用户</h3><p>此操作还是master节点执行。node节点也要执行</p>
<p>创建 <code>Node节点</code> 授权用户 <code>kubelet-bootstrap</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding  kubelet-bootstrap --clusterrole=system:node-bootstrapper  --user=kubelet-bootstrap</span><br></pre></td></tr></table></figure>

<p>创建自动批准相关 CSR 请求的 ClusterRole</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim tls-instructs-csr.yaml </span><br><span class="line"></span><br><span class="line">kind: ClusterRole</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">metadata:</span><br><span class="line">  name: system:certificates.k8s.io:certificatesigningrequests:selfnodeserver</span><br><span class="line">rules:</span><br><span class="line">- apiGroups: [<span class="string">&quot;certificates.k8s.io&quot;</span>]</span><br><span class="line">  resources: [<span class="string">&quot;certificatesigningrequests/selfnodeserver&quot;</span>]</span><br><span class="line">  verbs: [<span class="string">&quot;create&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kubectl apply -f tls-instructs-csr.yaml</span><br></pre></td></tr></table></figure>



<p>自动批准 kubelet-bootstrap 用户 TLS bootstrapping 首次申请证书的 CSR 请求</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding node-client-auto-approve-csr --clusterrole=system:certificates.k8s.io:certificatesigningrequests:nodeclient --user=kubelet-bootstrap</span><br></pre></td></tr></table></figure>

<p> 自动批准 system:nodes 组用户更新 kubelet 自身与 apiserver 通讯证书的 CSR 请求</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding node-client-auto-renew-crt --clusterrole=system:certificates.k8s.io:certificatesigningrequests:selfnodeclient --group=system:nodes</span><br></pre></td></tr></table></figure>

<p> 自动批准 system:nodes 组用户更新 kubelet 10250 api 端口证书的 CSR 请求</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding node-server-auto-renew-crt --clusterrole=system:certificates.k8s.io:certificatesigningrequests:selfnodeserver --group=system:nodes</span><br></pre></td></tr></table></figure>

<h3 id="七，配置Node组件并运行"><a href="#七，配置Node组件并运行" class="headerlink" title="七，配置Node组件并运行"></a>七，配置Node组件并运行</h3><p>此步骤依然在master节点配置，因为master节点也是作为一个node节点。</p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/yht1990/2539729">https://blog.51cto.com/yht1990/2539729</a></p>
<h4 id="7-1-配置-kubelet"><a href="#7-1-配置-kubelet" class="headerlink" title="7.1 配置 kubelet"></a>7.1 配置 kubelet</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt;/opt/kubernetes/cfg/kubelet.conf</span></span><br><span class="line"><span class="string">KUBELET_OPTS=&quot;--logtostderr=true \\</span></span><br><span class="line"><span class="string">--v=2 \\</span></span><br><span class="line"><span class="string">--hostname-override=k8s-master \\</span></span><br><span class="line"><span class="string">--kubeconfig=/opt/kubernetes/cfg/kubelet.kubeconfig \\</span></span><br><span class="line"><span class="string">--bootstrap-kubeconfig=/opt/kubernetes/cfg/bootstrap.kubeconfig \\</span></span><br><span class="line"><span class="string">--config=/opt/kubernetes/cfg/kubelet-config.yml \\</span></span><br><span class="line"><span class="string">--cert-dir=/opt/kubernetes/ssl \\</span></span><br><span class="line"><span class="string">--network-plugin=cni \\</span></span><br><span class="line"><span class="string">--cni-conf-dir=/etc/cni/net.d \\</span></span><br><span class="line"><span class="string">--cni-bin-dir=/opt/cni/bin \\</span></span><br><span class="line"><span class="string">--pod-infra-container-image=registry.cn-hangzhou.aliyuncs.com/google-containers/pause-amd64:3.0&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt;/opt/kubernetes/cfg/kubelet-config.yml</span></span><br><span class="line"><span class="string">kind: KubeletConfiguration # 使用对象</span></span><br><span class="line"><span class="string">apiVersion: kubelet.config.k8s.io/v1beta1 # api版本</span></span><br><span class="line"><span class="string">address: 0.0.0.0 # 监听地址</span></span><br><span class="line"><span class="string">port: 10250 # 当前kubelet的端口</span></span><br><span class="line"><span class="string">readOnlyPort: 10255 # kubelet暴露的端口</span></span><br><span class="line"><span class="string">cgroupDriver: cgroupfs # 驱动，要于docker info显示的驱动一致</span></span><br><span class="line"><span class="string">clusterDNS:</span></span><br><span class="line"><span class="string">  - 10.10.0.2</span></span><br><span class="line"><span class="string">clusterDomain: cluster.local  # 集群域</span></span><br><span class="line"><span class="string">failSwapOn: false # 关闭swap</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 身份验证</span></span><br><span class="line"><span class="string">authentication:</span></span><br><span class="line"><span class="string">  anonymous:</span></span><br><span class="line"><span class="string">    enabled: false</span></span><br><span class="line"><span class="string">  webhook:</span></span><br><span class="line"><span class="string">    cacheTTL: 2m0s</span></span><br><span class="line"><span class="string">    enabled: true</span></span><br><span class="line"><span class="string">  x509:</span></span><br><span class="line"><span class="string">    clientCAFile: /opt/kubernetes/ssl/ca.pem</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 授权</span></span><br><span class="line"><span class="string">authorization:</span></span><br><span class="line"><span class="string">  mode: Webhook</span></span><br><span class="line"><span class="string">  webhook:</span></span><br><span class="line"><span class="string">    cacheAuthorizedTTL: 5m0s</span></span><br><span class="line"><span class="string">    cacheUnauthorizedTTL: 30s</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Node 资源保留</span></span><br><span class="line"><span class="string">evictionHard:</span></span><br><span class="line"><span class="string">  imagefs.available: 15%</span></span><br><span class="line"><span class="string">  memory.available: 1G</span></span><br><span class="line"><span class="string">  nodefs.available: 10%</span></span><br><span class="line"><span class="string">  nodefs.inodesFree: 5%</span></span><br><span class="line"><span class="string">evictionPressureTransitionPeriod: 5m0s</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 镜像删除策略</span></span><br><span class="line"><span class="string">imageGCHighThresholdPercent: 85</span></span><br><span class="line"><span class="string">imageGCLowThresholdPercent: 80</span></span><br><span class="line"><span class="string">imageMinimumGCAge: 2m0s</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 旋转证书</span></span><br><span class="line"><span class="string">rotateCertificates: true # 旋转kubelet client 证书</span></span><br><span class="line"><span class="string">featureGates:</span></span><br><span class="line"><span class="string">  RotateKubeletServerCertificate: true</span></span><br><span class="line"><span class="string">  RotateKubeletClientCertificate: true</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">maxOpenFiles: 1000000</span></span><br><span class="line"><span class="string">maxPods: 110</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt;/usr/lib/systemd/system/kubelet.service</span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=Kubernetes Kubelet</span></span><br><span class="line"><span class="string">After=docker.service</span></span><br><span class="line"><span class="string">Requires=docker.service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">EnvironmentFile=-/opt/kubernetes/cfg/kubelet.conf</span></span><br><span class="line"><span class="string">ExecStart=/opt/kubernetes/bin/kubelet \$KUBELET_OPTS</span></span><br><span class="line"><span class="string">Restart=on-failure</span></span><br><span class="line"><span class="string">KillMode=process</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl <span class="built_in">enable</span> kubelet &amp;&amp; systemctl restart kubelet</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="7-2-配置-kube-proxy"><a href="#7-2-配置-kube-proxy" class="headerlink" title="7.2 配置 kube-proxy"></a>7.2 配置 kube-proxy</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">HOSTNAME=<span class="variable">$&#123;1:-&quot;`hostname`&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt;/opt/kubernetes/cfg/kube-proxy.conf</span></span><br><span class="line"><span class="string">KUBE_PROXY_OPTS=&quot;--logtostderr=true \\</span></span><br><span class="line"><span class="string">--v=2 \\</span></span><br><span class="line"><span class="string">--config=/opt/kubernetes/cfg/kube-proxy-config.yml&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt;/opt/kubernetes/cfg/kube-proxy-config.yml</span></span><br><span class="line"><span class="string">kind: KubeProxyConfiguration</span></span><br><span class="line"><span class="string">apiVersion: kubeproxy.config.k8s.io/v1alpha1</span></span><br><span class="line"><span class="string">address: 0.0.0.0 # 监听地址</span></span><br><span class="line"><span class="string">metricsBindAddress: 0.0.0.0:10249 # 监控指标地址,监控获取相关信息 就从这里获取</span></span><br><span class="line"><span class="string">clientConnection:</span></span><br><span class="line"><span class="string">  kubeconfig: /opt/kubernetes/cfg/kube-proxy.kubeconfig # 读取配置文件</span></span><br><span class="line"><span class="string">hostnameOverride: k8s-master # 注册到k8s的节点名称唯一</span></span><br><span class="line"><span class="string">clusterCIDR: 10.10.0.0/16 # service IP范围</span></span><br><span class="line"><span class="string">mode: iptables # 使用iptables模式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 使用 ipvs 模式</span></span><br><span class="line"><span class="string">#mode: ipvs # ipvs 模式</span></span><br><span class="line"><span class="string">#ipvs:</span></span><br><span class="line"><span class="string">#  scheduler: &quot;rr&quot;</span></span><br><span class="line"><span class="string">#iptables:</span></span><br><span class="line"><span class="string">#  masqueradeAll: true</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt;/usr/lib/systemd/system/kube-proxy.service</span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=Kubernetes Proxy</span></span><br><span class="line"><span class="string">After=network.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">EnvironmentFile=-/opt/kubernetes/cfg/kube-proxy.conf</span></span><br><span class="line"><span class="string">ExecStart=/opt/kubernetes/bin/kube-proxy \$KUBE_PROXY_OPTS</span></span><br><span class="line"><span class="string">Restart=on-failure</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl <span class="built_in">enable</span> kube-proxy &amp;&amp; systemctl restart kube-proxy</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成 node 配置文件</span></span><br><span class="line">$ ./kubelet.sh 10.10.0.2 k8s-master1 cluster.local</span><br><span class="line">$ ./proxy.sh k8s-master1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务是否启动</span></span><br><span class="line">$ netstat -ntpl | egrep <span class="string">&quot;kubelet|kube-proxy&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>查看节点是否成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 随便登陆一台master机器查看node节点是否添加成功</span></span><br><span class="line">$ kubectl get node</span><br><span class="line"></span><br><span class="line">[root@k8s-master ssl]<span class="comment"># kubectl get node</span></span><br><span class="line">NAME         STATUS     ROLES    AGE     VERSION</span><br><span class="line">k8s-master   NotReady   &lt;none&gt;   9m22s   v1.18.9</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="7-3-部署CNI网络"><a href="#7-3-部署CNI网络" class="headerlink" title="7.3 部署CNI网络"></a>7.3 部署CNI网络</h4><p>先准备好CNI二进制文件：</p>
<p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/containernetworking/plugins/releases/download/v0.8.6/cni-plugins-linux-amd64-v0.8.6.tgz">https://github.com/containernetworking/plugins/releases/download/v0.8.6/cni-plugins-linux-amd64-v0.8.6.tgz</a></p>
<p>解压二进制包并移动到默认工作目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/cni/bin</span><br><span class="line">tar zxvf cni-plugins-linux-amd64-v0.8.6.tgz -C /opt/cni/bin</span><br></pre></td></tr></table></figure>

<p>部署CNI网络：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br><span class="line">sed -i -r &quot;s#quay.io/coreos/flannel:.*-amd64#lizhenliang/flannel:v0.12.0-amd64#g&quot; kube-flannel.yml</span><br></pre></td></tr></table></figure>

<p>默认镜像地址无法访问，修改为docker hub镜像仓库。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f kube-flannel.yml</span><br><span class="line"></span><br><span class="line">kubectl get pods -n kube-system</span><br><span class="line">NAME                          READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-flannel-ds-amd64-2pc95   1/1     Running   0          72s</span><br><span class="line"></span><br><span class="line">kubectl get node</span><br><span class="line">NAME         STATUS   ROLES    AGE   VERSION</span><br><span class="line">k8s-master   Ready    &lt;none&gt;   41m   v1.18.9</span><br></pre></td></tr></table></figure>

<p>部署好网络插件，Node准备就绪。</p>
<h4 id="7-4-授权apiserver访问kubelet"><a href="#7-4-授权apiserver访问kubelet" class="headerlink" title="7.4 授权apiserver访问kubelet"></a>7.4 授权apiserver访问kubelet</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; apiserver-to-kubelet-rbac.yaml &lt;&lt; EOF</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">kind: ClusterRole</span><br><span class="line">metadata:</span><br><span class="line">  annotations:</span><br><span class="line">    rbac.authorization.kubernetes.io/autoupdate: &quot;true&quot;</span><br><span class="line">  labels:</span><br><span class="line">    kubernetes.io/bootstrapping: rbac-defaults</span><br><span class="line">  name: system:kube-apiserver-to-kubelet</span><br><span class="line">rules:</span><br><span class="line">  - apiGroups:</span><br><span class="line">      - &quot;&quot;</span><br><span class="line">    resources:</span><br><span class="line">      - nodes/proxy</span><br><span class="line">      - nodes/stats</span><br><span class="line">      - nodes/log</span><br><span class="line">      - nodes/spec</span><br><span class="line">      - nodes/metrics</span><br><span class="line">      - pods/log</span><br><span class="line">    verbs:</span><br><span class="line">      - &quot;*&quot;</span><br><span class="line">---</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">kind: ClusterRoleBinding</span><br><span class="line">metadata:</span><br><span class="line">  name: system:kube-apiserver</span><br><span class="line">  namespace: &quot;&quot;</span><br><span class="line">roleRef:</span><br><span class="line">  apiGroup: rbac.authorization.k8s.io</span><br><span class="line">  kind: ClusterRole</span><br><span class="line">  name: system:kube-apiserver-to-kubelet</span><br><span class="line">subjects:</span><br><span class="line">  - apiGroup: rbac.authorization.k8s.io</span><br><span class="line">    kind: User</span><br><span class="line">    name: kubernetes</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">kubectl apply -f apiserver-to-kubelet-rbac.yaml</span><br></pre></td></tr></table></figure>

<h3 id="八，新增加Worker-Node"><a href="#八，新增加Worker-Node" class="headerlink" title="八，新增加Worker Node"></a>八，新增加Worker Node</h3><h4 id="1-拷贝已部署好的Node相关文件到新节点"><a href="#1-拷贝已部署好的Node相关文件到新节点" class="headerlink" title="1. 拷贝已部署好的Node相关文件到新节点"></a>1. 拷贝已部署好的Node相关文件到新节点</h4><p>在master节点将Worker Node涉及文件拷贝到新节点192.168.31.72&#x2F;73</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp /opt/kubernetes root@192.168.31.72:/opt/</span><br><span class="line">scp -r /usr/lib/systemd/system/&#123;kubelet,kube-proxy&#125;.service root@192.168.31.72:/usr/lib/systemd/system</span><br><span class="line">scp -r /opt/cni/ root@192.168.31.72:/opt/</span><br><span class="line">scp /opt/kubernetes/ssl/ca.pem root@192.168.31.72:/opt/kubernetes/ssl</span><br></pre></td></tr></table></figure>

<h4 id="2-删除kubelet证书和kubeconfig文件"><a href="#2-删除kubelet证书和kubeconfig文件" class="headerlink" title="2. 删除kubelet证书和kubeconfig文件"></a>2. 删除kubelet证书和kubeconfig文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm /opt/kubernetes/cfg/kubelet.kubeconfig </span><br><span class="line">rm -f /opt/kubernetes/ssl/kubelet*</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：这几个文件是证书申请审批后自动生成的，每个Node不同，必须删除重新生成。</p>
</blockquote>
<h4 id="3-修改主机名"><a href="#3-修改主机名" class="headerlink" title="3. 修改主机名"></a>3. 修改主机名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /opt/kubernetes/cfg/kubelet.conf</span><br><span class="line">--hostname-override=k8s-node1</span><br><span class="line"></span><br><span class="line">vi /opt/kubernetes/cfg/kube-proxy-config.yml</span><br><span class="line">hostnameOverride: k8s-node1</span><br></pre></td></tr></table></figure>

<h4 id="4-启动并设置开机启动"><a href="#4-启动并设置开机启动" class="headerlink" title="4. 启动并设置开机启动"></a>4. 启动并设置开机启动</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload &amp;&amp; systemctl enable kube-proxy &amp;&amp; systemctl restart kube-proxy</span><br><span class="line"></span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl enable kubelet &amp;&amp; systemctl restart kubelet</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="5-在Master上批准新Node-kubelet证书申请"><a href="#5-在Master上批准新Node-kubelet证书申请" class="headerlink" title="5. 在Master上批准新Node kubelet证书申请"></a>5. 在Master上批准新Node kubelet证书申请</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl get csr</span><br><span class="line">NAME                                                   AGE   SIGNERNAME                                    REQUESTOR           CONDITION</span><br><span class="line">node-csr-4zTjsaVSrhuyhIGqsefxzVoZDCNKei-aE2jyTP81Uro   89s   kubernetes.io/kube-apiserver-client-kubelet   kubelet-bootstrap   Pending</span><br><span class="line"></span><br><span class="line">kubectl certificate approve node-csr-4zTjsaVSrhuyhIGqsefxzVoZDCNKei-aE2jyTP81Uro</span><br></pre></td></tr></table></figure>

<h4 id="6-查看Node状态"><a href="#6-查看Node状态" class="headerlink" title="6. 查看Node状态"></a>6. 查看Node状态</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl get node</span><br><span class="line">NAME         STATUS     ROLES    AGE   VERSION</span><br><span class="line">k8s-master   Ready      &lt;none&gt;   65m   v1.18.3</span><br><span class="line">k8s-node1    Ready      &lt;none&gt;   12m   v1.18.3</span><br><span class="line">k8s-node2    Ready      &lt;none&gt;   81s   v1.18.3</span><br></pre></td></tr></table></figure>

<p>Node2（192.168.31.73 ）节点同上。记得修改主机名！</p>
<h2 id="六、部署Dashboard和CoreDNS"><a href="#六、部署Dashboard和CoreDNS" class="headerlink" title="六、部署Dashboard和CoreDNS"></a>六、部署Dashboard和CoreDNS</h2><h3 id="6-1-部署Dashboard"><a href="#6-1-部署Dashboard" class="headerlink" title="6.1 部署Dashboard"></a>6.1 部署Dashboard</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta8/aio/deploy/recommended.yaml</span></span><br></pre></td></tr></table></figure>

<p>默认Dashboard只能集群内部访问，修改Service为NodePort类型，暴露到外部：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vi recommended.yaml</span><br><span class="line">kind: Service</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  name: kubernetes-dashboard</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">    - port: 443</span><br><span class="line">      targetPort: 8443</span><br><span class="line">      nodePort: 30001</span><br><span class="line">  type: NodePort</span><br><span class="line">  selector:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line"></span><br><span class="line">kubectl apply -f recommended.yaml</span><br><span class="line">kubectl get pods,svc -n kubernetes-dashboard</span><br><span class="line">NAME                                             READY   STATUS              RESTARTS   AGE</span><br><span class="line">pod/dashboard-metrics-scraper-694557449d-z8gfb   1/1     Running             0          2m18s</span><br><span class="line">pod/kubernetes-dashboard-9774cc786-q2gsx         1/1     Running             0          2m19s</span><br><span class="line"></span><br><span class="line">NAME                                TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)         AGE</span><br><span class="line">service/dashboard-metrics-scraper   ClusterIP   10.0.0.141   &lt;none&gt;        8000/TCP        2m19s</span><br><span class="line">service/kubernetes-dashboard        NodePort    10.0.0.239   &lt;none&gt;        443:30001/TCP   2m19s</span><br></pre></td></tr></table></figure>

<p>访问地址：<a target="_blank" rel="noopener" href="https://nodeip:30001/">https://NodeIP:30001</a></p>
<p>创建service account并绑定默认cluster-admin管理员集群角色：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl create serviceaccount dashboard-admin -n kube-system</span><br><span class="line">kubectl create clusterrolebinding dashboard-admin --clusterrole=cluster-admin --serviceaccount=kube-system:dashboard-admin</span><br><span class="line">kubectl describe secrets -n kube-system $(kubectl -n kube-system get secret | awk &#x27;/dashboard-admin/&#123;print $1&#125;&#x27;)</span><br></pre></td></tr></table></figure>

<p>使用输出的token登录Dashboard</p>
<h3 id="6-2-部署CoreDNS"><a href="#6-2-部署CoreDNS" class="headerlink" title="6.2 部署CoreDNS"></a>6.2 部署CoreDNS</h3><p>CoreDNS用于集群内部Service名称解析。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f coredns.yaml</span><br><span class="line"></span><br><span class="line">kubectl get pods -n kube-system </span><br><span class="line">NAME                          READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-5ffbfd976d-j6shb      1/1     Running   0          32s</span><br><span class="line">kube-flannel-ds-amd64-2pc95   1/1     Running   0          38m</span><br><span class="line">kube-flannel-ds-amd64-7qhdx   1/1     Running   0          15m</span><br><span class="line">kube-flannel-ds-amd64-99cr8   1/1     Running   0          26m</span><br></pre></td></tr></table></figure>

<p>DNS解析测试：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kubectl run -it --rm dns-test --image=busybox:1.28.4 sh</span><br><span class="line">If you don&#x27;t see a command prompt, try pressing enter.</span><br><span class="line"></span><br><span class="line">/ # nslookup kubernetes</span><br><span class="line">Server:    10.0.0.2</span><br><span class="line">Address 1: 10.0.0.2 kube-dns.kube-system.svc.cluster.local</span><br><span class="line"></span><br><span class="line">Name:      kubernetes</span><br><span class="line">Address 1: 10.0.0.1 kubernetes.default.svc.cluster.local</span><br></pre></td></tr></table></figure>

<p>解析没问题。</p>
<p>至此，单Master集群部署完成，下一篇扩容为多Master集群~</p>
<p>常见问题</p>
<h1 id="x509-certificate-signed-by-unknown-authority"><a href="#x509-certificate-signed-by-unknown-authority" class="headerlink" title="x509: certificate signed by unknown authority"></a>x509: certificate signed by unknown authority</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/nklinsirui/article/details/94402310">https://blog.csdn.net/nklinsirui/article/details/94402310</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/lizhenliang/2500242">https://blog.51cto.com/lizhenliang/2500242</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/technology178/p/13547342.html">https://www.cnblogs.com/technology178/p/13547342.html</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/121100475">https://zhuanlan.zhihu.com/p/121100475</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/27/build-high-available-k8s/" data-id="cluj9jc9s00083j1mc6757ch6" data-title="搭建高可用k8s集群" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture-department-thinking" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/27/architecture-department-thinking/" class="article-date">
  <time class="dt-published" datetime="2023-05-27T10:12:02.000Z" itemprop="datePublished">2023-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/articture/">articture</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/27/architecture-department-thinking/">architecture-department-thinking</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="关于架构团队的工作内容，我的一些个人思考"><a href="#关于架构团队的工作内容，我的一些个人思考" class="headerlink" title="关于架构团队的工作内容，我的一些个人思考"></a>关于架构团队的工作内容，我的一些个人思考</h1><h2 id="1，架构团队的意义"><a href="#1，架构团队的意义" class="headerlink" title="1，架构团队的意义"></a>1，架构团队的意义</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">架构团队的意义是为了保证系统的可靠性、可扩展性、可维护性、可升级性等，</span><br><span class="line">同时也是为了保证系统的安全性和稳定性。</span><br><span class="line">架构团队的职责是负责整个系统的架构设计和技术选型，以及对系统进行优化和升级。</span><br><span class="line">架构团队需要具备较强的技术能力和管理能力，同时也需要具备良好的沟通能力和团队协作能力。</span><br></pre></td></tr></table></figure>

<h2 id="2，架构团队的团队构成和工作内容"><a href="#2，架构团队的团队构成和工作内容" class="headerlink" title="2，架构团队的团队构成和工作内容"></a>2，架构团队的团队构成和工作内容</h2><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">架构组的工作内容通常包括以下几个方面：</span><br><span class="line">- 制定部门技术规划，重大技术决策的规划和决策落地；</span><br><span class="line">- 制定部门技术规范，整体技术规范、设计规范、调研规范、部署规范、开发规范、数据库规范，接口技术规范、报文规范、通讯规范；</span><br><span class="line">- 发展基础技术平台，技术框架组件整合，基础技术平台开发；</span><br><span class="line">- 解决项目技术难点，技术框架选型，项目设计实现支持；</span><br><span class="line">- 提高人员技术水平，协调项目代码质量，组织技术学习培训；</span><br><span class="line">- 协助运维测试人员，性能测试与自动化测试；</span><br><span class="line">- 前端技术统筹管理，前端技术选型和维护。</span><br></pre></td></tr></table></figure>



<h3 id="团队构成"><a href="#团队构成" class="headerlink" title="团队构成"></a>团队构成</h3><p>理想情况下，团队构成包括如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">前端架构</span><br><span class="line">后端架构</span><br><span class="line">移动端架构</span><br><span class="line">运维架构</span><br><span class="line">测试架构</span><br><span class="line">大数据架构</span><br></pre></td></tr></table></figure>

<h3 id="工作内容"><a href="#工作内容" class="headerlink" title="工作内容"></a>工作内容</h3><h4 id="后端架构"><a href="#后端架构" class="headerlink" title="后端架构"></a>后端架构</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1,K8s foundation：</span><br><span class="line">为生产与业务提供稳定、易用且安全的 K8s 运行时，重点关注 K8s 集群、容器镜像、K8s 上中间件 等的范式定义与管控</span><br><span class="line">2,App delivery：</span><br><span class="line">基于云原生定义应用的标准运行时，设计与实现应用交付框架，集成其他生产工具与中间件，</span><br><span class="line">使得应用可以通过一个统一入口就享受到各种标准组件对全开发生命周期的支持</span><br><span class="line">3,Microservices：</span><br><span class="line">定义微服务化的最佳实践，重点关注 RPC、Service Mesh、API Gateway 等问题，</span><br><span class="line">提供平台级的管控和使用体验，支持其他技术团队落地微服务化</span><br><span class="line">4,Observability：</span><br><span class="line">践行可观测性的最佳实践，主要包括 监控 (Prometheus/Grafana) 、</span><br><span class="line">日志 (ELK) 、Tracing (Jaeger) 等</span><br><span class="line">5,Dev tools：</span><br><span class="line">开发与维护一系列产品与服务，应用于软件开发的整个生命周期，</span><br><span class="line">主要包括 CI、CD、发布、包管理 等，关注标准化和易用性</span><br><span class="line">6,Internal tools：</span><br><span class="line">开发与维护一系列内部工具，提升日常开发与运作效率，</span><br><span class="line">例如：高效且安全的开发环境、方便易用的集成测试系统、日常管理自动化与运作工具链 等</span><br><span class="line">7,Cloud efficiency：</span><br><span class="line">持续提升云上效率，例如： 践行 IaC 的最佳实践、</span><br><span class="line">优化 阿里云/AWS 账单、提供标准的云上中间件、保障云上安全性 等</span><br><span class="line">8,Security &amp; compliance：</span><br><span class="line">开发与维护一系列安全相关的产品与工具，</span><br><span class="line">主要包括 鉴权与授权管理、审计与安全风险探测、secret engine、 policy engine、对生产资料的加密保护 等</span><br></pre></td></tr></table></figure>

<h3 id="大数据架构"><a href="#大数据架构" class="headerlink" title="大数据架构"></a>大数据架构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 牵头实时计算框架建设，基于离线/实时计算技术实现业务数据计算和应用的最佳实践；</span><br><span class="line">2. 负责Flink SQL查询优化、运行时优化、问题诊断等；</span><br><span class="line">3. 负责开源流计算引擎Flink的调度优化、执行优化，支撑高吞吐、大状态作业稳定运行；</span><br><span class="line">4. 深入理解业务场景，与业务部门合作，推动实时计算在公司落地；</span><br><span class="line">5. 研究最新的数据开发理论和实践，并在团队中实验和落地.</span><br></pre></td></tr></table></figure>

<h3 id="运维架构"><a href="#运维架构" class="headerlink" title="运维架构"></a>运维架构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">有cmdb，devops，自动化运维，监控告警经验，</span><br><span class="line">有分布式系统研发经验</span><br><span class="line"></span><br><span class="line">1、负责大型互联网系统的运维架构、部署、监控、治理、优化、容灾、安全等方面方案规划和推进实施落地。</span><br><span class="line">2、负责开发、完善系统监控、报警、自动部署等运维内部的自动化工具和辅助系统。</span><br><span class="line">3、在高并发下保证系统安全、稳定、可靠。</span><br><span class="line">4、建立完善的运维管理制度，应急管理机制和SRE服务治理体系</span><br><span class="line">5、管理运维团队制定团队目标和规划运维架构的演进方向。</span><br><span class="line">6、能够在应急过程中具有一定的洞察力，给出合适的运维解决方案，快速止损，降低故障影响时长。</span><br><span class="line">7、负责公司IT设备的维护</span><br><span class="line">8、负责IT运维团队的管理</span><br><span class="line">任职要求：</span><br><span class="line">1、计算机相关专业，本科及以上学历；</span><br><span class="line">2、5年以上系统运维或者运维平台开发工作经验，精通Linux操作系统。</span><br><span class="line">3、精通Nginx等软件的配置和调优。</span><br><span class="line">4、精通Docker、K8s等虚拟化技术的部署使用</span><br><span class="line">5、精通主流自动化运维工具，如Ansible、Saltstack等。</span><br><span class="line">6、有Python、Go开发经验的优先。</span><br><span class="line">7、熟悉主流安全防护技术。</span><br><span class="line">8、较强的学习能力和独立处理关键问题能力，能熟练阅读英文文档，对新技术有高度热情，善于钻研</span><br><span class="line">9、具有良好的团队协作精神 工作责任心强，抗压能力强，适应快节奏的工作能力</span><br><span class="line">10、有大型互联网系统开发或运维经验者优先。</span><br><span class="line">11、具有数据库运维经验者优先</span><br></pre></td></tr></table></figure>



<h2 id="3，架构团队的落地实践"><a href="#3，架构团队的落地实践" class="headerlink" title="3，架构团队的落地实践"></a>3，架构团队的落地实践</h2><p>建立统一的架构产品，负责能力的实现和落地</p>
<p>详细阐述如下：</p>
<p><img src="/2023/05/27/architecture-department-thinking/%E6%9E%B6%E6%9E%84%E5%9B%A2%E9%98%9F%E7%9A%84%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/27/architecture-department-thinking/" data-id="cluj9jc9l00013j1mgzdb1v61" data-title="architecture-department-thinking" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture-file-writing" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/27/architecture-file-writing/" class="article-date">
  <time class="dt-published" datetime="2023-05-27T04:17:55.000Z" itemprop="datePublished">2023-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/articture/">articture</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/27/architecture-file-writing/">如何编写架构设计文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="如何编写架构设计文档"><a href="#如何编写架构设计文档" class="headerlink" title="如何编写架构设计文档"></a>如何编写架构设计文档</h1><h2 id="1-文档结构树"><a href="#1-文档结构树" class="headerlink" title="1,文档结构树"></a>1,文档结构树</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1,概述</span><br><span class="line">2,业务架构</span><br><span class="line">3,应用架构</span><br><span class="line">4,技术架构</span><br><span class="line">5,数据架构</span><br><span class="line">6,系统架构考虑的因素</span><br><span class="line">6.1 性能</span><br><span class="line">6.2 可用性</span><br><span class="line">6.3 一致性</span><br><span class="line">6.4 扩展性</span><br><span class="line">6.5 安全性</span><br><span class="line">7,未来影响架构的质量和风险</span><br><span class="line">7.1 未来架构需要解决的痛点和风险</span><br><span class="line">7.2 未来架构需要升级的解决方案</span><br></pre></td></tr></table></figure>

<h2 id="2-详细设计文档"><a href="#2-详细设计文档" class="headerlink" title="2,详细设计文档"></a>2,详细设计文档</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1,概述</span><br><span class="line">2,用例图</span><br><span class="line">3,类图</span><br><span class="line">4,对象图</span><br><span class="line">5,状态图</span><br><span class="line">6,活动图</span><br><span class="line">7,序列图</span><br><span class="line">8,协作图</span><br><span class="line">9,构件图</span><br><span class="line">10,部署图</span><br><span class="line">11,系统系统设计需要考虑的因素</span><br><span class="line">11.1 性能问题</span><br><span class="line">11.2 可用性问题</span><br><span class="line">11.3 一致性问题</span><br><span class="line">11.4 扩展性问题</span><br><span class="line">11.5 安全性问题</span><br><span class="line">12,未来系统设计质量和风险</span><br><span class="line">12.1 未来系统设计需要解决的痛点和风险</span><br><span class="line">12.2 未来架构需要升级的解决方案</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/27/architecture-file-writing/" data-id="cluj9jc9o00033j1mazz642tu" data-title="如何编写架构设计文档" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-artiecure-reference" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/27/artiecure-reference/" class="article-date">
  <time class="dt-published" datetime="2023-05-27T02:12:43.000Z" itemprop="datePublished">2023-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/articture/">articture</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/27/artiecure-reference/">架构方案汇总</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="架构方案汇总"><a href="#架构方案汇总" class="headerlink" title="架构方案汇总"></a>架构方案汇总</h1><p>[TOC]</p>
<h2 id="一-基础架构方案"><a href="#一-基础架构方案" class="headerlink" title="一,基础架构方案"></a>一,基础架构方案</h2><p><img src="/2023/05/27/artiecure-reference/comon.png"></p>
<h2 id="二-大数据架构方案"><a href="#二-大数据架构方案" class="headerlink" title="二,大数据架构方案"></a>二,大数据架构方案</h2><h3 id="架构设计图"><a href="#架构设计图" class="headerlink" title="架构设计图"></a>架构设计图</h3><p><img src="/2023/05/27/artiecure-reference/flink.png"></p>
<h3 id="flink配置信息"><a href="#flink配置信息" class="headerlink" title="flink配置信息"></a>flink配置信息</h3><h5 id="flink-jobmanager"><a href="#flink-jobmanager" class="headerlink" title="flink-jobmanager"></a>flink-jobmanager</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: StatefulSet</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-jobmanager</span><br><span class="line">  namespace: flink</span><br><span class="line">spec:</span><br><span class="line">  replicas: 2 # 通过设置大于 1 的整型值来开启 Standby JobManager</span><br><span class="line">  serviceName: flink-jobmanager</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: flink</span><br><span class="line">      component: jobmanager</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: flink</span><br><span class="line">        component: jobmanager</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">        - name: jobmanager</span><br><span class="line">          image: harbor.com/library/flink:1.14.5-scala_2.11-java8</span><br><span class="line">          env:</span><br><span class="line">            - name: POD_IP</span><br><span class="line">              valueFrom:</span><br><span class="line">                fieldRef:</span><br><span class="line">                  apiVersion: v1</span><br><span class="line">                  fieldPath: status.podIP</span><br><span class="line">          args: [&quot;jobmanager&quot;, &quot;$(POD_IP)&quot;]</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: 6123</span><br><span class="line">              name: rpc</span><br><span class="line">            - containerPort: 6124</span><br><span class="line">              name: blob-server</span><br><span class="line">            - containerPort: 8081</span><br><span class="line">              name: webui</span><br><span class="line">          livenessProbe:</span><br><span class="line">            tcpSocket:</span><br><span class="line">              port: 6123</span><br><span class="line">            initialDelaySeconds: 30</span><br><span class="line">            periodSeconds: 60</span><br><span class="line">          resources:</span><br><span class="line">            requests:</span><br><span class="line">              cpu: 1</span><br><span class="line">              memory: 1024Mi</span><br><span class="line">            limits:</span><br><span class="line">              cpu: 1</span><br><span class="line">              memory: 1024Mi            </span><br><span class="line">          volumeMounts:</span><br><span class="line">            - name: flink-config-volume</span><br><span class="line">              mountPath: /opt/flink/conf            </span><br><span class="line">          securityContext:</span><br><span class="line">            runAsUser: 0  </span><br><span class="line">      serviceAccountName: flink-service-account </span><br><span class="line">      hostname: flink-jobmanager</span><br><span class="line">      volumes:           </span><br><span class="line">        - name: flink-config-volume</span><br><span class="line">          configMap:</span><br><span class="line">            name: flink-config</span><br><span class="line">            items:</span><br><span class="line">              - key: flink-conf.yaml</span><br><span class="line">                path: flink-conf.yaml</span><br><span class="line">              - key: log4j-console.properties</span><br><span class="line">                path: log4j-console.properties</span><br></pre></td></tr></table></figure>

<h5 id="flink-taskmanager"><a href="#flink-taskmanager" class="headerlink" title="flink-taskmanager"></a>flink-taskmanager</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: StatefulSet</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-taskmanager</span><br><span class="line">  namespace: flink-k8s</span><br><span class="line">spec:</span><br><span class="line">  replicas: 1</span><br><span class="line">  serviceName: flink-taskmanager</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: flink</span><br><span class="line">      component: taskmanager</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: flink</span><br><span class="line">        component: taskmanager</span><br><span class="line">    spec:       </span><br><span class="line">      containers:</span><br><span class="line">      - name: taskmanager</span><br><span class="line">        image: harbor.com/library/flink:1.14.5-scala_2.11-java8</span><br><span class="line">        args: [&quot;taskmanager&quot;]</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 6122</span><br><span class="line">          name: rpc</span><br><span class="line">        - containerPort: 6125</span><br><span class="line">          name: query-state</span><br><span class="line">        livenessProbe:</span><br><span class="line">          tcpSocket:</span><br><span class="line">            port: 6122</span><br><span class="line">          initialDelaySeconds: 30</span><br><span class="line">          periodSeconds: 60</span><br><span class="line">        resources:</span><br><span class="line">          requests:</span><br><span class="line">            cpu: 2</span><br><span class="line">            memory: 5120Mi</span><br><span class="line">          limits:</span><br><span class="line">            cpu: 2</span><br><span class="line">            memory: 5120Mi         </span><br><span class="line">        volumeMounts:</span><br><span class="line">        - name: flink-config-volume</span><br><span class="line">          mountPath: /opt/flink/conf/           </span><br><span class="line">        securityContext:</span><br><span class="line">          runAsUser: 0</span><br><span class="line">      serviceAccountName: flink-service-account</span><br><span class="line">      hostname: flink-taskmanager	</span><br><span class="line">      volumes:                 </span><br><span class="line">      - name: flink-config-volume</span><br><span class="line">        configMap:</span><br><span class="line">          name: flink-config</span><br><span class="line">          items:</span><br><span class="line">          - key: flink-conf.yaml</span><br><span class="line">            path: flink-conf.yaml</span><br><span class="line">          - key: log4j-console.properties</span><br><span class="line">            path: log4j-console.properties</span><br></pre></td></tr></table></figure>

<h5 id="service-account"><a href="#service-account" class="headerlink" title="service-account"></a>service-account</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">kind: Role</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-k8s-role</span><br><span class="line">  namespace: flink-k8s-kafka</span><br><span class="line">rules:</span><br><span class="line">- apiGroups:</span><br><span class="line">  - &quot;&quot;</span><br><span class="line">  - &quot;extensions&quot;</span><br><span class="line">  resources:</span><br><span class="line">  - nodes</span><br><span class="line">  - services</span><br><span class="line">  - endpoints</span><br><span class="line">  - namespaces</span><br><span class="line">  - ingresses</span><br><span class="line">  - secrets</span><br><span class="line">  - pods</span><br><span class="line">  verbs:</span><br><span class="line">  - get</span><br><span class="line">  - list</span><br><span class="line">  - watch</span><br><span class="line">- apiGroups:</span><br><span class="line">  - &quot;&quot;</span><br><span class="line">  - &quot;extensions&quot;</span><br><span class="line">  resources:</span><br><span class="line">  - configmaps</span><br><span class="line">  - events</span><br><span class="line">  - ingresses/status</span><br><span class="line">  verbs:</span><br><span class="line">  - get</span><br><span class="line">  - list</span><br><span class="line">  - watch</span><br><span class="line">  - update</span><br><span class="line">  - create</span><br><span class="line">  - patch</span><br><span class="line">  - delete</span><br><span class="line">---</span><br><span class="line">kind: ServiceAccount</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-service-account</span><br><span class="line">  namespace: flink-k8s-kafka</span><br><span class="line">secrets:</span><br><span class="line">  - name: flink-service-account-token</span><br><span class="line">---</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">kind: RoleBinding</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-k8s-minimal</span><br><span class="line">  namespace: flink-k8s-kafka</span><br><span class="line">roleRef:</span><br><span class="line">  apiGroup: rbac.authorization.k8s.io</span><br><span class="line">  kind: Role</span><br><span class="line">  name: flink-k8s-role</span><br><span class="line">subjects:</span><br><span class="line">- kind: ServiceAccount</span><br><span class="line">  name: flink-service-account</span><br><span class="line">  namespace: flink-k8s-kafka</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: pvc-flink-data-new</span><br><span class="line">  namespace: flink-k8s-kafka</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">  - ReadWriteMany</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 2Gi  </span><br></pre></td></tr></table></figure>

<h5 id="configMap"><a href="#configMap" class="headerlink" title="configMap"></a>configMap</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">metadata:</span><br><span class="line">  namespace: flink-k8s-kafka</span><br><span class="line">  name: flink-config</span><br><span class="line">  labels:</span><br><span class="line">    app: flink</span><br><span class="line">data:</span><br><span class="line">  flink-conf.yaml: |+</span><br><span class="line">    jobmanager.rpc.address: flink-jobmanager</span><br><span class="line">    taskmanager.numberOfTaskSlots: 20</span><br><span class="line">    blob.server.port: 6124</span><br><span class="line">    jobmanager.rpc.port: 6123</span><br><span class="line">    taskmanager.rpc.port: 6122</span><br><span class="line">    queryable-state.proxy.ports: 6125</span><br><span class="line">    taskmanager.heap.size: 5120m</span><br><span class="line">    jobmanager.heap.size: 1024m</span><br><span class="line">    taskmanager.memory.managed.size: 512m</span><br><span class="line">    taskmanager.memory.jvm-metaspace.size: 256m</span><br><span class="line">    taskmanager.memory.jvm-overhead.max: 256m</span><br><span class="line">    taskmanager.memory.network.max: 128m</span><br><span class="line">    env.java.opts:  -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/opt/flink/gc/ -XX:+PrintHeapAtGC  -XX:+PrintGCDetails  -XX:+PrintGCCause -XX:+PrintGCDateStamps  -XX:+PrintGCTimeStamps  -XX:-OmitStackTraceInFastThrow      -Xloggc:/opt/flink/gc/flink-gc-%t.log -XX:+UseGCLogFileRotation  -XX:NumberOfGCLogFiles=14 -XX:GCLogFileSize=100M</span><br><span class="line">    classloader.resolve-order: parent-first</span><br><span class="line">    parallelism.default: 2</span><br><span class="line">    kubernetes.cluster-id: cluster-dev</span><br><span class="line">    kubernetes.namespace: flink-k8s-kafka</span><br><span class="line">    kubernetes.service-account: flink-service-account</span><br><span class="line">    high-availability: org.apache.flink.kubernetes.highavailability.KubernetesHaServicesFactory</span><br><span class="line">    restart-strategy: fixed-delay</span><br><span class="line">    restart-strategy.fixed-delay.attempts: 10</span><br><span class="line">    task.cancellation.timeout: 0</span><br><span class="line">    heartbeat.timeout: 18000000</span><br><span class="line">    taskmanager.registration.timeout: 500min</span><br><span class="line">    akka.tcp.timeout: 18000s</span><br><span class="line">    akka.lookup.timeout: 18000s</span><br><span class="line">    akka.client.timeout: 18000s</span><br><span class="line">    akka.ask.timeout: 18000s</span><br><span class="line">    slot.idle.timeout: 5000000</span><br><span class="line">    slot.request.timeout: 5000000</span><br><span class="line">    s3.ssl.enabled: false</span><br><span class="line">    jobmanager.archive.fs.dir: hdfs://flink-storage/flink-historyserver</span><br><span class="line">    historyserver.web.address: 0.0.0.0</span><br><span class="line">    historyserver.web.port: 8082</span><br><span class="line">    historyserver.archive.fs.dir: hdfs://flink-storage/flink-historyserver</span><br><span class="line">    historyserver.archive.fs.refresh-interval: 10000    </span><br><span class="line">    high-availability.storageDir: hdfs://flink-storage/flink-recover</span><br><span class="line">    # state.backend and state.checkpoints.dir decide real path.</span><br><span class="line">    state.backend: rocksdb</span><br><span class="line">    state.backend.incremental: true</span><br><span class="line">    taskmanager.memory.managed.fraction: 0.3</span><br><span class="line">    state.checkpoints.dir: hdfs://flink-storage/flink-checkpoints</span><br><span class="line">    state.backend.fs.checkpointdir: hdfs://flink-storage/flink-checkpoints</span><br><span class="line">    state.savepoints.dir: hdfs://flink-storage/flink-savepoints</span><br><span class="line">    state.backend.rocksdb.block.blocksize: 64 kb</span><br><span class="line">    state.backend.rocksdb.block.cache-size: 128 mb</span><br><span class="line">    state.backend.rocksdb.files.open :  -1</span><br><span class="line">    state.backend.rocksdb.writebuffer.size : 128 mb</span><br><span class="line">    state.backend.rocksdb.writebuffer.count: 4</span><br><span class="line">    state.backend.rocksdb.writebuffer.number-to-merge: 2</span><br><span class="line">    state.backend.rocksdb.compaction.style: level</span><br><span class="line">    state.backend.rocksdb.thread.num: 4</span><br><span class="line">    state.backend.rocksdb.metrics.block-cache-usage: true</span><br><span class="line">    state.backend.rocksdb.checkpoint.transfer.thread.num: 4</span><br><span class="line">    table.dynamic-table-options.enabled:true</span><br><span class="line">    table.exec.mini-batch.enabled: true</span><br><span class="line">    table.exec.mini-batch.size: 35000</span><br><span class="line">    table.optimizer.distinct-agg.split.enabled: true</span><br><span class="line">    table.exec.mini-batch.allow-latency: 15 s</span><br><span class="line">    execution.checkpointing.interval: 3min</span><br><span class="line">    execution.checkpointing.timeout: 10min</span><br><span class="line">    execution.checkpointing.tolerable-failed-checkpoints: 100</span><br><span class="line">    state.checkpoints.num-retained: 3</span><br><span class="line">    execution.checkpointing.externalized-checkpoint-retention: RETAIN_ON_CANCELLATION</span><br><span class="line">    blob.storage.directory: hdfs://flink-storage/blob    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  log4j-console.properties: |+</span><br><span class="line">    # 如下配置会同时影响用户代码和 Flink 的日志行为</span><br><span class="line">    rootLogger.level = INFO</span><br><span class="line">    rootLogger.appenderRef.console.ref = ConsoleAppender</span><br><span class="line">    rootLogger.appenderRef.rolling.ref = RollingFileAppender</span><br><span class="line"></span><br><span class="line">    # 如果你只想改变 Flink 的日志行为则可以取消如下的注释部分</span><br><span class="line">    #logger.flink.name = org.apache.flink</span><br><span class="line">    #logger.flink.level = INFO</span><br><span class="line"></span><br><span class="line">    # 下面几行将公共 libraries 或 connectors 的日志级别保持在 INFO 级别。</span><br><span class="line">    # root logger 的配置不会覆盖此处配置。</span><br><span class="line">    # 你必须手动修改这里的日志级别。</span><br><span class="line">    logger.akka.name = akka</span><br><span class="line">    logger.akka.level = INFO</span><br><span class="line">    logger.kafka.name= org.apache.kafka</span><br><span class="line">    logger.kafka.level = INFO</span><br><span class="line">    logger.hadoop.name = org.apache.hadoop</span><br><span class="line">    logger.hadoop.level = INFO</span><br><span class="line">    logger.zookeeper.name = org.apache.zookeeper</span><br><span class="line">    logger.zookeeper.level = INFO</span><br><span class="line"></span><br><span class="line">    # 将所有 info 级别的日志输出到 console</span><br><span class="line">    appender.console.name = ConsoleAppender</span><br><span class="line">    appender.console.type = CONSOLE</span><br><span class="line">    appender.console.layout.type = PatternLayout</span><br><span class="line">    appender.console.layout.pattern = %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; %-5p %-60c %x - %m%n</span><br><span class="line"></span><br><span class="line">    # 将所有 info 级别的日志输出到指定的 rolling file</span><br><span class="line">    appender.rolling.name = RollingFileAppender</span><br><span class="line">    appender.rolling.type = RollingFile</span><br><span class="line">    appender.rolling.append = false</span><br><span class="line">    appender.rolling.fileName = $&#123;sys:log.file&#125;</span><br><span class="line">    appender.rolling.filePattern = $&#123;sys:log.file&#125;.%i</span><br><span class="line">    appender.rolling.layout.type = PatternLayout</span><br><span class="line">    appender.rolling.layout.pattern = %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; %-5p %-60c %x - %m%n</span><br><span class="line">    appender.rolling.policies.type = Policies</span><br><span class="line">    appender.rolling.policies.size.type = SizeBasedTriggeringPolicy</span><br><span class="line">    appender.rolling.policies.size.size=100MB</span><br><span class="line">    appender.rolling.strategy.type = DefaultRolloverStrategy</span><br><span class="line">    appender.rolling.strategy.max = 10</span><br><span class="line"></span><br><span class="line">    # 关闭 Netty channel handler 中不相关的（错误）警告</span><br><span class="line">    logger.netty.name = org.jboss.netty.channel.DefaultChannelPipeline</span><br><span class="line">    logger.netty.level = OFF</span><br></pre></td></tr></table></figure>

<p>flink-service</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-jobmanager</span><br><span class="line">spec:</span><br><span class="line">  type: ClusterIP</span><br><span class="line">  ports:</span><br><span class="line">  - name: rpc</span><br><span class="line">    port: 6123</span><br><span class="line">  - name: blob-server</span><br><span class="line">    port: 6124</span><br><span class="line">  - name: webui</span><br><span class="line">    port: 8081</span><br><span class="line">  selector:</span><br><span class="line">    app: flink</span><br><span class="line">    component: jobmanager</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-jobmanager-rest</span><br><span class="line">spec:</span><br><span class="line">  type: NodePort</span><br><span class="line">  ports:</span><br><span class="line">  - name: rest</span><br><span class="line">    port: 8081</span><br><span class="line">    targetPort: 8081</span><br><span class="line">    nodePort: 30002</span><br><span class="line">  selector:</span><br><span class="line">    app: flink</span><br><span class="line">    component: jobmanager   </span><br></pre></td></tr></table></figure>

<h5 id="flink-history"><a href="#flink-history" class="headerlink" title="flink-history"></a>flink-history</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-job-historyserver</span><br><span class="line">  namespace: flink</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    app: flink</span><br><span class="line">    component: flink-job-historyserver</span><br><span class="line">  type: NodePort  </span><br><span class="line">  ports:</span><br><span class="line">    - protocol: TCP</span><br><span class="line">      port: 8082</span><br><span class="line">      targetPort: 8082</span><br><span class="line">      nodePort: 31084</span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: StatefulSet</span><br><span class="line">metadata:</span><br><span class="line">  name: flink-job-historyserver</span><br><span class="line">  namespace: flink-k8s-kafka</span><br><span class="line">spec:</span><br><span class="line">  replicas: 1</span><br><span class="line">  serviceName: flink-job-historyserver</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: flink</span><br><span class="line">      component: flink-job-historyserver</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: flink</span><br><span class="line">        component: flink-job-historyserver</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">        - name: flink-job-historyserver</span><br><span class="line">          image: harbor.com/library/flink:1.14.5-scala_2.11-java8</span><br><span class="line">          command: [&quot;/opt/flink/bin/historyserver.sh&quot;,&quot;start-foreground&quot;]</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: 8082</span><br><span class="line">              name: webui</span><br><span class="line">          resources:</span><br><span class="line">            requests:</span><br><span class="line">              cpu: 0.5</span><br><span class="line">              memory: 512Mi</span><br><span class="line">            limits:</span><br><span class="line">              cpu: 0.5</span><br><span class="line">              memory: 512Mi              </span><br><span class="line">          volumeMounts:</span><br><span class="line">            - name: flink-config-volume</span><br><span class="line">              mountPath: /opt/flink/conf             </span><br><span class="line">          securityContext:</span><br><span class="line">            runAsUser: 0  </span><br><span class="line">      serviceAccountName: flink-service-account</span><br><span class="line">      hostname: flink-job-historyserver</span><br><span class="line">      volumes:         </span><br><span class="line">        - name: flink-config-volume</span><br><span class="line">          configMap:</span><br><span class="line">            name: flink-config</span><br><span class="line">            items:</span><br><span class="line">              - key: flink-conf.yaml</span><br><span class="line">                path: flink-conf.yaml</span><br><span class="line">              - key: log4j-console.properties</span><br><span class="line">                path: log4j-console.properties</span><br></pre></td></tr></table></figure>



<h2 id="三-认证授权相关方案"><a href="#三-认证授权相关方案" class="headerlink" title="三,认证授权相关方案"></a>三,认证授权相关方案</h2><h3 id="基于PBAC的认证权限系统设计"><a href="#基于PBAC的认证权限系统设计" class="headerlink" title="基于PBAC的认证权限系统设计"></a>基于PBAC的认证权限系统设计</h3><h4 id="核心模型"><a href="#核心模型" class="headerlink" title="核心模型"></a>核心模型</h4><p><img src="/2023/05/27/artiecure-reference/policy.png"></p>
<p>举例</p>
<p><img src="/2023/05/27/artiecure-reference/policy-create.png"></p>
<h4 id="核心流程"><a href="#核心流程" class="headerlink" title="核心流程"></a>核心流程</h4><h5 id="授权验证流程"><a href="#授权验证流程" class="headerlink" title="授权验证流程"></a>授权验证流程</h5><p><img src="/2023/05/27/artiecure-reference/autheration.png"></p>
<h5 id="权限认证代码流程"><a href="#权限认证代码流程" class="headerlink" title="权限认证代码流程"></a>权限认证代码流程</h5><p><img src="/2023/05/27/artiecure-reference/autheration-code.png"></p>
<h3 id="招聘要求"><a href="#招聘要求" class="headerlink" title="招聘要求"></a>招聘要求</h3><p>SSO架构师</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【工作职责】</span><br><span class="line">1. 负责设计ESSO解决方案，涉及网络认证、身份认证、桌面认证等；</span><br><span class="line">2. 负责ESSO核心代码编写，核心技术攻关，解决项目中遇到的技术问题</span><br><span class="line">【任职要求】</span><br><span class="line">1. 统招本科及以上学历，4年以上企业单点认证（ESSO）业务设计开发经验；</span><br><span class="line">2. 精通ESSO，熟悉身份认证、网络认证与桌面认证；</span><br><span class="line">3. 具备DDD领域建模能力，具备DDD产品实践；</span><br><span class="line">4. 精通Java技术栈，掌握基础数据结构、算法和设计模式并熟练应用，精通UML图；理解系统设计常用原则、方法论与工具；</span><br><span class="line">5. 熟悉SQL与NoSQL，熟悉多线程编程，具备大并发业务处理经验。</span><br></pre></td></tr></table></figure>

<p>企业单点认证（ESSO）架构师</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【工作职责】</span><br><span class="line">负责设计ESSO解决方案，涉及网络认证、身份认证、桌面认证等；</span><br><span class="line">负责ESSO核心代码编写，核心技术攻关，解决项目中遇到的技术问题</span><br><span class="line">【任职要求】</span><br><span class="line">统招本科及以上学历，4年以上企业单点认证（ESSO）业务设计开发经验；</span><br><span class="line">精通ESSO，熟悉身份认证、网络认证与桌面认证；</span><br><span class="line">具备DDD领域建模能力，具备DDD产品实践；</span><br><span class="line">精通Java技术栈，掌握基础数据结构、算法和设计模式并熟练应用，精通UML图；理解系统设计常用原则、方法论与工具；</span><br><span class="line">熟悉SQL与NoSQL，熟悉多线程编程，具备大并发业务处理经验。</span><br></pre></td></tr></table></figure>

<p>策略引擎架构师</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">【工作职责】</span><br><span class="line">1、负责IAM产品认证引擎或授权策略部分核心模块的实现，建设通用、可靠、安全、灵活的策略引擎；</span><br><span class="line">2、主导IAM产品认证或授权的策略引擎顶层设计与领域建模（自适应认证（Adaptive Engine），策略引擎，策略冲突，策略决策）；</span><br><span class="line">【任职要求】</span><br><span class="line">1、统招本科及以上学历，6-10年工作经验（具备自适应引擎、授权平台策略引擎设计优先）；</span><br><span class="line">2、具备DDD领域建模能力，具备DDD产品实践；</span><br><span class="line">3、具备策略引擎开发经验：策略冲突柔性解决，策略引擎决策，策略管理（可视化策略控制及策略执行）</span><br><span class="line">4、掌握基础数据结构、算法和设计模式并熟练应用，精通UML图；理解系统设计常用原则、方法论与工具。</span><br></pre></td></tr></table></figure>

<p>认证授权业务总架构师</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">【工作职责】</span><br><span class="line">制定IAM产品认证授权业务架构与技术架构，制定认证授权专业能力发展规划；</span><br><span class="line">负责指导工程师进行技术验证和实现，核心代码编写，核心技术攻关，解决项目中遇到的技术问题</span><br><span class="line">【任职要求】</span><br><span class="line">6年以上认证授权平台设计经验：</span><br><span class="line">熟悉RBAC，ABAC，PBAC设计模型并实践于产品或项目中；</span><br><span class="line">精通自适应认证、企业SSO、认证编排、认证集成、MFA；</span><br><span class="line">具备认证授权建模经验。</span><br><span class="line">具备高性能，无侵入认证、授权组件设计经验；</span><br><span class="line">精通策略引擎（业务架构设计和技术架构设计）。</span><br></pre></td></tr></table></figure>



<h2 id="四-网关平台方案"><a href="#四-网关平台方案" class="headerlink" title="四,网关平台方案"></a>四,网关平台方案</h2><p><img src="/2023/05/27/artiecure-reference/gateway.png"></p>
<h2 id="五-Redis搭建方案"><a href="#五-Redis搭建方案" class="headerlink" title="五,Redis搭建方案"></a>五,Redis搭建方案</h2><h3 id="哨兵方案"><a href="#哨兵方案" class="headerlink" title="哨兵方案"></a>哨兵方案</h3><p>一主两从三哨兵,详细配置如下</p>
<p>master.conf配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">daemonize yes</span><br><span class="line">port 6379</span><br><span class="line">tcp-backlog 511</span><br><span class="line">bind 0.0.0.0</span><br><span class="line">timeout 0</span><br><span class="line">tcp-keepalive 0</span><br><span class="line">loglevel notice</span><br><span class="line">logfile /var/log/redis_6379.log</span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line">requirepass AAAaaa1234</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>slave1.conf配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">daemonize yes</span><br><span class="line">port 16379</span><br><span class="line">tcp-backlog 511</span><br><span class="line">bind 0.0.0.0</span><br><span class="line">timeout 0</span><br><span class="line">tcp-keepalive 0</span><br><span class="line">loglevel notice</span><br><span class="line">logfile /var/log/redis_16379.log</span><br><span class="line">databases 16</span><br><span class="line">slaveof 172.6.9.141 6379</span><br><span class="line">requirepass AAAaaa1234</span><br><span class="line">masterauth AAAaaa1234</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>slave2.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">daemonize yes</span><br><span class="line">port 26379</span><br><span class="line">tcp-backlog 511</span><br><span class="line">bind 0.0.0.0</span><br><span class="line">timeout 0</span><br><span class="line">tcp-keepalive 0</span><br><span class="line">loglevel notice</span><br><span class="line">logfile /var/log/redis_16379.log</span><br><span class="line">databases 16</span><br><span class="line">slaveof 172.16.9.141 6379</span><br><span class="line">masterauth AAAaaa1234</span><br><span class="line">requirepass AAAaaa1234</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sentinel1.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">port 6380</span><br><span class="line">daemonize yes</span><br><span class="line">sentinel myid 8947f009cfb83e035adb22526205d667aae1175d</span><br><span class="line">sentinel deny-scripts-reconfig yes</span><br><span class="line">sentinel monitor mymaster 172.6.9.141 6379 2</span><br><span class="line">sentinel auth-pass mymaster AAAaaa1234</span><br><span class="line">sentinel down-after-milliseconds mymaster 3000</span><br><span class="line"># Generated by CONFIG REWRITE</span><br><span class="line">dir &quot;/root/redis&quot;</span><br><span class="line">protected-mode no</span><br><span class="line">sentinel config-epoch mymaster 0</span><br><span class="line">sentinel leader-epoch mymaster 0</span><br><span class="line">sentinel known-replica mymaster 172.6.9.141 26379</span><br><span class="line">sentinel known-replica mymaster 172.6.9.141 16379</span><br><span class="line">sentinel current-epoch 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sentinel2.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">port 16380</span><br><span class="line">daemonize yes</span><br><span class="line">sentinel myid e92b5cc6e5234e695daee6058e786c72a220945c</span><br><span class="line">sentinel deny-scripts-reconfig yes</span><br><span class="line">sentinel monitor slave1 172.6.9.141 16379 2</span><br><span class="line">sentinel down-after-milliseconds slave1 3000</span><br><span class="line">sentinel auth-pass slave1 AAAaaa1234</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sentinel3.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">port 26380</span><br><span class="line">daemonize yes</span><br><span class="line">sentinel myid 053740df367aaf818553ce1f804265240c4d2234</span><br><span class="line">sentinel deny-scripts-reconfig yes</span><br><span class="line">sentinel monitor slave2 172.16.9.141 26379 2</span><br><span class="line">sentinel down-after-milliseconds slave2 3000</span><br><span class="line">sentinel auth-pass slave2 AAAaaa1234</span><br></pre></td></tr></table></figure>

<p>执行脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash</span><br><span class="line">./redis-server master.conf &amp;</span><br><span class="line">./redis-server slave1.conf &amp;</span><br><span class="line">./redis-server slave2.conf &amp;</span><br><span class="line">./redis-sentinel sentinel1.conf &amp;</span><br><span class="line">./redis-sentinel sentinel2.conf &amp;</span><br><span class="line">./redis-sentinel sentinel3.conf &amp;</span><br></pre></td></tr></table></figure>

<h2 id="六-零信任产品架构设计"><a href="#六-零信任产品架构设计" class="headerlink" title="六, 零信任产品架构设计"></a>六, 零信任产品架构设计</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1）统一安全接入</span><br><span class="line">安全网关默认“拒绝一切（deny all）”连接，只会接收客户端发来的第一个带身份信息的包。 安全网关验证通过后，才会允许建立连接。SPA 和动态端口技术保证了黑客无法检测到安全网关开放的端口，无法对深云安全网关进行扫描。</span><br><span class="line">（2）统一认证服务</span><br><span class="line">用户名口令认证、LDAP认证、PKI（USB-KEY）认证、二维码认证、OTP（动态口令）认证、互联网快捷认证（QQ/微信/钉钉等）、生物特征认证、第三方认证。</span><br><span class="line">（3）统一权限管理</span><br><span class="line">支持用户角色权限、组织权限等多种资源授权体系，支持横向、纵向数据授权模式。</span><br><span class="line">（4）统一应用集成</span><br><span class="line">在线集成指引在线接入文档、在线接入、在线调试等，服务（应用）单点集成，支持CAS CLIENT、OAUTH2.0、SAML2.0、RESTFUL API、FORMBASE等。</span><br><span class="line">（5）统一用户管理</span><br><span class="line">用户类型管理，人员信息同步，账号全生命周期管理，角色管理，权限管理，组织管理，账号和密码安全策略。</span><br><span class="line">（6）统一审计管理</span><br><span class="line">用户管理行为审计、用户访问行为审计、审计报表。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="核心技术分析"><a href="#核心技术分析" class="headerlink" title="核心技术分析"></a>核心技术分析</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">零信任模型的技术架构包括以下几个关键组件：</span><br><span class="line">1. 认证和授权：这是零信任模型的核心组件，用于验证用户和设备的身份，并授权它们访问特定的资源。</span><br><span class="line">这可以通过多种方式实现，例如多因素身份验证、单一登录、访问控制策略等。</span><br><span class="line">2. 网络分割：网络分割是将网络划分为多个安全区域的过程，每个区域都有自己的安全策略和访问控制规则。</span><br><span class="line">这可以通过虚拟专用网络（VPN）、软件定义网络（SDN）等技术实现。</span><br><span class="line">3. 实时监控和分析：零信任模型强调实时监控和分析，以便及时发现和应对安全威胁。</span><br><span class="line">这可以通过安全信息和事件管理（SIEM）系统、行为分析、威胁情报等技术实现。</span><br><span class="line">4. 应用程序和数据保护：应用程序和数据保护是保护敏感数据和应用程序的关键组件。这可以通过数据加密、访问控制、应用程序隔离等技术实现。</span><br><span class="line">5. 策略管理：策略管理是管理访问控制策略和安全策略的过程。这可以通过策略管理平台、自动化工具等技术实现。</span><br><span class="line">这些组件共同构成了零信任模型的技术架构，可以帮助企业实现更加安全、可控的网络环境。</span><br></pre></td></tr></table></figure>

<h2 id="七-从1到0熟悉一个系统的方法论"><a href="#七-从1到0熟悉一个系统的方法论" class="headerlink" title="七,从1到0熟悉一个系统的方法论"></a>七,从1到0熟悉一个系统的方法论</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">一,业务架构</span><br><span class="line">1,系统所在行业的情况是怎样？</span><br><span class="line">2,系统的目标用户是谁？比如是给公司高层做决策用？给运营或客服用？还是互联网用户用？</span><br><span class="line">3,平均有多少人在使用？高峰期有多少人在用？</span><br><span class="line">4,系统有什么业务价值？有哪些指标可以衡量系统业务价值？</span><br><span class="line">5,系统有哪些功能模块？</span><br><span class="line">6,系统有哪些领域概念？梳理下系统的领域模型；</span><br><span class="line">7,系统的关键业务流程有哪些？关键业务流程是怎样？</span><br><span class="line">8,系统的非功能性需求有哪些？如性能、质量、扩展性、安全性等；</span><br><span class="line">9,系统未来的发展规划是怎样？</span><br><span class="line">二,逻辑架构</span><br><span class="line">10,有哪些子系统或模块？系统之间是什么样的关系？</span><br><span class="line">11,对外上下游接口有哪些？对接人是谁？</span><br><span class="line">12,关键业务流程怎么实现的？用类图、序列图等方式表达出来。</span><br><span class="line">三,开发架构</span><br><span class="line">13,代码在哪？</span><br><span class="line">14,包怎么划分的？怎么分层？如 mvc、controller-service-dao；</span><br><span class="line">15,用了什么框架，如 ssh、dubbo；</span><br><span class="line">16,用了哪些工具包？如 apache commons、guava；</span><br><span class="line">17,用了哪些中间件？如 metaq、tair、schedulerX、Diamond；</span><br><span class="line">18,依赖哪些平台？如权限平台、流程引擎等。</span><br><span class="line">四,运行架构</span><br><span class="line">19,系统能支撑多少 qps？峰值 qps 多少？</span><br><span class="line">20,与上下游系统怎么交互的？rpc？http？同步还是异步？</span><br><span class="line">五,物理架构</span><br><span class="line">21,系统如何发布部署？有哪些部署环境？</span><br><span class="line">22,系统有多少台机器？</span><br><span class="line">23,系统部署怎么部署的？关注接入层，部署方式，如集群部署、分布式部署等</span><br><span class="line">24,有没有容器化？</span><br><span class="line">25,有没有多机房部署？</span><br><span class="line">六,数据架构</span><br><span class="line">26,数据存储在哪？用了什么数据库，如 oracle、mysql；</span><br><span class="line">27,梳理 E-R 图；</span><br><span class="line">28,数据量有多少？是否有分库分表？</span><br><span class="line">29,用了哪些 nosql 库？</span><br><span class="line">30,有哪些数据同步任务？</span><br><span class="line">31,大数据框架的使用情况如何？</span><br><span class="line">七,系统运维</span><br><span class="line">32,什么时间容易出问题？比如电商 双11，对系统的压力很大，这时候很容易出问题；</span><br><span class="line">33,对关键功能是否有监控？需要看系统有配置了哪些报警项，监控了哪些方面；</span><br><span class="line">34,出了问题怎么解决？日志在哪？是否有全链路跟踪？是否有一些紧急操作，比如开关配置、降级、限流配置；</span><br><span class="line">35,系统有哪些坑？找开发同学回顾历史问题，以免踩坑。通过同事总结的 case，或者与负责的产品、运营、技术与了解。系统总会有一些坑，需要把这些坑填上。历史代码经过多次迭代总会导致复杂度高（分支、嵌套、循环很多），存在设计漏洞，性能隐患等，很难维护，这些就需要我们去重构了。记住有一句话：填的坑越大，能力越大；</span><br><span class="line">36,运营、客服反馈的常见问题有哪些？</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/27/artiecure-reference/" data-id="cluj9jc9r00063j1me0kd8irs" data-title="架构方案汇总" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-common-command-reference" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/24/common-command-reference/" class="article-date">
  <time class="dt-published" datetime="2023-05-24T10:44:40.000Z" itemprop="datePublished">2023-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/24/common-command-reference/">common-command-reference</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="常见指令参考"><a href="#常见指令参考" class="headerlink" title="常见指令参考"></a>常见指令参考</h1><h2 id="0-Java代码参考"><a href="#0-Java代码参考" class="headerlink" title="0,Java代码参考"></a>0,Java代码参考</h2><p>BizProcess</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@SuppressWarnings(value = &#123;&quot;rawtypes&quot;&#125;)</span><br><span class="line">public interface BizProcess &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    void doBizProcess(BizProcessContext context);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>BizProcessContext</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import com.google.common.collect.Maps;</span><br><span class="line">import lombok.Getter;</span><br><span class="line">import lombok.NoArgsConstructor;</span><br><span class="line">import lombok.Setter;</span><br><span class="line"></span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">public class BizProcessContext&lt;R, T&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private R request;</span><br><span class="line">    private T response;</span><br><span class="line">    private int code;</span><br><span class="line">    private String msg;</span><br><span class="line">    private Map&lt;String, Object&gt; parameterMap = Maps.newConcurrentMap();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static final int Success = 200;</span><br><span class="line"></span><br><span class="line">    public static final int Error = 500;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static &lt;R,T&gt; BizProcessContext&lt;R,T&gt; newInstance() &#123;</span><br><span class="line">        return new BizProcessContext&lt;R,T&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="1-k8s类别"><a href="#1-k8s类别" class="headerlink" title="1,k8s类别"></a>1,k8s类别</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete cm  `kubectl get cm -n flink-k8s |grep cluster|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;` -n flink-k8s &amp;&amp;  </span><br><span class="line"></span><br><span class="line">#批量rollout 指定的 sts</span><br><span class="line">kubectl rollout restart sts  flink-taskmanager flink-jobmanager  -n flink-k8s</span><br><span class="line"></span><br><span class="line">#强制删除指定pod</span><br><span class="line">kubectl delete pod  flink-taskmanager-0  --force --grace-period=0 -n flink-k8s</span><br><span class="line"></span><br><span class="line">#删除指定命名空间的数据</span><br><span class="line">kubectl  delete statefulset --all  -n insight-hr-v3 &amp;&amp; kubectl  delete deployment --all  -n insight-hr-v3 &amp;&amp; kubectl  delete service --all  -n insight-hr-v3 &amp;&amp; kubectl  delete ingress --all  -n insight-hr-v3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#通过关键字批量删除pod</span><br><span class="line">kubectl delete pod  `kubectl get pod -n demo-sit |grep $keyword|grep -v grep|awk &#x27;&#123;print $1&#125;&#x27;` -n demo-sit  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#删除pod标签</span><br><span class="line">kebectl delete pod -l app=www -n kube-system</span><br><span class="line"></span><br><span class="line">#查看pod描述</span><br><span class="line">kubectl describe pod xxx -n kube-system</span><br><span class="line"></span><br><span class="line">参考文档</span><br><span class="line">https://cloud.tencent.com/developer/article/1140076</span><br><span class="line">https://segmentfault.com/a/1190000039966780</span><br></pre></td></tr></table></figure>



<h2 id="2-docker类别"><a href="#2-docker类别" class="headerlink" title="2,docker类别"></a>2,docker类别</h2><h3 id="docker-设置镜像加速"><a href="#docker-设置镜像加速" class="headerlink" title="docker 设置镜像加速"></a>docker 设置镜像加速</h3><p> &#x2F;etc&#x2F;docker&#x2F;daemon.json </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://hub-mirror.c.163.com&quot;,</span><br><span class="line">    &quot;https://mirror.baidubce.com&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#删除所有docker镜像</span><br><span class="line">docker rmi -f `docker images -aq`</span><br><span class="line"></span><br><span class="line">#打包指定的docker文件,并自定义tag</span><br><span class="line">docker build -f ./dockerfile-maven . -t harbor.demo.com//authenticate-service:dev-20230309-8-676345</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#docker安装mysql</span><br><span class="line">docker run -p 3306:3306 --restart=always -it   --name mysql8  -v /etc/mysql:/etc/mysql -v /var/log/mysql:/var/log/mysql -v /var/lib/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:8.0.26 --lower_case_table_names=1 --secure-file-priv=/var/lib/mysql</span><br><span class="line"></span><br><span class="line">ALTER USER root@localhost IDENTIFIED WITH mysql_native_password BY &#x27;root&#x27;;</span><br><span class="line">远程：ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;root&#x27;;</span><br><span class="line"></span><br><span class="line">#安装redis，</span><br><span class="line"></span><br><span class="line">docker run --restart=always  -p 6379:6379 --name redis  -d redis redis-server --requirepass &quot;AAAaaa1234&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#安装rabbitmq</span><br><span class="line"></span><br><span class="line">docker run -d --name rabbitmq3.7.7 --restart=always -p 5672:5672 -p 15672:15672 -v /opt/mq/data:/var/lib/rabbitmq --hostname myRabbit -e RABBITMQ_DEFAULT_VHOST=my_vhost  -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=admin rabbitmq:3.7.7-management</span><br><span class="line"></span><br><span class="line">#部署nexus</span><br><span class="line"></span><br><span class="line">mkdir -p /root/docker/nexus/data &amp;&amp; chown -R 200 /root/docker/nexus/data/ &amp;&amp;  docker run -d --name nexus3 -p 8081:8081 --restart always -v /root/docker/nexus/data:/nexus-data sonatype/nexus3</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-mysql相关指令"><a href="#3-mysql相关指令" class="headerlink" title="3,mysql相关指令"></a>3,mysql相关指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#登录mysql 客户端</span><br><span class="line">mysql -h 192.1.3.1 -P 9030 -u root -p</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#查看mysql版本号</span><br><span class="line">select version();</span><br><span class="line"></span><br><span class="line"> select sleep(10);</span><br><span class="line"></span><br><span class="line">#创建用户,并授予相关权限</span><br><span class="line">CREATE USER &#x27;demo_cdc_&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;demo_cdc_@AAAaaa1234&#x27;;</span><br><span class="line">GRANT SELECT, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO &#x27;demo_cdc_&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;demo_cdc_@AAAaaa1234&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-kafka相关指令"><a href="#4-kafka相关指令" class="headerlink" title="4,kafka相关指令"></a>4,kafka相关指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#kafka启动</span><br><span class="line">sudo /opt/kafka/bin/kafka-server-start.sh -daemon /opt/kafka/config/server.properties</span><br><span class="line"></span><br><span class="line">#zookeeper启动</span><br><span class="line">sudo /opt/kafka/bin/zookeeper-server-start.sh -daemon /opt/kafka/config/zookeeper.properties </span><br><span class="line"></span><br><span class="line">#kafka关闭</span><br><span class="line">sudo /opt/kafka/bin/kafka-server-stop.sh </span><br><span class="line"></span><br><span class="line">sudo /opt/kafka/bin/zookeeper-server-stop.sh &amp;&amp; sudo /opt/kafka/bin/kafka-server-stop.sh </span><br><span class="line"></span><br><span class="line">#批量关闭指令,并清除kafka数据,zk数据</span><br><span class="line">sudo kill -9 `ps -ef|grep /opt/kafka|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;` &amp;&amp; sudo chmod -R 777 /opt/ &amp;&amp; sudo rm -rf /opt/zookeeper/data/version*/* &amp;&amp; sudo rm -rf /opt/kafka/logs/*</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-flink相关指令"><a href="#5-flink相关指令" class="headerlink" title="5,flink相关指令"></a>5,flink相关指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#统计Flink任务个数</span><br><span class="line">/opt/flink/bin/flink list -m 172.4.8.10:31081|grep RUNNING |wc -l</span><br><span class="line"></span><br><span class="line">#通过命名行发布fink任务</span><br><span class="line">/opt/flink/bin/flink run -m 172.4.3.10:31081 -d  -s s3p://flink-storage/flink-checkpoints/f860fa4c80791e6aa7b81def598d7f2f/chk-4384 -c com.flink..job.kafka.to.Job   /home/www/lib/flink-job.jar  --username nacos --password nacos --namespace flink --serverAddr http://172.4.3.70:3000  --group DEFAULT_GROUP --dataId flink-demo</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="6-doris相关指令"><a href="#6-doris相关指令" class="headerlink" title="6,doris相关指令"></a>6,doris相关指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">--创建外表RESOURCE</span><br><span class="line">DROP RESOURCE &quot;sqlserver_external&quot;;</span><br><span class="line">CREATE EXTERNAL RESOURCE &quot;sqlserver_external&quot;</span><br><span class="line">PROPERTIES (</span><br><span class="line">    &quot;type&quot; = &quot;odbc_catalog&quot;,</span><br><span class="line">    &quot;user&quot; = &quot;sa&quot;,</span><br><span class="line">    &quot;odbc_type&quot; = &quot;sqlserver&quot;,</span><br><span class="line">    &quot;password&quot; = &quot;1qaz1qaz&quot;,</span><br><span class="line">    &quot;host&quot; = &quot;172.6.2.47&quot;,</span><br><span class="line">    &quot;driver&quot; = &quot;MSSQL ODBC 17.4 Driver&quot;,</span><br><span class="line">    &quot;port&quot; = &quot;1433&quot;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SET enable_insert_strict = true;</span><br><span class="line">SET query_timeout = 259200 ;</span><br><span class="line"></span><br><span class="line">#创建外表建表语句</span><br><span class="line">DROP TABLE IF EXISTS `EXT_MSSQL_Resume`;</span><br><span class="line">CREATE EXTERNAL TABLE IF NOT EXISTS `EXT_MSSQL_Resume` (</span><br><span class="line">`Id`  VARCHAR(64)     NOT NULL  ,</span><br><span class="line">  `op_ts` DATETIME</span><br><span class="line">) ENGINE=ODBC</span><br><span class="line">PROPERTIES (</span><br><span class="line">    &quot;odbc_catalog_resource&quot; = &quot;sqlserver_external&quot;,</span><br><span class="line">    &quot;database&quot; = &quot;demo&quot; ,</span><br><span class="line">    &quot;table&quot; = &quot;demo&quot;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">--ddl</span><br><span class="line">DROP TABLE IF EXISTS `ODS_ResumeRelation`;</span><br><span class="line">CREATE TABLE IF NOT EXISTS `ODS_ResumeRelation`</span><br><span class="line">( </span><br><span class="line">	`Id`				varchar(48)		 NOT NULL,</span><br><span class="line">	`source` varchar(96) NOT NULL ,</span><br><span class="line"> 	`op_ts`  datetime NULL </span><br><span class="line"> ) UNIQUE KEY(`Id`,`source`) DISTRIBUTED BY HASH (`Id`,`source`) BUCKETS 32 </span><br><span class="line"> PROPERTIES(</span><br><span class="line"> &quot;in_memory&quot; = &quot;false&quot;,</span><br><span class="line">  &quot;replication_num&quot; = &quot;3&quot;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="7-nginx相关设置"><a href="#7-nginx相关设置" class="headerlink" title="7,nginx相关设置"></a>7,nginx相关设置</h2><h3 id="超时设置"><a href="#超时设置" class="headerlink" title="超时设置"></a>超时设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">proxy_connect_timeout</span><br><span class="line">proxy_read_timeout</span><br><span class="line">proxy_send_timeout</span><br><span class="line">keepalive_timeout </span><br><span class="line">client_header_timeout</span><br></pre></td></tr></table></figure>

<h3 id="搭建一个简单文件服务器"><a href="#搭建一个简单文件服务器" class="headerlink" title="搭建一个简单文件服务器"></a>搭建一个简单文件服务器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#user  nobody;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">#error_log  logs/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line"></span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">                listen 8088; </span><br><span class="line">                server_name 172.16.9.91.1;</span><br><span class="line">                root /home/www/flink-nginx/; # 存放文件的目录 </span><br><span class="line">                location / &#123; </span><br><span class="line">                        autoindex on; # 索引 </span><br><span class="line">                        autoindex_exact_size on; # 显示文件大小 </span><br><span class="line">                        autoindex_localtime on; # 显示文件时间 </span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="8-前端指令"><a href="#8-前端指令" class="headerlink" title="8,前端指令"></a>8,前端指令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install -g yarn</span><br><span class="line"></span><br><span class="line">set-executionpolicy remotesigned</span><br></pre></td></tr></table></figure>







<h2 id="9-windows端常见指令"><a href="#9-windows端常见指令" class="headerlink" title="9,windows端常见指令"></a>9,windows端常见指令</h2><h3 id="微信多开"><a href="#微信多开" class="headerlink" title="微信多开"></a>微信多开</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">start &quot;&quot; &quot;D:\app\Tencent\WeChat\WeChat.exe&quot;</span><br><span class="line">start &quot;&quot; &quot;D:\app\Tencent\WeChat\WeChat.exe&quot;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>









<h2 id="99-常见综合指令"><a href="#99-常见综合指令" class="headerlink" title="99,常见综合指令"></a>99,常见综合指令</h2><h3 id="批量合并git分支代码"><a href="#批量合并git分支代码" class="headerlink" title="批量合并git分支代码"></a>批量合并git分支代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">home=&quot;/mnt/d/git&quot;</span><br><span class="line">host=&quot;gitlab.com&quot;</span><br><span class="line">module=&quot;demo&quot;</span><br><span class="line">service_array=( &quot;demo-starter&quot; &quot;gatewar-service&quot; &quot;file-service&quot; &quot;message-service&quot; &quot;identity-service&quot; &quot;authenticate-service&quot; &quot;system-service&quot; &quot;content-service&quot; &quot;recruit-service&quot; &quot;callback-service&quot; &quot;task-service&quot; &quot;seo-service&quot; &quot;front-sso&quot; &quot;front-admin&quot; &quot;front-organization&quot; &quot;front-mobile&quot;)</span><br><span class="line">length=$&#123;#service_array[*]&#125;</span><br><span class="line">dev=&quot;dev&quot;</span><br><span class="line">sit=&quot;sit&quot;</span><br><span class="line"></span><br><span class="line">for(( i=0;i&lt;length;i++)) do</span><br><span class="line">	cd $home</span><br><span class="line">	declare service=$&#123;service_array[i]&#125;</span><br><span class="line">	echo &quot;开始拉取 $service $dev 分支&quot; </span><br><span class="line">	git clone -b dev http://$host/$module/$service.git</span><br><span class="line">	echo &quot;拉取 完成&quot;</span><br><span class="line">	echo &quot;开始合并开发 $dev 分支到 $sit 分支&quot;</span><br><span class="line">	cd $home/$service   </span><br><span class="line">	echo &quot;当前目录 `pwd` &quot;</span><br><span class="line">	git merge origin/sit &amp;&amp; git branch sit &amp;&amp;   git push origin sit </span><br><span class="line">	echo &quot;合并 $service 完成&quot;	  </span><br><span class="line">done;</span><br></pre></td></tr></table></figure>

<h3 id="通过shell批量统计flink任务个数"><a href="#通过shell批量统计flink任务个数" class="headerlink" title="通过shell批量统计flink任务个数"></a>通过shell批量统计flink任务个数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">sites=&quot;ZJ SHEN GZ AH CQ DL FC GX HEB HEN HN HUB JS JX KC LG MACAO MS NB OES PT QD SC SD SX SY SZ TJ XA XH XJ XM YTRC BJRC AHKJ SH&quot;</span><br><span class="line">joins=&quot;-&quot;</span><br><span class="line">strM=&quot;SLF4J&quot;</span><br><span class="line">for site in $sites</span><br><span class="line">do</span><br><span class="line">	masterdata=&quot;AFOneMasterdataSqlserverToKafkaJob&quot;	</span><br><span class="line">	for r in `/opt/flink/bin/flink list -m 192.1.83.170:31081 |grep $site$joins$masterdata|wc -l `;do</span><br><span class="line">		rr=$(echo r | grep &quot;$&#123;strM&#125;&quot;)</span><br><span class="line">		if [[ &quot;$rr&quot; == &quot;&quot; ]]</span><br><span class="line">                then</span><br><span class="line">                echo &quot; $site$joins$masterdata  $r &quot;</span><br><span class="line">        fi</span><br><span class="line">	done		</span><br><span class="line">	finance=&quot;AFOneFinanceSqlserverToKafkaJob&quot;</span><br><span class="line">	for f in `/opt/flink/bin/flink list -m 192.1.83.170:31081 |grep $site$joins$finance|wc -l `;do</span><br><span class="line">		ff=$(echo f | grep &quot;$&#123;strM&#125;&quot;)</span><br><span class="line">		if [[ &quot;$ff&quot; == &quot;&quot; ]]</span><br><span class="line">                then</span><br><span class="line">                echo &quot; $site$joins$finance  $f &quot;</span><br><span class="line">        fi</span><br><span class="line">	done</span><br><span class="line">	data=&quot;AFOneDataSqlserverToKafkaJob&quot;</span><br><span class="line">	for d in `/opt/flink/bin/flink list -m 192.1.83.170:31081 |grep $site$joins$data|wc -l `;do</span><br><span class="line">		dd=$(echo d | grep &quot;$&#123;strM&#125;&quot;)</span><br><span class="line">		if [[ &quot;$dd&quot; == &quot;&quot; ]]</span><br><span class="line">                then</span><br><span class="line">                echo &quot; $site$joins$data  $d &quot;</span><br><span class="line">        fi</span><br><span class="line">	done	</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<h3 id="通过shell批量停止flink任务"><a href="#通过shell批量停止flink任务" class="headerlink" title="通过shell批量停止flink任务"></a>通过shell批量停止flink任务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">strM=&quot;SLF4J&quot;</span><br><span class="line">for jobid in `/opt/flink/bin/flink list -m 192.1.3.70:31081|grep Job |awk &#x27;&#123;print $4 &#125;&#x27;`;do</span><br><span class="line">        result=$(echo $jobid | grep &quot;$&#123;strM&#125;&quot;)</span><br><span class="line">        if [[ &quot;$result&quot; == &quot;&quot; ]]</span><br><span class="line">                then</span><br><span class="line">                echo &quot; start stop $jobid *******************&quot;</span><br><span class="line">                /home/www/flink/bin/flink stop $jobid -m 192.1.3.70:31081</span><br><span class="line">                echo &quot; success stop $jobid success ********************&quot;</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="打包Java参考命令行"><a href="#打包Java参考命令行" class="headerlink" title="打包Java参考命令行"></a>打包Java参考命令行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">if test ! -x &quot;$(command -v java)&quot;; then</span><br><span class="line">  echo &#x27;Error: java is not installed.&#x27; &gt;&amp;2</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if test ! -x &quot;$(command -v mvn)&quot;; then</span><br><span class="line">  echo &#x27;Error: Maven is not installed.&#x27; &gt;&amp;2</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">mvn clean package -DskipTests</span><br><span class="line"></span><br><span class="line">if test $? -eq 0; then</span><br><span class="line">  echo &quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 打包成功 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 打包失败 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="推镜像命令行"><a href="#推镜像命令行" class="headerlink" title="推镜像命令行"></a>推镜像命令行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">harbor=&#x27;harbor.com/&#x27;</span><br><span class="line">module=&#x27;demo/&#x27;</span><br><span class="line">appname=&#x27;demo-monitor-v1.0.0&#x27;-`date +%Y%m%d%H%M`</span><br><span class="line">image=$harbor$module$appname</span><br><span class="line">echo ---------------Build image...------------------</span><br><span class="line">echo</span><br><span class="line">   docker build -f ./dockerfile-flink . -t $image</span><br><span class="line">echo</span><br><span class="line">echo ---------------login harbor------------------</span><br><span class="line">   docker login -u demo -p AAAaaa1234 $harbor</span><br><span class="line">   </span><br><span class="line">echo</span><br><span class="line">echo ---------------push image------------------</span><br><span class="line">echo</span><br><span class="line">   docker push $image</span><br><span class="line">echo</span><br><span class="line"></span><br><span class="line">echo ---------------logout harbor------------------</span><br><span class="line">echo</span><br><span class="line">   docker logout $harbor</span><br><span class="line">echo</span><br></pre></td></tr></table></figure>

<h3 id="jdk8统一dockerfile镜像-基于ubutu18-04"><a href="#jdk8统一dockerfile镜像-基于ubutu18-04" class="headerlink" title="jdk8统一dockerfile镜像,基于ubutu18.04"></a>jdk8统一dockerfile镜像,基于ubutu18.04</h3><p>打包指令参考</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f ./dockerfile-jdk8 . -t harbor.com/library/ubutu-jdk8:1.1.0</span><br></pre></td></tr></table></figure>

<p>dockerfile</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:18.04</span><br><span class="line">COPY jdk.tar /opt/</span><br><span class="line">COPY sources.list /etc/apt/sources.list</span><br><span class="line">RUN mkdir /usr/lib/jvm</span><br><span class="line">RUN tar -xvf /opt/jdk.tar -C /usr/lib/jvm</span><br><span class="line">ENV TZ=Asia/Shanghai \</span><br><span class="line">    DEBIAN_FRONTEND=noninteractive</span><br><span class="line"></span><br><span class="line">RUN apt update \</span><br><span class="line">    &amp;&amp; apt install -y tzdata \</span><br><span class="line">    &amp;&amp; ln -fs /usr/share/zoneinfo/$&#123;TZ&#125; /etc/localtime \</span><br><span class="line">    &amp;&amp; echo $&#123;TZ&#125; &gt; /etc/timezone \</span><br><span class="line">    &amp;&amp; dpkg-reconfigure --frontend noninteractive tzdata \</span><br><span class="line">    &amp;&amp; sed -i &quot;s@/archive.ubuntu.com/@/mirrors.163.com/@g&quot; /etc/apt/sources.list \</span><br><span class="line">    &amp;&amp; rm -rf /var/lib/apt/lists/* \</span><br><span class="line">    &amp;&amp; apt-get update --fix-missing -o Acquire::http::No-Cache=True \</span><br><span class="line">    &amp;&amp; apt-get install -y net-tools \ </span><br><span class="line">    &amp;&amp; apt-get install -y iputils-ping \</span><br><span class="line">    &amp;&amp; apt-get install -y curl \</span><br><span class="line">    &amp;&amp; apt-get install -y telnet </span><br><span class="line">ENV JAVA_HOME /usr/lib/jvm/jdk1.8.0_221</span><br><span class="line">ENV JRE_HOME $&#123;JAVA_HOME&#125;/jre</span><br><span class="line">ENV CLASSPATH .:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">ENV PATH $&#123;JAVA_HOME&#125;/bin:$PATH</span><br><span class="line">RUN java -version</span><br></pre></td></tr></table></figure>

<p>sources.list</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span><br><span class="line"># newer versions of the distribution.</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ bionic main restricted</span><br><span class="line"># deb-src http://archive.ubuntu.com/ubuntu/ bionic main restricted</span><br><span class="line"></span><br><span class="line">## Major bug fix updates produced after the final release of the</span><br><span class="line">## distribution.</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ bionic-updates main restricted</span><br><span class="line"># deb-src http://archive.ubuntu.com/ubuntu/ bionic-updates main restricted</span><br><span class="line"></span><br><span class="line">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><br><span class="line">## team. Also, please note that software in universe WILL NOT receive any</span><br><span class="line">## review or updates from the Ubuntu security team.</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ bionic universe</span><br><span class="line"># deb-src http://archive.ubuntu.com/ubuntu/ bionic universe</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ bionic-updates universe</span><br><span class="line"># deb-src http://archive.ubuntu.com/ubuntu/ bionic-updates universe</span><br><span class="line"></span><br><span class="line">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><br><span class="line">## team, and may not be under a free licence. Please satisfy yourself as to</span><br><span class="line">## your rights to use the software. Also, please note that software in</span><br><span class="line">## multiverse WILL NOT receive any review or updates from the Ubuntu</span><br><span class="line">## security team.</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ bionic multiverse</span><br><span class="line"># deb-src http://archive.ubuntu.com/ubuntu/ bionic multiverse</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ bionic-updates multiverse</span><br><span class="line"># deb-src http://archive.ubuntu.com/ubuntu/ bionic-updates multiverse</span><br><span class="line"></span><br><span class="line">## N.B. software from this repository may not have been tested as</span><br><span class="line">## extensively as that contained in the main release, although it includes</span><br><span class="line">## newer versions of some applications which may provide useful features.</span><br><span class="line">## Also, please note that software in backports WILL NOT receive any review</span><br><span class="line">## or updates from the Ubuntu security team.</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"># deb-src http://archive.ubuntu.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">## Uncomment the following two lines to add software from Canonical&#x27;s</span><br><span class="line">## &#x27;partner&#x27; repository.</span><br><span class="line">## This software is not part of Ubuntu, but is offered by Canonical and the</span><br><span class="line">## respective vendors as a service to Ubuntu users.</span><br><span class="line"># deb http://archive.canonical.com/ubuntu bionic partner</span><br><span class="line"># deb-src http://archive.canonical.com/ubuntu bionic partner</span><br><span class="line"></span><br><span class="line">deb http://security.ubuntu.com/ubuntu/ bionic-security main restricted</span><br><span class="line"># deb-src http://security.ubuntu.com/ubuntu/ bionic-security main restricted</span><br><span class="line">deb http://security.ubuntu.com/ubuntu/ bionic-security universe</span><br><span class="line"># deb-src http://security.ubuntu.com/ubuntu/ bionic-security universe</span><br><span class="line">deb http://security.ubuntu.com/ubuntu/ bionic-security multiverse</span><br><span class="line"># deb-src http://security.ubuntu.com/ubuntu/ bionic-security multiverse</span><br><span class="line"></span><br><span class="line">deb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial universe</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-properties</span><br><span class="line">deb http://archive.canonical.com/ubuntu xenial partner</span><br><span class="line">deb-src http://archive.canonical.com/ubuntu xenial partner</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse</span><br></pre></td></tr></table></figure>

<p>项目参考dockerfile</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FROM harbor.com/library/ubutu-jdk8:1.1.0</span><br><span class="line">WORKDIR /opt/</span><br><span class="line">ENV SERVICE_VERSION=&quot;1.0.0&quot; </span><br><span class="line">ENV SERVICE_NAME=&#x27;recruit-service&#x27; </span><br><span class="line">ENV JAVA_OPTS=&#x27;-server -Xms2048m -Xmx2048m  -Xss1024k -XX:SurvivorRatio=8 -XX:+UseConcMarkSweepGC -Dfile.encoding=utf-8&#x27;</span><br><span class="line">COPY ./recruit-core/target/$&#123;SERVICE_NAME&#125;-$&#123;SERVICE_VERSION&#125;.jar /opt/</span><br><span class="line"># 启动jar</span><br><span class="line">CMD java  $&#123;JAVA_OPTS&#125; -jar /opt/$&#123;SERVICE_NAME&#125;-$&#123;SERVICE_VERSION&#125;.jar</span><br></pre></td></tr></table></figure>



<p>maven的配置settings.xml 文件参考</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span><br><span class="line">          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">          xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 本地存储路径 默认路径$&#123;user.home&#125;/.m2/repository --&gt;</span><br><span class="line">   &lt;!--  &lt;localRepository&gt;/Users/Nicholas/.m2/repository&lt;/localRepository&gt;  --&gt;</span><br><span class="line">   &lt;localRepository&gt;D:\java\repository&lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 表示Maven是否需要在离线模式下运行。</span><br><span class="line">         | 如果构建系统需要在离线模式下运行，则为true。</span><br><span class="line">         | 当由于网络设置原因或者安全因素，构建服务器不能连接远程仓库的时候，该配置就十分有用。</span><br><span class="line">         | 默认为false。</span><br><span class="line">  --&gt;</span><br><span class="line">    &lt;offline&gt;false&lt;/offline&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!-- Maven是否需要使用plugin-registry.xml文件来管理插件版本。</span><br><span class="line">         | 如果需要让Maven使用文件$&#123;user.home&#125;/.m2/plugin-registry.xml来管理插件版本，则设为true。默认为false。</span><br><span class="line">  --&gt;</span><br><span class="line">    &lt;usePluginRegistry&gt;false&lt;/usePluginRegistry&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!-- 当插件的组织Id（groupId）没有显式提供时，供搜寻插件组织Id（groupId）的列表。</span><br><span class="line">         | 该元素包含一个pluginGroup元素列表，每个子元素包含了一个组织Id（groupId）。</span><br><span class="line">         | 当我们使用某个插件，并且没有在命令行为其提供组织Id（groupId）的时候，Maven就会使用该列表。</span><br><span class="line">         | 默认情况下该列表包含了org.apache.maven.plugins和org.codehaus.mojo</span><br><span class="line">  &lt;pluginGroups&gt;</span><br><span class="line">        plugin的组织Id（groupId）</span><br><span class="line">    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;</span><br><span class="line">  &lt;/pluginGroups&gt;</span><br><span class="line">  --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 配置服务端的一些设置</span><br><span class="line">			| 一些设置如安全证书不应该和pom.xml一起分发。</span><br><span class="line">			| 这种类型的信息应该存在于构建服务器上的settings.xml文件中。</span><br><span class="line">			| settings.xml中server元素下id的值必须与POM中repository或snapshotRepository下id的值完全一致。将认证信息放到settings下而非POM中，是因为POM往往是它人可见的，而settings.xml是本地的 --&gt;</span><br><span class="line">	&lt;servers&gt;</span><br><span class="line">		&lt;server&gt;</span><br><span class="line">			&lt;id&gt;example-releases&lt;/id&gt;</span><br><span class="line">			&lt;username&gt;upload&lt;/username&gt;</span><br><span class="line">			&lt;password&gt;upload&lt;/password&gt;</span><br><span class="line">		&lt;/server&gt;</span><br><span class="line">		&lt;server&gt;</span><br><span class="line">			&lt;id&gt;example-group&lt;/id&gt;</span><br><span class="line">			&lt;username&gt;upload&lt;/username&gt;</span><br><span class="line">			&lt;password&gt;upload&lt;/password&gt;</span><br><span class="line">		&lt;/server&gt;</span><br><span class="line">	&lt;/servers&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;profiles&gt;</span><br><span class="line">		&lt;profile&gt;</span><br><span class="line">			&lt;id&gt;examplesh&lt;/id&gt;</span><br><span class="line">			&lt;properties&gt;</span><br><span class="line">				&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</span><br><span class="line">				&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</span><br><span class="line">				&lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt;</span><br><span class="line">			&lt;/properties&gt;</span><br><span class="line">			&lt;repositories&gt;</span><br><span class="line">				&lt;repository&gt;</span><br><span class="line">					&lt;id&gt;examplesh&lt;/id&gt;</span><br><span class="line">					&lt;url&gt;http://nexus.examplesh.com/repository/maven-public/&lt;/url&gt;</span><br><span class="line">					&lt;snapshots&gt;</span><br><span class="line">                        &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;</span><br><span class="line">                    &lt;/snapshots&gt;</span><br><span class="line">					&lt;releases&gt;</span><br><span class="line">						&lt;!--支持从此仓库下载release版本--&gt;</span><br><span class="line">						&lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">						&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;</span><br><span class="line">					&lt;/releases&gt;</span><br><span class="line">				&lt;/repository&gt;</span><br><span class="line">			&lt;/repositories&gt;</span><br><span class="line"></span><br><span class="line">				&lt;!--  插件仓库 --&gt;</span><br><span class="line">			&lt;pluginRepositories&gt;</span><br><span class="line">				&lt;pluginRepository&gt;</span><br><span class="line">					&lt;id&gt;examplesh-plugin&lt;/id&gt;</span><br><span class="line">					&lt;url&gt;http://nexus.examplesh.com/repository/maven-public/&lt;/url&gt;</span><br><span class="line">					&lt;releases&gt;</span><br><span class="line">						&lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;</span><br><span class="line">					&lt;/releases&gt;</span><br><span class="line">					&lt;snapshots&gt;</span><br><span class="line">						&lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;</span><br><span class="line">					&lt;/snapshots&gt;</span><br><span class="line">				&lt;/pluginRepository&gt;</span><br><span class="line">			&lt;/pluginRepositories&gt;</span><br><span class="line">		&lt;/profile&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;profile&gt;</span><br><span class="line">            &lt;id&gt;example&lt;/id&gt;</span><br><span class="line">            &lt;properties&gt;</span><br><span class="line">                &lt;skipTests&gt;true&lt;/skipTests&gt;</span><br><span class="line">                &lt;!--设置仓库上传地址--&gt;</span><br><span class="line">                &lt;nexus.snapshots.repository&gt;http://nexus.exampleit.com.cn/repository/example-snapshot</span><br><span class="line">                &lt;/nexus.snapshots.repository&gt;</span><br><span class="line">                &lt;nexus.releases.repository&gt;http://nexus.exampleit.com.cn/repository/example-release</span><br><span class="line">                &lt;/nexus.releases.repository&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">            &lt;pluginRepositories&gt;</span><br><span class="line">                &lt;pluginRepository&gt;</span><br><span class="line">                    &lt;id&gt;aliyun&lt;/id&gt;</span><br><span class="line">                    &lt;name&gt;aliyun&lt;/name&gt;</span><br><span class="line">                    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">                &lt;/pluginRepository&gt;</span><br><span class="line">            &lt;/pluginRepositories&gt;</span><br><span class="line"></span><br><span class="line">            &lt;repositories&gt;</span><br><span class="line">                &lt;repository&gt;</span><br><span class="line">                    &lt;id&gt;example-group&lt;/id&gt;</span><br><span class="line">                    &lt;name&gt;example-group&lt;/name&gt;</span><br><span class="line">                    &lt;url&gt;http://nexus.exampleit.com.cn/repository/example-group/&lt;/url&gt;</span><br><span class="line">                    &lt;snapshots&gt;</span><br><span class="line">                        &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;</span><br><span class="line">                    &lt;/snapshots&gt;</span><br><span class="line">                    &lt;releases&gt;</span><br><span class="line">                        &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">                    &lt;/releases&gt;</span><br><span class="line">                &lt;/repository&gt;</span><br><span class="line">            &lt;/repositories&gt;</span><br><span class="line">        &lt;/profile&gt;</span><br><span class="line">	&lt;/profiles&gt;</span><br><span class="line">	&lt;activeProfiles&gt;  </span><br><span class="line">		&lt;activeProfile&gt;example&lt;/activeProfile&gt;</span><br><span class="line">	&lt;/activeProfiles&gt;</span><br><span class="line"></span><br><span class="line">&lt;/settings&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>











<h3 id="flink1-16-打包dockerfile"><a href="#flink1-16-打包dockerfile" class="headerlink" title="flink1.16 打包dockerfile"></a>flink1.16 打包dockerfile</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">FROM flink:1.16.2-scala_2.12-java8</span><br><span class="line"></span><br><span class="line">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">RUN echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone</span><br><span class="line"></span><br><span class="line">RUN sed -i &#x27;s/^jdk.tls.disabledAlgorithms=.*/jdk.tls.disabledAlgorithms=RC4, DES, MD5withRSA, \\/&#x27; /opt/java/openjdk/lib/security/java.security</span><br><span class="line">RUN sed -ri -e &#x27;s/(MinProtocol\s*=\s*)TLSv1\.2/\1None/&#x27; /etc/ssl/openssl.cnf \</span><br><span class="line">    &amp;&amp; sed -ri -e &#x27;s/(CipherString\s*=\s*DEFAULT)@SECLEVEL=2/\1/&#x27; /etc/ssl/openssl.cnf</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">WORKDIR /opt/flink</span><br><span class="line">RUN ls -l </span><br><span class="line">RUN mkdir ./plugins/s3-fs-presto &amp;&amp; chown flink:flink -R ./plugins/s3-fs-presto &amp;&amp; cp ./opt/flink-s3-fs-presto-1.16.2.jar ./plugins/s3-fs-presto/ </span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h3 id="k8s-service类别"><a href="#k8s-service类别" class="headerlink" title="k8s service类别"></a>k8s service类别</h3><h4 id="ExternalName"><a href="#ExternalName" class="headerlink" title="ExternalName"></a>ExternalName</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: base-db</span><br><span class="line">  namespace: -sit</span><br><span class="line">  labels:</span><br><span class="line">    app: -base-db</span><br><span class="line">spec:</span><br><span class="line">  type: ExternalName</span><br><span class="line">  externalName: -base-db.dev.svc.cluster.local  </span><br><span class="line">  ports:</span><br><span class="line">  - port: 3306</span><br><span class="line">    targetPort: 3306</span><br><span class="line">    protocol: TCP</span><br><span class="line">  selector:</span><br><span class="line">    app: -base-db</span><br></pre></td></tr></table></figure>

<h4 id="Endpoint"><a href="#Endpoint" class="headerlink" title="Endpoint"></a>Endpoint</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">kind: Endpoints</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: kafka</span><br><span class="line">  namespace: ciicsh-zhaopin-sit</span><br><span class="line">subsets:</span><br><span class="line">  - addresses:</span><br><span class="line">      - ip: 172.16.112.91 </span><br><span class="line">    ports:</span><br><span class="line">      - port: 9092</span><br><span class="line">---</span><br><span class="line">kind: Service</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: kafka</span><br><span class="line">  namespace: ciicsh-zhaopin-sit  </span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">    - protocol: TCP</span><br><span class="line">      port: 9092</span><br><span class="line">      targetPort: 9092</span><br></pre></td></tr></table></figure>

<h3 id="k8s创建nacos"><a href="#k8s创建nacos" class="headerlink" title="k8s创建nacos"></a>k8s创建nacos</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line">kind: Endpoints</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: mysql</span><br><span class="line">  namespace: dev</span><br><span class="line">subsets:</span><br><span class="line">  - addresses:</span><br><span class="line">      - ip: 172.16.9.91</span><br><span class="line">    ports:</span><br><span class="line">      - port: 3306</span><br><span class="line">---</span><br><span class="line">kind: Service</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: mysql</span><br><span class="line">  namespace: dev  </span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">    - protocol: TCP</span><br><span class="line">      port: 3306</span><br><span class="line">      targetPort: 3306  </span><br><span class="line">---</span><br><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: nacos</span><br><span class="line">  annotations:</span><br><span class="line">    kubernetes.io/ingress.class: &quot;nginx&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/client-body-buffer-size: &quot;100m&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/keepalive-timeout: &quot;360&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/proxy-body-size: &quot;50m&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/proxy-connect-timeout: &quot;360&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/proxy-read-timeout: &quot;360&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/proxy-send-timeout: &quot;360&quot;</span><br><span class="line">    nginx.ingress.kubernetes.io/upstream-keepalive-timeout: &quot;360&quot;</span><br><span class="line">spec:</span><br><span class="line">  rules:</span><br><span class="line">  - host: nacos-dev.tstk8s.sh.com</span><br><span class="line">    http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: &quot;/&quot;</span><br><span class="line">        backend:</span><br><span class="line">          serviceName: nacos</span><br><span class="line">          servicePort: 8848 </span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: nacos</span><br><span class="line">  namespace: dev</span><br><span class="line">  labels:</span><br><span class="line">    app: nacos</span><br><span class="line">spec:</span><br><span class="line">  type: NodePort</span><br><span class="line">  ports:</span><br><span class="line">    - port: 8848</span><br><span class="line">      name: server</span><br><span class="line">      targetPort: 8848</span><br><span class="line">      nodePort: 31009</span><br><span class="line">    - port: 9848</span><br><span class="line">      name: client-rpc</span><br><span class="line">      targetPort: 9848</span><br><span class="line">    - port: 9849</span><br><span class="line">      name: raft-rpc</span><br><span class="line">      targetPort: 9849</span><br><span class="line">      ## 兼容1.4.x版本的选举端口</span><br><span class="line">    - port: 7848</span><br><span class="line">      name: old-raft-rpc</span><br><span class="line">      targetPort: 7848</span><br><span class="line">  selector:</span><br><span class="line">    app: nacos</span><br><span class="line">---</span><br><span class="line">kind: ConfigMap</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: nacos-cm</span><br><span class="line">  namespace: dev</span><br><span class="line">  labels:</span><br><span class="line">    app.kubernetes.io/managed-by: Helm</span><br><span class="line">  annotations:</span><br><span class="line">    meta.helm.sh/release-name: nacos</span><br><span class="line">    meta.helm.sh/release-namespace: nacos</span><br><span class="line">data:</span><br><span class="line">  mysql.host: mysql</span><br><span class="line">  mysql.db.name: _base_nacos</span><br><span class="line">  mysql.param: &gt;-</span><br><span class="line">    characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useSSL=false</span><br><span class="line">  mysql.password: root</span><br><span class="line">  mysql.port: &#x27;3306&#x27;</span><br><span class="line">  mysql.user: root</span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: StatefulSet</span><br><span class="line">metadata:</span><br><span class="line">  name: nacos</span><br><span class="line">  namespace: dev</span><br><span class="line">spec:</span><br><span class="line">  serviceName: nacos</span><br><span class="line">  # 单机模式设置成1，集群模式设置成3</span><br><span class="line">  replicas: 1</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nacos</span><br><span class="line">      annotations:</span><br><span class="line">        pod.alpha.kubernetes.io/initialized: &quot;true&quot;</span><br><span class="line">    spec:</span><br><span class="line">      volumes:</span><br><span class="line">        - name: data</span><br><span class="line">          emptyDir: &#123;&#125;</span><br><span class="line">      containers:</span><br><span class="line">        - name: nacos</span><br><span class="line">          imagePullPolicy: Always</span><br><span class="line">          image: harbor.sh.com/base/nacos-server:1.4.1</span><br><span class="line">          resources:</span><br><span class="line">            requests:</span><br><span class="line">              memory: &quot;256Mi&quot;</span><br><span class="line">              cpu: &quot;250m&quot;</span><br><span class="line">          volumeMounts:</span><br><span class="line">            - name: data</span><br><span class="line">              mountPath: /home/nacos/plugins/peer-finder</span><br><span class="line">              subPath: peer-finder</span><br><span class="line">            - name: data</span><br><span class="line">              mountPath: /home/nacos/data</span><br><span class="line">              subPath: data</span><br><span class="line">            - name: data</span><br><span class="line">              mountPath: /home/nacos/logs</span><br><span class="line">              subPath: logs</span><br><span class="line">          terminationMessagePath: /dev/termination-log</span><br><span class="line">          terminationMessagePolicy: File</span><br><span class="line">          imagePullPolicy: IfNotPresent                            </span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: 8848</span><br><span class="line">              name: client</span><br><span class="line">            - containerPort: 9848</span><br><span class="line">              name: client-rpc</span><br><span class="line">            - containerPort: 9849</span><br><span class="line">              name: raft-rpc</span><br><span class="line">            - containerPort: 7848</span><br><span class="line">              name: old-raft-rpc</span><br><span class="line">          env:</span><br><span class="line">            - name: NACOS_REPLICAS</span><br><span class="line">              # 单机模式设置成1，集群模式设置成3</span><br><span class="line">              value: &quot;1&quot;</span><br><span class="line">            - name: MYSQL_SERVICE_HOST # 添加 mysql 访问地址的环境变量</span><br><span class="line">              valueFrom:</span><br><span class="line">                configMapKeyRef:</span><br><span class="line">                  name: nacos-cm</span><br><span class="line">                  key: mysql.host</span><br><span class="line">            - name: MYSQL_SERVICE_DB_NAME</span><br><span class="line">              valueFrom:</span><br><span class="line">                configMapKeyRef:</span><br><span class="line">                  name: nacos-cm</span><br><span class="line">                  key: mysql.db.name</span><br><span class="line">            - name: MYSQL_SERVICE_PORT</span><br><span class="line">              valueFrom:</span><br><span class="line">                configMapKeyRef:</span><br><span class="line">                  name: nacos-cm</span><br><span class="line">                  key: mysql.port</span><br><span class="line">            - name: MYSQL_SERVICE_USER</span><br><span class="line">              valueFrom:</span><br><span class="line">                configMapKeyRef:</span><br><span class="line">                  name: nacos-cm</span><br><span class="line">                  key: mysql.user</span><br><span class="line">            - name: MYSQL_SERVICE_PASSWORD</span><br><span class="line">              valueFrom:</span><br><span class="line">                configMapKeyRef:</span><br><span class="line">                  name: nacos-cm</span><br><span class="line">                  key: mysql.password</span><br><span class="line">            - name: NACOS_SERVER_PORT</span><br><span class="line">              value: &quot;8848&quot;</span><br><span class="line">            - name: NACOS_APPLICATION_PORT</span><br><span class="line">              value: &quot;8848&quot;</span><br><span class="line">            - name: PREFER_HOST_MODE</span><br><span class="line">              value: &quot;hostname&quot;</span><br><span class="line">            - name: MYSQL_SERVICE_DB_PARAM</span><br><span class="line">              valueFrom:</span><br><span class="line">                configMapKeyRef:</span><br><span class="line">                  name: nacos-cm</span><br><span class="line">                  key: mysql.param              </span><br><span class="line">            #- name: NACOS_SERVERS</span><br><span class="line">              # 单机模式设置成nacos-0.xxxx,集群模式要添加：nacos-1.xxxx和nacos-2.xxxxx</span><br><span class="line">              #value: &quot;nacos-0.nacos.default.svc.cluster.local:8848 nacos-1.nacos.default.svc.cluster.local:8848 nacos-2.nacos.default.svc.cluster.local:8848&quot;</span><br><span class="line">            - name: MODE</span><br><span class="line">              # 单机部署，value: &quot;standalone&quot; </span><br><span class="line">              # 集群部署，value: &quot;cluster&quot;    </span><br><span class="line">              value: &quot;standalone&quot;  </span><br><span class="line">            - name: SPRING_DATASOURCE_PLATFORM</span><br><span class="line">              value: mysql  </span><br><span class="line">            - name: NACOS_AUTH_ENABLE</span><br><span class="line">              value: &#x27;false&#x27;        </span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: nacos</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/24/common-command-reference/" data-id="cluj9jc9u00093j1m6skj44jo" data-title="common-command-reference" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-how-to-read-source-code" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/20/how-to-read-source-code/" class="article-date">
  <time class="dt-published" datetime="2023-05-20T14:53:33.000Z" itemprop="datePublished">2023-05-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/redis/">redis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/20/how-to-read-source-code/">Redis 源码阅读</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一-阅读Redis源码的步骤"><a href="#一-阅读Redis源码的步骤" class="headerlink" title="一,阅读Redis源码的步骤"></a>一,阅读Redis源码的步骤</h1><p><img src="/2023/05/20/how-to-read-source-code/source.png" alt="source"></p>
<h1 id="二-Redis-源码目录介绍"><a href="#二-Redis-源码目录介绍" class="headerlink" title="二,Redis 源码目录介绍"></a>二,Redis 源码目录介绍</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/20/how-to-read-source-code/" data-id="cluj9jca1000p3j1md6qo3y9k" data-title="Redis 源码阅读" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-writing" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/20/writing/" class="article-date">
  <time class="dt-published" datetime="2023-05-20T11:56:56.000Z" itemprop="datePublished">2023-05-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/IELTS/">IELTS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/20/writing/">雅思写作</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一-写作思路"><a href="#一-写作思路" class="headerlink" title="一,写作思路"></a>一,写作思路</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1. Analyze the question and identify the key words and the task. </span><br><span class="line">For example, in this question, the key words are &quot;crime&quot;, </span><br><span class="line">&quot;longer prison sentences&quot;, &quot;alternative ways&quot;, </span><br><span class="line">and the task is to discuss both views and give your opinion.</span><br><span class="line">2. Plan your essay structure and outline your main points for each paragraph. </span><br><span class="line">For example, you can use the following structure:</span><br><span class="line">- Introduction: Introduce the topic and state your thesis </span><br><span class="line">(your opinion or position on the issue).</span><br><span class="line">- Body paragraph 1: Explain one view that supports longer </span><br><span class="line">prison sentences and give reasons and examples to support it.</span><br><span class="line">- Body paragraph 2: Explain another view that supports alternative </span><br><span class="line">ways of reducing crime and give reasons and examples to support it.</span><br><span class="line">- Body paragraph 3: Compare and contrast the two views and explain </span><br><span class="line">why you agree or disagree with them.</span><br><span class="line">- Conclusion: Summarize your main points and restate your thesis.</span><br><span class="line">3. Write your essay using clear and coherent sentences, linking words </span><br><span class="line">and transitions, and appropriate vocabulary and grammar. For example, </span><br><span class="line">you can use words like &quot;however&quot;, &quot;therefore&quot;, &quot;on the other hand&quot;, etc. </span><br><span class="line">to show contrast or cause-effect relationships between ideas.</span><br><span class="line">4. Review your essay and check for spelling, punctuation, and formatting </span><br><span class="line">errors. You can also use online tools like Grammarly or Hemingway to help you with this step.</span><br></pre></td></tr></table></figure>

<h2 id="二-范文举例"><a href="#二-范文举例" class="headerlink" title="二,范文举例"></a>二,范文举例</h2><h3 id="题目1"><a href="#题目1" class="headerlink" title="题目1"></a>题目1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Some people think that the best way to reduce crime </span><br><span class="line">is to give longer prison sentences. </span><br><span class="line">Others, however, believe there are better alternative ways </span><br><span class="line">of reducing crime. Discuss both views and give your opinion.</span><br></pre></td></tr></table></figure>



<h3 id="答案参考"><a href="#答案参考" class="headerlink" title="答案参考"></a>答案参考</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Crime is a serious problem that affects many societies around the world. </span><br><span class="line">Some people think that the best way to reduce crime is to give </span><br><span class="line">longer prison sentences to offenders. </span><br><span class="line">Others, however, believe that there are better alternative ways </span><br><span class="line">of reducing crime, such as education, rehabilitation, or community service. </span><br><span class="line">	In this essay, I will discuss both views and give my opinion.</span><br><span class="line">	On the one hand, some people argue that longer prison sentences </span><br><span class="line">are effective in deterring crime and protecting the public. </span><br><span class="line">They believe that harsh punishments can discourage potential criminals </span><br><span class="line">from committing crimes and send a clear message that crime does not pay. </span><br><span class="line">Moreover, they claim that longer prison sentences can isolate dangerous criminals </span><br><span class="line">from society and prevent them from harming innocent people. </span><br><span class="line">For example, a study by the University of Chicago found that each additional year of imprisonment reduces the probability of reoffending by 4%. </span><br><span class="line">Therefore, longer prison sentences can reduce crime by incapacitating and reforming offenders.</span><br><span class="line">	On the other hand, other people contend that alternative ways of reducing crime are more beneficial and humane. </span><br><span class="line">They believe that longer prison sentences are costly, ineffective, and unjust. </span><br><span class="line">They argue that longer prison sentences can overcrowd prisons and increase the risk of violence and corruption. </span><br><span class="line">Furthermore, they assert that longer prison sentences can have negative effects on offenders and their families, </span><br><span class="line">such as mental health problems, social stigma, and poverty. For example, a report by the Prison Reform Trust found that 65% of children with imprisoned parents are at risk of developing antisocial behavior. Therefore, alternative ways of reducing crime can address the root causes of crime and help offenders reintegrate into society.</span><br><span class="line">	In my opinion, I agree with the second view that alternative ways </span><br><span class="line">	of reducing crime are preferable to longer prison sentences. </span><br><span class="line">I think that longer prison sentences are not a solution to crime but a symptom of a deeper social problem. </span><br><span class="line">I believe that crime can be reduced by providing more opportunities and support for disadvantaged groups, </span><br><span class="line">such as education, employment, health care, and counseling. </span><br><span class="line">I also think that crime can be reduced by promoting restorative justice and community service, </span><br><span class="line">which can foster empathy and responsibility among offenders and victims. </span><br><span class="line">I believe that these measures can prevent crime in the long term and create a safer and more harmonious society.</span><br><span class="line">	In conclusion, there are different views on how to reduce crime in society. </span><br><span class="line">Some people support longer prison sentences while others favor alternative ways of reducing crime. </span><br><span class="line">I have discussed both views and given my opinion. </span><br><span class="line">I think that alternative ways of reducing crime are more effective </span><br><span class="line">and humane than longer prison sentences.</span><br></pre></td></tr></table></figure>

<h2 id="三-范文练习"><a href="#三-范文练习" class="headerlink" title="三,范文练习"></a>三,范文练习</h2><h4 id="例子一"><a href="#例子一" class="headerlink" title="例子一,"></a>例子一,</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Some people think that human needs for farmland, </span><br><span class="line">housing, and industry are more important </span><br><span class="line">than saving land for endangered animals. </span><br><span class="line">Do you agree or disagree with this point of view? Why or why not?</span><br></pre></td></tr></table></figure>

<h4 id="答案一"><a href="#答案一" class="headerlink" title="答案一,"></a>答案一,</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Human population growth and development have put enormous pressure on natural resources and habitats, </span><br><span class="line">leading to the loss and fragmentation of land for many wildlife species. Some people argue that human needs for farmland, </span><br><span class="line">housing, and industry are more important than saving land for endangered animals, </span><br><span class="line">because they provide food, shelter, and income for millions of people. </span><br><span class="line">However, I strongly disagree with this point of view, </span><br><span class="line">because I believe that saving land for endangered animals is not only a moral duty, </span><br><span class="line">but also a necessity for human well-being and survival. </span><br><span class="line">	In this essay, I will explain why saving land for endangered animals is more important than human needs for farmland, housing, and industry.</span><br><span class="line">	First of all, saving land for endangered animals means preserving the biodiversity of life on Earth. </span><br><span class="line">Biodiversity refers to the variety and richness of living organisms and their interactions in different ecosystems. </span><br><span class="line">Biodiversity is essential for the functioning and resilience of ecosystems, which provide many **ecosystem services** </span><br><span class="line">that benefit humans, such as pollination, pest control, water purification, soil formation, climate regulation, recreation, and cultural values¹³. </span><br><span class="line">According to a recent report by the Intergovernmental Science-Policy Platform on Biodiversity and Ecosystem Services (IPBES), </span><br><span class="line">biodiversity is declining at an unprecedented rate due to human activities, threatening the provision of ecosystem services </span><br><span class="line">and undermining human development and well-being³. </span><br><span class="line">Therefore, saving land for endangered animals is not only a matter of ethical responsibility, but also a matter of self-interest for humans.</span><br><span class="line">	Secondly, saving land for endangered animals means protecting the **intrinsic value** of all living beings and their right to exist. </span><br><span class="line">Intrinsic value means that something has value in itself, regardless of its usefulness or benefit to others. </span><br><span class="line">All living beings have intrinsic value, because they are unique and irreplaceable expressions of life. </span><br><span class="line">As humans, we have no right to destroy or exploit other creatures for our own purposes, </span><br><span class="line">especially when they are endangered and vulnerable. We have a moral obligation to respect and care for other forms of life, </span><br><span class="line">and to avoid causing them unnecessary harm or suffering²⁴. </span><br><span class="line">Saving land for endangered animals is a way of showing our respect and compassion for other living beings, </span><br><span class="line">and acknowledging their inherent worth.</span><br><span class="line">	Thirdly, saving land for endangered animals does not mean neglecting human needs for farmland, </span><br><span class="line">housing, and industry. It means finding **sustainable and equitable ways** to meet those needs </span><br><span class="line">without compromising the needs of other species or future generations. </span><br><span class="line">It means using resources wisely and efficiently, reducing waste and pollution, promoting renewable energy and green technology, </span><br><span class="line">supporting local communities and indigenous peoples, and planning development with respect for nature¹⁴. </span><br><span class="line">It means recognizing that human well-being depends on the well-being of nature³. </span><br><span class="line">Saving land for endangered animals is not a zero-sum game, where one side wins and the other loses. </span><br><span class="line">It is a win-win situation, where both humans and animals can coexist and thrive.</span><br><span class="line">	In conclusion, I think that human needs for farmland, housing, and industry </span><br><span class="line">are not more important than saving land for endangered animals. I think that both are important and interrelated, </span><br><span class="line">and that we need to find a balance between them that ensures the survival and flourishing of all life on Earth. </span><br><span class="line">Saving land for endangered animals is more important than human needs for farmland, housing, and industry, </span><br><span class="line">because it means preserving biodiversity and ecosystem services, protecting intrinsic value and animal rights, </span><br><span class="line">and finding sustainable and equitable solutions for human development.</span><br></pre></td></tr></table></figure>

<h4 id="范文2"><a href="#范文2" class="headerlink" title="范文2"></a>范文2</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Some people think that a sense of competition in children should be encouraged. </span><br><span class="line">Others believe that children who are taught to co-operate rather than compete become more useful adults. </span><br><span class="line">Discuss both these views and give your own opinion.</span><br></pre></td></tr></table></figure>

<h4 id="答案2"><a href="#答案2" class="headerlink" title="答案2"></a>答案2</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">	Competition and co-operation are two contrasting attitudes that children can learn from an early age. </span><br><span class="line">Some people think that a sense of competition in children should be encouraged, because it prepares them for the challenges </span><br><span class="line">and opportunities of the real world. Others believe that children who are taught to co-operate rather than compete become more useful adults, </span><br><span class="line">because they develop social and emotional skills that are essential for teamwork and harmony. </span><br><span class="line">	In this essay, I will discuss both these views and give my own opinion.</span><br><span class="line">	Those who support competition in children argue that it is important for them to develop a drive to succeed. </span><br><span class="line">They believe that children who are taught to compete will be better prepared for the demands of the real world, </span><br><span class="line">where they will have to face competition in education, work, and life. </span><br><span class="line">Moreover, competition helps to improve self-confidence and self-esteem, as children learn to overcome challenges and achieve goals. </span><br><span class="line">Competition also fosters creativity and innovation, as children try to find new ways to outperform their rivals. </span><br><span class="line">Furthermore, competition can be fun and motivating, as children enjoy the thrill and excitement of winning or losing.</span><br><span class="line">	On the other hand, some people argue that co-operation is more important than competition. </span><br><span class="line">Children who are taught to co-operate rather than compete are likely to become more useful adults, </span><br><span class="line">because they will be able to work effectively in teams. Co-operation teaches children how to communicate, share, listen, negotiate, </span><br><span class="line">and compromise with others. These skills are essential for most jobs in the modern world, </span><br><span class="line">where collaboration and interdependence are valued. </span><br><span class="line">Co-operation also promotes a sense of community and belonging, as children learn to care for and support each other. </span><br><span class="line">Co-operation also reduces conflict and violence, as children learn to respect and appreciate diversity.</span><br><span class="line">	In my opinion, co-operation should be encouraged in children more than competition. </span><br><span class="line">While competition can be beneficial in some situations, it can also lead to negative outcomes such as stress, anxiety, cheating, </span><br><span class="line">bullying, and resentment. In contrast, co-operation encourages positive outcomes such as happiness, friendship, trust, and peace. </span><br><span class="line">I think that co-operation is more aligned with the values and goals of a civilized society, where people work together for the common good </span><br><span class="line">rather than against each other for personal gain.</span><br><span class="line">	In conclusion, while there are merits to both approaches, </span><br><span class="line">I believe that co-operation should be the priority in the education and development of children. </span><br><span class="line">This will ultimately lead to more productive and fulfilling adult lives for our children.</span><br></pre></td></tr></table></figure>

<p>例子二,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">some people think that it is better to educate boys and girls </span><br><span class="line">in separate schools. others, however, </span><br><span class="line">believe that boys and girls benefit more from attending mixed </span><br><span class="line">schools. discuss both these views and give your own opinion.</span><br></pre></td></tr></table></figure>

<p>答案二</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Okay, I will try to write an essay for you. Here is a possible outline:</span><br><span class="line"></span><br><span class="line">- Introduction: Introduce the topic and state your thesis statement. For example:</span><br><span class="line"></span><br><span class="line">&gt; The issue of whether boys and girls should be educated in separate or mixed schools has been debated for a long time. Some people argue that single-sex education can provide a more conducive learning environment and avoid distractions, while others contend that co-education can foster social skills and diversity. In this essay, I will discuss both views and give my own opinion.</span><br><span class="line"></span><br><span class="line">- Body paragraph 1: Explain the advantages of single-sex education and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; One of the main benefits of single-sex education is that it can cater to the different learning styles and preferences of boys and girls. According to some studies, boys tend to be more active and competitive, while girls tend to be more cooperative and expressive. Therefore, separate schools can offer more tailored curricula and teaching methods that suit the needs and interests of each gender. For instance, boys may benefit from more hands-on activities and challenges, while girls may enjoy more discussions and creative projects.</span><br><span class="line"></span><br><span class="line">- Body paragraph 2: Explain the disadvantages of single-sex education and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; However, single-sex education also has some drawbacks that cannot be ignored. One of the main disadvantages is that it can limit the exposure and interaction of boys and girls to each other and to different perspectives. This may result in stereotypes, prejudices, and social awkwardness that can hinder their personal and professional development. For example, boys may lack empathy and communication skills, while girls may lack confidence and leadership skills.</span><br><span class="line"></span><br><span class="line">- Body paragraph 3: Explain the advantages of mixed education and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; On the other hand, mixed education can offer many advantages that outweigh the disadvantages of single-sex education. One of the main advantages is that it can promote social skills and diversity among boys and girls. By learning and working together in a mixed environment, they can develop respect, tolerance, and cooperation that are essential for living in a multicultural society. For example, they can learn from each other&#x27;s strengths and weaknesses, share their opinions and experiences, and support each other&#x27;s goals.</span><br><span class="line"></span><br><span class="line">- Body paragraph 4: Explain the disadvantages of mixed education and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; Nevertheless, mixed education also has some challenges that need to be addressed. One of the main challenges is that it can create distractions and peer pressure that can affect the academic performance and well-being of boys and girls. According to some studies, boys tend to be more influenced by their peers than by their teachers, while girls tend to be more affected by their appearance than by their abilities. Therefore, mixed schools need to provide adequate guidance and counseling to help students cope with these issues. For instance, they can encourage positive role models, foster self-esteem, and prevent bullying.</span><br><span class="line"></span><br><span class="line">- Conclusion: Summarize the main points and restate your opinion. For example:</span><br><span class="line"></span><br><span class="line">&gt; In conclusion, both single-sex and mixed education have their own merits and demerits that should be considered carefully. In my opinion, mixed education is more beneficial than single-sex education because it can prepare boys and girls for the real world better. However, I also believe that the quality of education depends more on the teachers, students, parents, and society than on the gender composition of the schools.</span><br></pre></td></tr></table></figure>

<p>例子三</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Some people think that parents should teach children how to be good members of society. Others, however, believe that school is the place to learn this. Discuss both these views and give your own opinion.</span><br></pre></td></tr></table></figure>

<p>答案三</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Okay, I will try to write another essay for you. Here is a possible outline:</span><br><span class="line"></span><br><span class="line">- Introduction: Introduce the topic and state your thesis statement. For example:</span><br><span class="line"></span><br><span class="line">&gt; The role of parents and schools in teaching children how to be good members of society is a controversial issue. Some people believe that parents have the primary responsibility and influence, while others argue that schools have a more important function and impact. In this essay, I will discuss both views and give my own opinion.</span><br><span class="line"></span><br><span class="line">- Body paragraph 1: Explain the advantages of parents teaching children and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; One of the main advantages of parents teaching children is that they can instill moral values and social norms from an early age. Parents are the first and most constant teachers of their children, and they can shape their character and behavior through their words and actions. For example, parents can teach their children to be honest, respectful, compassionate, and responsible by setting good examples and providing guidance and feedback.</span><br><span class="line"></span><br><span class="line">- Body paragraph 2: Explain the disadvantages of parents teaching children and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; However, parents teaching children also has some limitations that cannot be overlooked. One of the main limitations is that parents may not have the necessary skills and knowledge to teach their children effectively and comprehensively. Parents may have different levels of education, experience, and background, and they may not be able to cover all the aspects and topics that are relevant for their children&#x27;s development. For example, parents may not be able to teach their children about different cultures, religions, or perspectives that are essential for living in a diverse society.</span><br><span class="line"></span><br><span class="line">- Body paragraph 3: Explain the advantages of schools teaching children and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; On the other hand, schools teaching children can offer many benefits that complement the disadvantages of parents teaching children. One of the main benefits is that schools can provide a structured and systematic curriculum and environment that can enhance the learning outcomes and experiences of children. Schools have qualified and trained teachers who can teach various subjects and skills that are important for children&#x27;s academic and social growth. For example, schools can teach children about history, science, art, language, math, critical thinking, communication, teamwork, and more.</span><br><span class="line"></span><br><span class="line">- Body paragraph 4: Explain the disadvantages of schools teaching children and provide some examples or evidence. For example:</span><br><span class="line"></span><br><span class="line">&gt; Nevertheless, schools teaching children also has some challenges that need to be overcome. One of the main challenges is that schools may not be able to address the individual needs and interests of each child. Schools have large and diverse classes that may make it difficult for teachers to cater to the different abilities, personalities, and backgrounds of their students. Therefore, schools need to provide adequate support and resources to help students achieve their full potential. For example, schools can offer extra classes, counseling, clubs, activities, and more.</span><br><span class="line"></span><br><span class="line">- Conclusion: Summarize the main points and restate your opinion. For example:</span><br><span class="line"></span><br><span class="line">&gt; In conclusion, both parents and schools have their own roles and responsibilities in teaching children how to be good members of society. In my opinion, both are equally important and should work together to provide the best education for children. However, I also believe that the ultimate goal of education is to help children become independent and responsible individuals who can make their own decisions and contributions to society.</span><br></pre></td></tr></table></figure>







<h4 id="其他参考"><a href="#其他参考" class="headerlink" title="其他参考"></a>其他参考</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">Some people think that parents should teach children how to be good members of society. Others, however, believe that school is the place to learn this. Discuss both these views and give your own opinion.</span><br><span class="line">Some people think that the only purpose of working hard is to earn money. To what extent do you agree or disagree with this opinion?</span><br><span class="line">Some people think that the government should pay one of the parents of very young children to stay at home to look after their children. What do you think would be the advantages and disadvantages of this policy?</span><br><span class="line">Some people think that strict punishments for driving offences are the key to reducing traffic accidents. Others, however, believe that other measures would be more effective in improving road safety. Discuss both these views and give your own opinion.</span><br><span class="line">Some people think that the best way to improve public health is by increasing the number of sports facilities. Others, however, believe that this would have little effect on public health and that other measures are required. Discuss both these views and give your own opinion.</span><br><span class="line">Some people think that it is more beneficial to take part in sports which are played in teams, like football, while other people think that taking part in individual sports, like tennis, is better. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that young people should follow in their parents&#x27; footsteps when choosing a profession. Others, however, believe that young people should find their own career path. Discuss both these views and give your own opinion.</span><br><span class="line">Some people think that zoos are all cruel and should be closed down. Others however believe that zoos can be useful in protecting wild animals. Discuss both opinions and give your own view.</span><br><span class="line">Some people think that it is important to use leisure time for activities that improve the mind, such as reading and doing word puzzles. Other people feel that it is important to rest the mind during leisure time. Discuss both opinions and give your own view.</span><br><span class="line">Some people think that environmental problems are too big for individuals to solve, and that action by governments and large companies is needed. To what extent do you agree or disagree with this view?</span><br><span class="line">Some people think that schools should select students according to their academic abilities, while others believe that it is better to have students with different abilities studying together. Discuss both views and state your own opinion.</span><br><span class="line">Some people think that it is more effective for students to study in groups, while others believe that it is better for them to study alone. Discuss both views and state your own opinion.</span><br><span class="line">Some people think that keeping pets is good for children while others think it is dangerous and unhealthy. Which opinion do you agree with? Discuss both options and give examples.</span><br><span class="line">Some people think that spending a lot on holding wedding parties, birthday parties and other celebrations is just a waste of money. Others, however, think that these are necessary for individuals and the society. Discuss both views and give you opinion.</span><br><span class="line">Some people think that living in a flat is better than living in a house. Do you agree or disagree with this statement? Give reasons for your answer.</span><br><span class="line">Some people think that advertising is helpful and informative, while others believe that it is harmful and manipulative. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that learning foreign languages at primary school is beneficial for children&#x27;s development, while others disagree. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that studying history is a waste of time while others think that it is essential to learn history. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that children should learn how to play musical instruments at school. Others believe that this is a waste of time and resources. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that travelling abroad for further education is better than studying in one&#x27;s home country. Do you agree or disagree with this statement? Give reasons for your answer.</span><br><span class="line">Some people think that watching TV causes weight problems in children. Do you agree or disagree with this statement? Give reasons for your answer.</span><br><span class="line">Some people think that teenagers should do unpaid work in their free time to help the local community. They believe this would benefit both the individual teenager and society as a whole. Do you agree or disagree?</span><br><span class="line">Some people think that success in life comes from hard work and determination, while others think that there are more important factors such as money and appearance. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that the internet has brought more harm than good to our society. Do you agree or disagree with this statement? Give reasons for your answer.</span><br><span class="line">Some people think that wearing a uniform in school is unnecessary and should be banned. Others argue that wearing a uniform helps students focus on learning rather than on what they are wearing. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that smoking should be banned in all public places while others believe that smokers have the right to smoke where they choose.</span><br><span class="line">Some people think that the government should provide free health care for everyone, while others believe that people should pay for their own health care. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that the main purpose of schools is to turn children into good citizens and workers, rather than to benefit them as individuals. To what extent do you agree or disagree with this statement?</span><br><span class="line">Some people think that the media should not report details of crimes to the public. To what extent do you agree or disagree with this statement?</span><br><span class="line">Some people think that children should obey rules or do what their parents and teachers want them to do, but others think that children controlled too much cannot deal with problems well by themselves. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that the best way to stay fit is to join a gym or a health club while others think that doing everyday activities such as walking and climbing stairs is enough. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that the news media nowadays have influenced people’s lives in negative ways. To what extent do you agree or disagree?</span><br><span class="line">Some people think that it is a good idea for all employees to wear a uniform at work. Do you agree or disagree?</span><br><span class="line">Some people think that the government should make laws regarding nutrition and healthy lifestyle, while others think that it is a matter of personal choice and responsibility. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that older school children should learn a wide range of subjects to acquire more knowledge, while others believe they should learn a small number of subjects in details. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that it is better for children to grow up in the city, while others think that life in the countryside is more suitable. What are the advantages and disadvantages of both places?</span><br><span class="line">Some people think that universities should provide graduates with the knowledge and skills needed in the workplace. Others think that the true function of a university is to give access to knowledge for its own sake. What is your opinion?</span><br><span class="line">Some people think that it is acceptable to use animals for the benefit of humans, while others argue that it is wrong to exploit animals. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that cultural traditions may be destroyed when they are used as money-making attractions aimed at tourists. Others believe it is the only way to save these traditions. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that it is better for children to begin learning a foreign language at primary school rather than secondary school. Do you agree or disagree with this statement?</span><br><span class="line">Some people think that computers and the internet are more important for a child&#x27;s education than going to school. Do you agree or disagree with this statement?</span><br><span class="line">Some people think that rich countries should help poor countries by providing money, while others think that they should help by providing education and skills. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that happiness can be measured by wealth and material possessions, while others disagree. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that human activities are damaging the planet, while others believe that technology can solve these problems. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that family life and parents have great influence on children’s development, while others consider that external factors such as television and friends have the most significant impact. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that the government should spend more money on public services rather than wasting money on the arts. To what extent do you agree with this statement?</span><br><span class="line">Some people think that the best way to deal with global warming is to plant more trees. Others believe that there are more effective ways to tackle this problem. Discuss both views and give your own opinion.</span><br><span class="line">Some people think that the main factors influencing a child’s development these days are things such as television, friends, and music. Others believe that the family still remains more important. Discuss both views and give your opinion.</span><br><span class="line">Some people think that it is better to get married when you are young, while others think that it is better to wait until you are older. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that the only way to judge someone’s success in business is by the amount of money they make. Is this a true indicator of the success of a business and in what other ways could success in a business be measured?</span><br><span class="line">Some people think that all teenagers should be required to do unpaid work in their free time to help the local community. They believe this would benefit both the individual teenager and society as a whole. Do you agree or disagree?</span><br><span class="line">Some people think that it is important for children to take part in organised group activities in their free time while others believe that children should be free to do what they want to do in their free time. Which opinion do you agree with? Use specific reasons and examples to support your answer.</span><br><span class="line">Some people think that schools should not assess students’ ability through exams but instead assess them by their course work and project work over the whole academic year. Do you agree or disagree?</span><br><span class="line">Some people think that it is better for children to learn several languages at primary school while others believe they should focus on one language first. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that it is beneficial for old people to learn something new while others believe that once a person is past 65 years of age it is too late to learn. What is your opinion on this issue? Give reasons for your answer.</span><br><span class="line">Some people think that it is a good idea to have a detailed plan for activities to do on their free time while others prefer not to make any plans at all for their leisure time. Compare the benefits of planning free-time activities with the benefits of not making plans. Which do you prefer-planning or not planning for your leisure time? Use specific reasons and examples to explain your choice.</span><br><span class="line">Some people think that it is better to live in a city while others believe that life in the countryside is more preferable. Compare the advantages and disadvantages of living in the city to living in the countryside. Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br><span class="line">Some people think that it is more important for students to study science and math than it is to study subjects like art and literature. What are some of the advantages and disadvantages of studying science and math? Use specific reasons and examples to support your answer.</span><br><span class="line">Some people think that it is better for children to grow up with siblings while others believe that growing up as an only child has more advantages. Compare the advantages and disadvantages of having siblings versus being an only child. Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br><span class="line">Some people think that it is better to work for a large company while others prefer to work for a small company.Compare the advantages and disadvantages of working for a large company versus working for a small company.Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br><span class="line">Some people think that it is better to be a leader than a follower while others believe that being a follower is more advantageous. Compare the advantages and disadvantages of being a leader versus being a follower. Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br><span class="line">Some people think that it is better to have one long holiday each year while others prefer to have several short holidays throughout the year. Compare the advantages and disadvantages of having one long holiday versus having several short holidays. Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br><span class="line">Some people think that it is better to learn something new by yourself while others believe that it is more effective to learn with a teacher or a tutor. Compare the advantages and disadvantages of learning something new by yourself versus learning with a teacher or a tutor. Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br><span class="line">Some people think that it is better to eat at home while others prefer to eat out at restaurants or cafes. Compare the advantages and disadvantages of eating at home versus eating out. Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br><span class="line">Some people think that it is better to travel alone while others prefer to travel with someone else. Compare the advantages and disadvantages of travelling alone versus travelling with someone else. Give reasons for your answer and include any relevant examples from your own experience or knowledge.</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/20/writing/" data-id="cluj9jca5000x3j1m69vgb0no" data-title="雅思写作" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IELTS/">IELTS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/articture/">articture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/04/03/shell-study/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/04/03/shell-learn/">shell脚本</a>
          </li>
        
          <li>
            <a href="/2023/06/26/how-to-implement-zero-trust/">how to implement zero trust</a>
          </li>
        
          <li>
            <a href="/2023/06/13/news/">news</a>
          </li>
        
          <li>
            <a href="/2023/06/04/develop-mode/">设计模式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>